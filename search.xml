<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>【Assembly】未分类的汇编语言</title>
      <link href="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"/>
      <url>/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="e8dfd25c115a7035f8ef27adb0521d6ddde3800190e54d48927cdb92e1b9c3c5">dd3ed03bd336fd6815aa6e965af0fe4b11301f92216e110b22311e48303bd88525c7d9e2dcddab73599cc39778d50b59bfd06151872727b59bd7020ebdb79c8d51534a50b1c40b670467761105360ca1712f821c4bc0e8ae4d3cd44e6b38f6cf94c197c32cc2979180cb4fd02c6ed90b45f5cc87157e9e924f1ec3caff1665fc00d4a2db05770e1046efcf4a4a38bd6218dbfcd95f57f049c67bf90ca7715a40516d3958cfb69079adab692c80c04e81eda567610389e0fad473dc1128aad4e0d73a7bde29d32d25e6d6b5b4f9835f170827bdacdbc0ad4149ef2f9da3c12f19eb531303cecd06ff81e2e1058c17a1d059c5f2aa2a2d328214e2bff8831452079a0e0009c4231f26bad1b3a7cf8cdbd8774774275e99fb8bee48bc3020c2ab8ebb5b34d370213baf98d83f9a7d44c85b5dbef6b1b3b62fa79642be2c743712afce22ae2efd852ad7514b8e991fc9a0feab97cc59358bf0a841168a9a8e8e8820d4f489613d1ea9e16396436ae46d221a916664a3205f6a4a9be32429530413e761bb33a40750fa57fa02ce6d425026d38c075de073ed9884de3fb928cc98a5af0a5e69fe1489f613cfde1186f20e81b30198d5d25a4e66e0a36da7e63d601dcfb8d5f64cf44967c5b53ce16e164d31aed775cd67e90a6b72daa8d75363fa7c3686b4cad7250c6a2055818983da48cb0a74a2e8476435670977c82fdeda71fefd8ac2b6bdd307b76b2c986f23f60965629c80e30dba473101dd90c2f8b850def4b3896686fdd0464033fc9b2ef39c9386279c3a20da7598ee03a6c01cb3d8c1f8fdf1ca0ebad808816178ba77af2fc052da2d97150c7bd7d49b7689dfc994aacb25a1ebd957fc187a3080a4be0e84a5d39505cc8bd3e3a8ee6421e0b5838040a8a91286bde95188773871f2e3f9dec7dc377fb94620f9bcdad65e210d128aa3ebc6f65a2a05ef041b1485d34a61791043a35e69723c9f5098637ad49002673639f884486ce26b56c345e04a6d58d228e927fd0f28567179b6da86fd05eb7e6380234dd0c68787b9a07573299335c922941cdfa4d03d6ba0179c08da08c967850c193d6d88cf2d4d509054b3e7ad9ec3cd6d3f88f1f785ef18d2085139e8def69e1dedcd2a1b92d3965ca52882239d90430a6d15409fea433e3fee57cfdd23aa167f1be4084c6d80c4fc70a97473d913f3c0003cdde1d2be650b3ef46359dd0ee61286f95fe5c48456c610d34eca18829fa1a2ed0daf971e43fafd4c1179804701ab039c067bc737ef8ba8f31a1ac80d02be9b9f62acc4bf1b9007a5d87114fb379cdb2116e6b435cfab682c1d541155e4996c555226b8ea944624677ddd665d1d35e644e30dd70a4c01ac1b78cc569cf5632c39b97bc0cbc6d998dd35973767962c14d6fa7d37d76d3aa87d30db22880fd5d1a4a4c071a4b9c21eb825c3ba0471dfd0b5c91d5b5c9ece30bfd2b81a754f574d333bce991c2b6fc14ce892a27f506d77e02a2e057fa10be660c02ba05372b067d106b50b70ddb5f8e55239cbdc7ccb64cac32ba722f94ffcfca4ad79c4a7305a2df7e2aaa1d8b788dff5f2a9d4c4589c235982da5fe465d7797b99c0bb841d8ef0a613883f29dcc4633a6a1e52a21374cedc99ab771da0445adeb85d64a3a01af4847fa9931e1365d66c026d2c1e6134eea303223cf5a6aafa322fa93b40108b4f499781575e463294325b3161832aa423b35ba9fdf8d714fc35e2fa04112d3d02861419da0a22e5bb718eee60b5bd92453e734e5998e1e9210036b0d7484c930c91609aac12e941b87671bee4269213a21378679c11fb1aeee1163bb4aba079a985fc3ea42009f3489460bd8f8af74b3d73a5a43f4384cc3cecef30ff98524b56086e871add216eb60882c7509b0dbd59a161037499985ea58176f8e72bc3f4c04ffb034a2ef1c548ca0fded96f3d05350ad74efa64dcc022b1ec8143b579254bbdd297978e9c738f2f2901b86f229a23691cd0cb52fef8bdd2c563d084527717d7a209992b4c9916974a0365e4b70f4b66b9e1fb1ab2b786ddd9c19bd38542ee5f5163f556e3d089f09871bb0142418dde66a21cd22cdfe3be6d80fd896e9f70befac86e1673f1d5c385dfe9410c7922562b049a8933ac89a32f3a68075efbbb8f1111c718e459250b64c7b93e9f0ca8072141607507ea2c55695b7d8163e0a855dbb51077485a091ceb81024f63982cfb2cca347f200fc31589004049299b24eec2e00ff0598629dbfafdc57ff8026751b361715986cd7fe714b81569256161623f197c8f98cf466d5173c963f512c38971bad7044c0b87f3d6e8caa3a78d45f545331b92a6197a27b765e47e83aeaa7da8859aec0a473e604824dcf1440bd71e6f584cbd2ce275aee5e48b5d5f4caac5be1a661ecca3fad573ac5c889f600da48a717c187b336917f7bbafd90cdb53318373283f38d361a5aa61895e713653a797b92d4dc854c8fc7d1743c3755cbc6d0bba938cca71800dec49575a9c1086aad7e164003fbb85ac51535ab7f81611321bd8b379a2cd99d9d0363e2e92c23ab94373fb04fbf9bf8b4b5ae0c3d154d19f7c81a1219b8f5dae60454fc9160793df45f89ccb8f2e4ca65e82a60cf7d2886551b7c6b4ac4c8f63278fbfe103cd0523529906ca50e42e4087365acfee0ecdae96d57540c842fc19592ff058ff0f25648e639f929dbf94829768913302be1d3a31b25058cafbae6c38e463fb188cb7e0b31ea6996459896b996b6bd0de6e5843340ec033685db44e2a572e460e89255cae61a26586a2ab22a06a59f81a5fa81c9084101dd17d35a88cb60eb4cffcd8118025e1a882fb51dd28eb5a9a82d4a041d0ce68672d3639cc2af92ee3968977c0c4838e89620ab5ef3e3290f2933d1c740d6eaed718b5886b9f0f08352db2db93cd05f228193da803f18f79856e1ff1d09a74809bf4e35ab18456933d90b8583c978aa8e589a54d096524bc2672a7442e941680d94b2a313e6b1e3beeb2a84f93933b97137ebbe893d0451d2bf4e40ffb93b06f6466d863e72f99af5423c0cb0ef2b80ce5f5ae52615851cabbf52d6a88a3013177cecc1c8ac2bac7e32f8421aac2cfb0df6d6a330f83ed3b6364e77210f89462865cfa9197e00197e3cf59a07513341d48e80b4b829772f8faf584e66f9be3b20e95dfa7a76dd535efea7eea4c068a0bc384dbfd5e6aa62849f4c6fabfb764ee03790ba07d877f5fbaa21e64d4e43850bbe76493eea5e3e5b05307b9c2a873f89e04d9347ebd4aba35767b12441117f88608fb65e1a72b765ee869ee7b476538e57d2ad4b6f085e347bfb4293d97c3baa7ff81ca3f00d5856381940f4ec97b29d630268b16404910a36664ce484b20fa71a3609c03d9411fbe21b5239d63baff1b87edac9b0a6d6d2de6988a1d99f270cbd1cfe2474da8afbd133f286549c34decb838b390059abe96f3660a9f43f275cc6cd20672aaeb56c9d639c6a99086d4dd1c64141f8acadffc28a60ed5dd4e7a90a06abff4eb29bf660a2f7dfc471547b9f03615ce9fb97116f68b99df56b3f7054bec1a4a0076869f81137140f7ab0e9b3c880dea27473185124adcaa768ac5cfe0336acfd07bd93ed2500163ddfa03ef8c87d422e232d23238070ad9d21fbbeb0e4dd79a77e03e288a246f3a2e146d07555a58cd44fc9039af485e2bc7fda2414f2b55bd4c4dae88ff865c33c98777e5cdba48c49b18a91e7313eb714c7f5e2f2ec1b575e3f89cdc6b01d4bdb40e8200c0078ff8f5f630db2fb612d9bb35722bb79874ac36530ff9cc881cb4d0b597737cf1fb6dd45e7fbc061ef3b5c47b138a5ee27f3181a6638a2ea7b6835ea9be184bceb1c8f8370a981684f49fbe9e0c617fc41d5a48710296d01b3fccb79e4d2090c36d36f7c0137e59f403370e15a603aed0e6f4d5ffe6d138064aaca719f8e5c08bd96c2dbcb048eed1e255bb5ad348b06c64dd123e94fc53987b6f572f963816151392d384615229fd93f7fcc0be0f7f59c1e3fbf8b1acca993693ebc7e8dcc538f660606677e7cbeb8730ac8c8b8785443a8b8591c6f64e313ad09420fc49ae7d6ff5338a121fc67aab238405eb1d7b5f70f386db5918e40d1ba306a0b35d3a44b2fed2d437786afe77c2d2ecdc26f3427d5945d1ea86414a9fa54cc7df71305708322c711ec10860b043fc9b8c546fcb4c60e33845c69e8ee746a179a5aaa3ce70e3feed05cd71eaf9c58638700af5ae3c1ecd7ade28dac1c3cfe182cc29f3023879a707e36f9b3f740616884026d5d9cc085a72ae126cbe984e44918a5e86ed5dd35b5d0cb6f180b43cbd4792ded2c7c08dddc633b106c3b55fedb4bd0c7abeb8e87c307acbb99289175b6c2372bf3047574cc969e491c8e76aea85eb4581eb2870aa5d1b94eec0d973200d0e8f980db5a7f0226a5e997f663ec6c87cecfefb33c04363a431ab4f7cf7998000b86a6340290a295d2add75054093d34fc1c53c985a72e0cc8b3a5e4dac08b457ee11ec5322790b3b5ca86f1a5057faa70c7180dee61752d9107e5d04915ab813a03811c68f792ded9689bbf277fafb6e009e9484dcba28b022ef6d229fe657a6c21f447123b0b50777931daf8f96272a71f57a542e8a0fc6e74ae9a7292d36ca498f6a14623aa47e454ce0bfbc2718d7fe92dd09d8f122500367556334c6490cc9625df32d34d90a1ad119b0ce35545c56fc44bfc30942495a916edf04f5236aa30e3b3c666d92dded9e30aa327894efa837b3b7a8d9d621437b469a1a1ca6c731650f68ecdd3e25fc648cd6d12d0d0d7811f161da85901fb69a16be06d1057f63e0abcfedda5dbff4c3a998057b8d34dc2d6298e4b85b47666ced646250eefa11307eb094cd8ed8e6ed17648dd0ce5b0c647b483afe3656135a67089f55d6bad5d17a4aba995d71d7e9b9f1b8176b99753dfd3cce2d10b23b67621ae5d92b24f5b2466b4ee7ee819640f5f4d4ab16c14c5699db3c987995c72eda4cd8af5c828e7d2933b6b39170f7745ce28fa1d8117ff864ed17483c386646ccda9606ec8a16b4dcf6333127e1ab08f93747fd2481aaca7d0d5d37e97787805e268d1b25a2180694d6f160c45f7d0adc953f19d2b23a0ec8683bab29cc82fe5479a54d5ad7b8fa1eb5a8ab3314e12eb2a11d40813df50d2b846db47621a67d3c9798553ac006f6e7a99b031ee16553732bcd5ff8c66b129d7cda73126e0dbdeb388bf5f6d08a28526d3a84d397ffc194db6464145589011e2b3915ca457245b93efe4eae680fb74bc96ea8ed895e3efb286cb50c6950995d934ee77eec3f4610fc21fbd9c617647abd44a2784635d5a8c64db92114276bc442eee36baac4bc4975e024d7c7a659305b64f3ac8ccc62fe53dea3c52626d854d05a716faf3377caffb4d6fc5d9270eb2c6c273bf34ae8bf949f10a68c593679fd30d09eb458ba28bedf7b8b8eb2ede7bfa6ba2127776a7da4d7622ab01b1fcb401c14bcc711762b04573623e58b2dd851f4b9536439b2a090036d3e953004c054567b2be81a09a19b36d386213c47284b3c79d56d7b8248e954424eeb98a7d421ee6afb5caff001eee8f9544c96971bc34d82520e9494f5ac5bb8b9800e141b24d1cfad9dc7741792c0721d23a5b03e82a6b29a33556cbb388bc0ddb45d5612df485727f31bf4ed7d314f89883d5ca211050921b9244052053afd8deed9741d4619a87f4ebb8297543e1d10ea05a41836cf36f8605fe31893883305eddfd5a7964630041ace35998899051e193207df3b5e9fd712b285a10071d65f3287164afec041478c0d01a50ca3d437d51df09f70083ce2f92108654652ea8140789e6ed56dc3582e2436c242b476657acae65331fd48bf4c010c00014a1053b785ea00301c66426fc66124ea962ce40d3e8a3e0dc1276db3dddfbc213e3441b1768ea3d0b51b3fa69631bdc47c86addb973c6d66d45709c692a38efaef5a92761329cab2fc5064fcc66af9e0917d6f052b7fcd4438c649c3ba8f8d370e5f0fc6a03e8d7b3c6e1c0285cca26c309cfe84af2c48d6bbe527732dd8506862a626b77420b5c4b3c1e9ae632985ca5cdf1b2cddd58d68337ad59f4c5e683a48e89dfcce6e6bd72b98d4f69a316093d9e96856ac13f18187d4d417ff5ce3eef4e8b698505e6d76dd12cdc0d9b8d3347fba112d82338661454015aa2f4c4f5a54140b64bb280d59b5fd3dbc95767d2241d51a7ee3e931c83835cf1ceaefa0e0d694eced9ef642acbc044297893e7036052649775666d94494ff567601c2dbbe26e2e2d36b3690eb24fec646744d8741e8a87b58957200186630c28b9400d9d7d54d29f214cbb8de6ae96b8c06d05424577fd196a924b37d878cccc79f7080b0548a621e452fda9c138a44705dd351a177530bab00cca327dfe2944682c11a32df33bc419744e9ffe0cccd2daecea08c21ed42ee5aa28944a90d5c8b94105a776619b7ee370ccfdbec63a3026ccbdb0cc63edf055b8fb3f112a928712d8e6b572cb45b6d5914689db454a9e7e3dfb22f20e5bf932b96bde60926faa54290073d4903458ae8ab291b36ac7f867950acf3447429af4f604dc72934c42d3799d0468b736aaef3e4662749662227f770c7a40b41971851bcb13b8fec7b3089b1e0a69bfb3f2e702b6c94d4ab350137007c9b2c297662c56098226041e6cfcfd46e75b4beabfa5a5a09f73cf32b6d9e88adad35bfb30d8d82f871f1494cd2e69283153de4ce0100650cceb4411aa73fde678755d2a2dc9ee0c17676497cbfbdc6f53066a52cf284ec1c3a60405a2688a29af282ca6a3a4f4c28dc011c27fa91595747dfcb30872a6de22e59439dc5c32b11f56bb2ff179b077f3efe6eb99b956eac9c18cc2baa2eff270daa223b90d00d804c2bafda65f4e528914c11a6edb2718ce851d8d55881a82a63f017fb4591e733b41dbde4d0cdc4103d09145a473d9895ef0c82b66129f509928c40902a24924a62c56dca2f8b4d8f7a13ceff35d9baaf347c8d899b2ed93b1a8df64bd273adbbd9d4124bfa180c7ebeb8501ad72637a16ffacf7572567989e5fef09aca0b8a600f6cfd046b5633d9b8b44054763629162c1fb1fa91b88b1d6c38e16ba5d34f6e7c9230153ef3489651ce4b428354d05819774cff9d503081f49b8e0a3f15c126147fab5e15f7716de0ae51470d18da79a1da707390516bc773a1c4a7c559726acbc1865f38691cb85cd7cb18badc34e091a2b0901e3081d2b73f7496583fde139e7bcf113fcad5937638fff0e497c077288b5d6baaf2bb26045747adb6357e049f2ddea26755d1094ea023fd8e1c0f149845bc01ad3dd0e1718c0472fbd5ae1888b255c638d10dd6311ac10b9474146713ac43666d7532bff36e1d76a0877a33c967b14bf567d3adfba07c0c7ee74b8e411fe9bc1bd620da41ad55718841c26f1266d3bc4159732443eef19767113199afd8792c889e17f34b49b7ee1624aa6a4f667cfe341e31d156c086a3fdfe30ddd5f84d14af5c58b55dc8a0692895f0668985790406ced5a7844f4946e82e1d1fec10aa2ab4977ce4f1f1d97766b20bd8f4dbb47affca8c11ac9541e47a11ed17de25b94d98d7fa2409ff80acfd9b1dbad1333f22ca5f0764613a5e1eb7f7acf0f8963f38b889a77091eb8a6fa7cb5d6e99628e47b96c26205f877beb2cdfa04c9eecec72068a8c09aee9e22327c267656d9d3747dbe7e28d69add7b8bd571abdf432622c33581d793f785f4fcf6070827835ca4efd5e86f5a257d9f774c24555a44fc48fcc55bc2edc646032352331799bcfc3d0ad3a39ef7350fdf9633a45c5a88cf37f2b08bd68286e08cd022af863d239bb8487d449936432a46f89554b961b17c3090ecb93129d92d6136d4663ff034c6c1dff0a2d4a869df8d61b0af092d097d9904e1e6989da310829753ab67649dc5d4d6cb71a937d2875ed94f85bc8c0c884027ac0688bb16962f9bb18f1349dd63fa55f074291b2c3299361ce2b726d2acad853582c557403d2897fff1f2869705e6c1926fb376d5fbb56537ab03f941ad21c9016ca0b95a0df3cd9cd76712c28ffd269c459c6d199aef958a5417d8050b0c116a66b6338a7250f189452f535aa6a5bc7a13a41a243b96b7fe41770d82bbd9da98eb87d46f80fcb2fd374b461afb0cb7db0ead6137ab7185fbb5dd0705bfc33f754de048a1cf03547047aad15432c7eca5310834a16c9760ec81dd4dfbb71ac0f706139d11ab471c8807e48303ae6431ba70d5ab941fb2f58fe581a5d85907ef463a82754ee329ded8f27687288d534f309eda794eb937c2d5103e5cbf47ebe166f157e81e9c332bdb9e1ae2faebe2b377dbcf632cb8e62e77595c323b52ad2a8ec10c1e715e95b8015e24eccd8cf8079e73993275087896a12e6f86299f31e05fa61ba6dc54346ec543abefd32b16084981bd01924ac59e48a08dcdd79e68f7b301b0894777d25835a4772d50411f1c01da2491856c63cca6ca80e8155273373f911b8ae08deb24bbdd2c248cae0785ee33f10d32a717165dbb6c64f734699c99c1cabed360ddf181dacbf401221e60780bc845be8f7ba4b4c54d85cbc8c1a00512a5633b8b3ab9c6b6939989d42f753047ed380c8120c8f2693eb41302f040730b59d658d09ce4556932ceee19ee23660335c5eee8fea93ff61b0a23f07391f14ff0049769f2161e109307356fe17487baf86ed56846f8383a184bd69a44082e89876df4350d6e1a6a5698230495ff43747661377db35eeddcde50e4a95da6a528a0dfdb97045df3ccaad9cdde3dbd78c007333e3a19c796d764ff643aeb8047d20077112f01e9f0369b3ff5369fd3249d1de15713537e4d4150bfca6964d9687608576467bfd7c6181701506ce5946f3b4f849bfa8605dfb6996b730ae1fd3a7c309196da1d2764a4aeb5719b2d3163f4626f12dcccf52b9e4955ad56f8979226cb0d9623bd538beb171d341bd9e9cd08ebb02c28b7e44ff0cbfc7e2c24a7f9eb2f5625a72a47ead158f8806261b33c3c3842966241123f71075ab6a6e52418eb9a2f6df13c8f821868ffed41a13f06250cc0c7be8ccb4c1ce5b75817fe942c25224d373da7cbed845a95e6b988a2e6e191f1266da59af53e38444e8076792a492e23ec0ff97ff6f43134ad6b3bbe1a86684fcd14a501d85946211944444ca4e7f43117fd1828ebca36bb8192caa51f10e674f2902b0d565ebe59beec1312d24b7ba44a91d4c06fb72d5868202051480cc4ee3ce2b6f553fb952c079ba0c86ef843385cd25208afe91d2fc7d5b8cbbb47bd977126828d030b47cb108c47e49e36cd3eb1b844778e965f29f090447a044f383599385edcf226a807ac77189cd51bbf095ec9d3bf6f5bcc5f16e015c26ec50e6c7b1770cf6698b3591eeb5e46a77f73d10a3fce12bbba02db93af79095533770a0222fea2384baa79f7e5c9684dc94f5b4007ff0734b8c61463336acc872cc282416e4d42afc77b4d22f31638360da12d52ae794c72887d05207ebbc62b60122025e054f3f680c2755419946fa2a2740ec42d7642209a1ddc5cd1b7e7bfc59fc1f6018e688f3feca479cd1163e9c554b0ea78a81b5dabcc1f68b17866656286bb5ff697a814452c06c001554ec7bad55180f690525153005f93efdf1a8836e6110f4a3b3b1c6d285d7e7261f5b95a1e37248957fe723370276d440031466d781bcb4452c0b41bc6a177e5f3c7663237b5778feafe75bc18394390e91a5862fe241fe47f1c2339f6bc4dfd57cab23586b60913939f010ca7251bfeb9f6b8502b3e222ff52eebe2578607fe3b053325e3acc08ec0278c36d4b76def78075106df56deaa0987cfba3f3e88b3641b65cbb55060bc1eba15b6aa540abe97173ad4dcfea7938bf540342407ce56c668aa8a3f4c8dbeb4d960b1d666eb68f31a9cf9a64fd2a5146fd38eca40cda16f2681976493a9e7ae42e0ccbac0df08986976013ecddb4bb8ceead4653bac58c860a1236b0928c4d8a915ddb2a261daa466306565b7a10c10dccfd997f7ca80e786b66d715970d91db46df00817c109b623d1a9fc8f2ec42018e80846d459cfb76f778bd022b8448af72d9ef835a99bf806f23cc5c697d2a817c48b938e007dd965052c7f5df8fd72a87942a9992b036556aea653225a42421daf058ef7f63f3893202b363e41a39f32559b6a5bdaa1906ce482f81ecfbce5b713f8f77058d70a59b5cb5e36e210d14602515dd81350ab7057627b152bac825031225d2a9b92a82fe9d016ce4861e4a5a4716f78044b78dbe4d054417f07ce435903e86ed68a28e982ac5a1b2b9f456449f9272b37977062b39b6f804ab613b009707990e66c1cd3acb18751a010a934c7dc5b79874dc0031a869cf1d881f542ef689de6907a329c12dae4cba746d681e6057522d3563fa1d475a230f00606001d1ee0a2572a8cc696747350a3c55d6eaf3de37456b9e5177accb58bf817a8ea3e77ef7c87edc10bbd0b7f6885ca2ec8c41a543e742a6436ec690e054f4d49adbcf52f76b7bcb7f8ff945d636591434434b8fbadbd3e2a88965403c1f94cfcd39a486e9d2c3144101a7a8d0c00dee309860a53336988382c8c669f63249c2845a73f212bd1284ef41efc85f2a4efb35eb63f37db7698ab1fd093e0d2fb43fc6c5ebad3ac54bfefdcafb7effa600d607adaaf4b255f6f599e89ec7e598bd1b75fef1421f941139c650819ab20b75fd6ac9f71b47dc75663f9d3d8dbb4be5c504d1e02b59382b5c2049f4895d62be63dc852c1f8bc742499b8ff9a3dbdff3a9524e691591fd14854b526e59cdc6162062fa54040de3f8bb792842ece4c8c48d038cc66d41e4dabd9b010a683266aa7a2506c6fe69d8b100931b54dcd059966a035bb19d3988f84816b8dd56aae00ac515fdf0239754c86ee92bfce45ce4d91c77ecc819bc09734a46bf9fe3271036bc846d4094e28ffbeffd007be01b6a64a6e42ac1975f926b9e60a84a773c63a4e1589aec54604f0cfb0631a594a431fe8e97d92f949cc844585d264ed6df08560ea4687a9b42d929a5ee245b0fd970f26a56ca27fd78cedf933901457a1c0f5833971cdd238047b29bf2e1c60e6d7bee63855028b08afb269b0a8122a4e548678dec35242510a82338ff5560e4148dcf2f9567f8a15baf5957fe1c279c5ea6ac2476a1f34c1c03fed339c18a35eb7566c9ab7b9234e58aecb68127d00727928333efe440f7e257cee580dd361e6f905c7561fd30b4596b53bbe3556b7164628822b3f4202969beb031d8ae087cf250f4f13ada3a9e4f30e5a0f87faf93e64f06bd689ce6b49cc634d472cd353b350071e47308dc15bbe636a57e145de5f5fdf0bb011a8f16b386cff97930d06ade626cb7a11a6f86e67e5ec1951d644353b5f17d6980edb8e8ccbf7083e22d070683f4eb38f69b9b37149f0e22b7e193c0ec996f8a67e85c30aca1f2c172a8ed10d40b4453074afa12fadc5427d5df1ff80591566e3bb8d623a3aa05606d66abd1f218cb2c676c6bef945e266c1fd58ad3c62dc9a466cfec88e3c7ca5174c4e73b610ef6e1dcab07c65224b5f8939362cfa4a7c21bb184c23742e34afe397ee2c78c00781fca7071dad129404491c7a9cefe4d0881bf1ebba93d8d65b51c1a6bda9fdb93a93d309f925463e7a902b932b49a2ba1aa6517c9700d20935c3beb7a83c4a6405ab0e2412d10b1552f1a470dc864290988bd694476e409d3c14a47b011d06455c09c7721b5da1da480b379945bd13aab50fac17dd35f1f3a0db19edc62b103ebf99602b4190a06c922eff476a16f076992546f03715383eb3919cab6d5fe315db1c0f403e20c6a01bbfcaa71361abc4b86e6783fa884b9b524169e211b0a18c632a0ffc5f22a279b9e177912ba736cb1a6ea4d189613327f8a1edd29786292eec851eff5b7ee22cddbc155d3ea27732ed62581ee1fa352db2944fe558b58323900d2ebca97c6f9f0a89a5776a59368baa3ebffad32ede347317e57118a17b3db8ae383f6c8ae4957e571434a5801194e1601e2ce55bd7ecc2a9954930e6dbae645a21f1785a08c6ad0e965353bf70f51bf232ec82fba2e6177d5bc81ead24957aa4a49199786ce74013b5b6c8a428a878f702eb99a6ae599d0ce0fbf4403e3f56e061d604df741f2a5e3b404d9483e56f8e1635e879d4f27fe5194d54c964ae6aeaa6a15d3b6e5b25c3fa94e1756133143aa72cc61743286ce837b384bbedb864642c991abe5e3fdc26730adeda9b548a76a71035e32c0a011f5798b0b67e5f8cf1a9bc115315dbd885c2e40a8ed1b9fda7d25790b27b709022563c94c6f4e9330af412db9d060172b6a0a44ef93feee776031ff1a524223a682f89a06f168492b0eafcc8bbb3b1afdc88d0262c2afdfd1e647113b6d27b1af79cd986407fbcfd718e581daa48a657715cdfaba459edf49425dcb799cf09dcfa40df97f0e5fa71d8f6c439e7af2a1faa559032a0b4d16416dcfd4aec88413f9715d140210e23c377b3ce70d9deeffcaa8abd131723e06564d0b20bb6db44d274b9fa02955a2ad012922d44ed50a7fa8427cf12a4a286004317141b1523d5f6650137f9ca65e1cab6aac03fe990a08c02a903c625fbe0dbf5211b2ae1c8fec972d9dc0be6177e4b55c483bc95a73f6d302840365279b9d7400f5c462f6ae50c0405059b3a5b29e0b9ae9b7f943f27ccdb0a061fb9dcd9da8ba04f1d165196606922f7ae310d23e138b2dec72172d9d112752006fb65fe6e13d8fd5f4668f9a47212d6b096418ddf23c8f18899a2efc05cdd21c3e48dc326f09f5bd97ecfe2486b40e0ae9fb8ef01c2779adb3ab752d352bb37a7fd2584064b20e60d838da66a966a77111ebca07dcb606946f9451ff9e818f63390d6e81cd4eb1f1fc216d22c6cce625b61c5cf7c8f3da44a4db34f1727733111ef95a9a0fa3abe1662b581d1709a492ffb080f6c891dcd1265b69e3da27c6c40662880db7c826d395b3a5175acef692ba596c77320d0c196ce2225b7183f35d4a9d0851d6f0c6aaf8673318b8441b04b8a806b8278c9405620c587a9dd187ddc328ee7666a674e11d5d0f7b654a74712c66124abdb35985823443224928ec8edd8160df572cc25a041eb9d6bb73b7eb3f6d5279f710179e0c084b3bf5ebae5b63a4ac4a75fce5ba76f03027ee4435691f49976f004eba422e58b68be4faf50ccebedd0e7400f3bbd40eb22e72850774e67cede4f37425b56228974db3cb5d2cb905b7a710a38cfb8334662d9a9db8936469a69768c4ef5d7d680ffc20fbc7f89aa25dccb36be814d9c4da3a4d1fcb3f0df804c1647739832e62763822b08ebfba35ef97d1e396312418b6df1db815979e11c18829ecdb0a62f2ffcf916f64560b47d873c1d3f4f7e2f0fca4d8f5931fa9526dffef60cd89f688831976e929ed6357b49e94caa55bc32401d388f4d35e9e764f390e94f1d071cfd165cd577578db160fd685ac14671e5ff000f9c7611e86b7162b717725cd0d0e52789947a69d4a1435a071ef5ea11906f3aef8dd3112896aa6a5023b6d22caaee124ba8b1682abd645b1e0b3fbb1414a21cc6c1af3bf406ff46f48d5c4bf1c687f464c869f9e6bf0c4da0a624194ba48c1ff37e2d1a03da34153dc68dbc53f022bc6fc3bc285410b2556744ba2c47fc1b4f78d1589dfc4c652afe40a52f67cb0ecfc0941d64111358e3ad247fcb415fd0c7f4c6a964237c17a7cf3f8848f8a7a63d92a075f3a02cf5be1a964d9c1131709360990884b60c6f6763c3f4955b01fb21dfaf6111b327aaea71483f9a3e87deebc458800b598b826a0f520fb038afcad8c3fc8f2d530195719c5634b6642508436a3302c07f9c2d8c82a093218617bf1a920f69dffa73f6581e99c7a48504bb48d5cacb05dfbcf466606114895dc0242f18941f5c34d6f4ab97e61f796d5317439ef53f571f1693689a92b437656b3cea8a6093d0b6fe0f96dbef5249fb7c4c3a15a1ac4237a6822197f4b41f798241c56204050f8b4b91d1b62bdf947bbc3c4f3895cbf3d9a09c43c83948f630b2b0961a7b49c32a88833fa4f590e00df50acd54d0bbd39f376e72f833b72714e33d608ab187e06684a360f92a167c30e0a7ff9e21e8d963afdb61faa83008f86c298d883cec5e36c5a5a58186457cfefd8d84056e32eaa148ab9a3aa3f92fe30a4a29e7d41cbca9ca22dd4f201d58034080a864b0b129580ba6e5b724c865dcebb0bf6bce46360fd01979fb6ced3fc8b0267bbf89207eba7df53e694a8ac58030867fdcaeab0f7ad08c2ae950649a893427e574153f52319abc028a5d5acb7dbddab4b82fb2d294f8b633df54593d944710e0d498c0ceda0e1ec7a0e352fac29cba0b7e42c8019cc298f618287c6b0d997a228ecfe01a363ccaea432bc9e3a2a7f87fd7f18c71666a63a72a34d5c460ecdbdd467c9a8af8349cadf382cbe60d1136f50b50721eb1e30019d9e9221d57744acb7211eed5bc0301deeb54247b66ea7c944e1d3b697eb15ad88c779adcd612c0a6c557376a75bca150a9d860589b9aca0e0e3b6c3c9c238ebff0c92e93bc0f1c861f95f1859c7b7c05751a207e12d3caa188ff8543a7759f9bfd81f8a4398543ace877c2b37917ec4c5c276d441c6da1eeff4ab478e97f9d4e356f69541903a5fd9f6c4f5d5be226901e48e630b88c768e10aeacaa20b6da13200fac8c9e8b65e2e88bb727dbab0254280d81ef117585de14552cc3c86b5f2b83d0de0c9fc289e0a528731845c2642d0d0f61ec79eade8d30de7405c04d5bd8bff82cd45f188d3aa9cb92b300c68a34120e691243a554619d731df09a5132133264c4866be5913c9705f3d54fb01a80c2c58089d58f6e4c693d00817716e3b5de0f4692c808b912375935e75b8470e3ec197385886fabac14f08965620bd1b840336c0db0207cc90a730b167fbe5712737acad94dbd7ddb8a820681933b90d8b9a2b9ee58a8ebf7232b62df8d1e5aef07f83163f3d586c6ae2239ef560da2965537422a4f8aab8be18875118bf211f1307dfc704609fe3f53f7729cb6a3af1733adc5f0379f2bda0f51496911db28f9b30caca92c2e2511733ca695b1c72016a719323c7fa653b31f6c596de34d8e77f84f113dc5454857f2d7aadaf7787687c46b2123e5de997e02160d72c505e41853d078ba1222250449fa5f4600f83ff17661483a7d2b07bf5592bd45d37306f6c11bdbf2fefc6e4bb3e88e6c716e249183c07d5afecbaedac895408ad8ce8c73e6f93750de44cbc139d64a0b4f5315781ce9b3d88650c32623550615ea947f174b485f9ae05785ccb7eaec89bbd48b7a6cbaadad53db6e2ea53de01b1f408c1e18a6099a3265a58ca94ec15f7d70bd3a499491ee7fa0277bacaa3532804a0feeb8153d6f753ec20fa86d5302b6bdcaf4c385f5acf9a6d7f658a415697dbaaa189de52c99f04327a0c360d839d0858a9c5237cf0e069d422002d532788ddf69c19a0f974765e6e2dd43a7dbe4166b399587167f86e1a991e687877190bade6dbd4f64be4fc975f2177787c073d8a6dd6f26eb5cc2a5196b783e7bcd690620bafa1766b10861837ac19de9f4e53634e2f3bca2afa0d10bac0df409a14ba05de4da3fcb832859d1ee26f0208dbbad6511ddd2f0706fa810a3cf7ce171421565ff9c9daaf5590b55f1bc46460c56d63c1404a19bd186742edd020d1e6e5b30434351e9b6ea90f6526dbf22b08a1a31cf227eb36ad4e3bf6245b75c3fabe754dea58956c2c10ec38a23abb3f1768156c820c3057b28458c92f09ec80165f9e91f4f737d78840797743ad0b6231cca66441be8e402a6fb6cf81a82c63e51bd578bf200d4fc86533be174d74f6bde76f8a2e6dcc4fc5cc5fdd51911e9aff8e89eab6e0030a66efa4081602207ef785b3908f99c7adaccf4005b7a9309ad8f57b854ef80fa910892b4012f1c35ffdaf06f1ebc97eca11af2dc799e37c16e65cf06b6698ff47da583b3e1e511defe043bcd19b0d56b98d1886ad1541965540effa01dff520d4491256fd906b4e0b10104b413eb24fd5b4ca8c95918adb9e66cf684861c8e4577d8c7dfe87bfb3e1bd3250eac354570a2c8e6160d63fc4b762443531357f30b8e599dd86a60da3a4d4d8489c70195d6e058e1a7aa934bcbb92dddc80f64df77208a7b3b63ea38fbd051f65e31508f316626066fc771f484a479f7503382e5238f6ebbce080830bdc21a75ae4d8166960bfe071c0688fe2de82cf8f61665fc23880cfe893179fa60ecd98121ef6b82c72da1f8a0b6dce8d91631d44beb6889bbdf8992bad2e3bc2c0edd5f8789e0ee0cbcb91ef30cd8b1c7d9456f95a89d73248c448d38f88203a9a53e8140a7e3ff38fb06e6aa4a33a5bc831710ee4c716672ac6d44ca8850cb056c8c0890bcdd638ea0c749685d19d276d8cd2ff5b784fd452e8e8337247f7c09cb817852bea67ff1cb0a23e8a64f8f488f6e67a4db468bff53a28e6f4a90c1e5713c19fdf03aa242a138b7931057334bd64fdcdd62b683aa298e74ed46ac5b46188623d61706d247d916f5019cc68483b4256e33bc599456c7294b3b9fa5bfaa408c4c0c1309413c8040827118f233fdfeacce4023d365c4d1c8fc90882b137c2fc3d89b670cffc98de85da906e8e7e20eecfffc1c29a49fc8cb507df6575911bd8912cce34146eda733c72a38dce4728f691832663dc37fd3445048c86e70af12a08c1632fe7effeecee86503fb35e0c5dba3042a3cae4dfccee43e7adf7bd8220aee7f9be598d42b5b57b92b38829816a466765d9ce4810705ec415668818523c37816e1b629791116a5d8cd78f4187657546c665d06eb3d02051a7090c5efa59c2197f80e1a73026a98e54997b0bfcccd4d8488d46fa9b5bac0a168600744ae631ed352127f0c58e9e52db4496d125973ef5af4f4accc8265dbc225cd7378ba77b6c9c93a0d37deb02e94a3e3b4d01fcc402499bbc5376a510d64f6a9fc9e2e165d422e139de1910183a3c4f09fce5c889470c8948267c97689ca5cd18740d96563791e3cecbdf8e85aebba89a40ba67ede6561a3eef01f7f0206100c9f82e565e883c379cbe2417426ab841334f793d032deab7401234513bd91e64163a35bf70744d3dafcd4c02a6adf377305e579b324a93c53bb82c48d8204ec47df080e703c82a67eec2f87daf2caadf99d470fd2a1a70ead464a621733298f27f63a9b99b59ce151e9f40fe3f4be876bb04ffe7b8782c5d43aafccf5e1bad4d501367cb25090a047a70a8a15efb8e82c9f7090807eebb15f89aa3b55bf10af5df6e626f51b18ae36d0fb7e5bf16d2e90a2d5a5d553303854e49af5043442a218720b95131580c493d8e04036edbeb0ea72e9288e5a32cc0f19e5c18d2334d114d15a2916588adc37cac4c089e3e3592f023ad40610d1e0a5d91b9175ed71825ed9072028ed3afd576af4916b7ab2acc280a80c7ef4fe6bbbe8a62b657d55f44f1fbd7be4c6253241f0a5d5b6d64a4bfe5caea6b036b24ecdbc78ed66bbc6ffb7420e16793a4d561730aa19ec58e86bde7755803006028a701f0d9ee03a123bca76c7d9da953833fd4a761e1d6e4710c99ef70ef00ac4c21158407d0f42ecf96aafcb45a01761ed0ed44fa34e725a85d48fb96207438c4d3d16dae94b83ac82817ca3586340a970adad289215194e6b22dc41a847bcb61e2aadb9f35bb96ec2af92896b6d4652b9d3d3ab192b8f6bb3e5fb90c3e84a798f2ed81b29f186ec380549f73ea1311004114a9e9da21c0441d90c4b2be332e92d141b8e8f9589a944bda328f5aed6ad8f547eebbb485bee60fa43e508f3efd742b1f26ed0d3caf52b03ca17e8ac29b27383c48b627931a37ce63b947a5b054411c241d53704e8a6f03cd18fea0c93846d9d98b07bb869226b2f54482cd6950a886729206a3a1e9ff0601294874f857f3403c9b87414ec05dbcc1498f9a96dd7ba809ee38c668d235738c665c8fbb2add5a2379eae601c4950e32a70616d730d4cedbad106a6b1682b3d7a06e7b90a76c2d8e165a9841f4f3880b09c824049dc996012b216917917917c1e23613207384006c6d9fd391e5c6189235016fe6e5435c40a74df9fb85f386122ff1ca45afa82b91e6b0774353e9959666b633206e3f4920f4453bc61b972e115a76a92ad85c76a7f30e4d11380125614985106ab022c4856654b4a9ec5725f29a439b86a1450f9cc5b0e0b4df43af18885c8a08fd7df4f72035ff76240282ccb2cebcf4aa640cdef4aea06902bf71baacb9d93e27a0b5aafa8f3d5bd06000f3aef744272906aea9f7b8f50ea5369c5b2e87b328962919ee2c1fe39d83134d5c116b54617ee324e0c5698ac952e77b6930ba612b30e488eb9c4c2e4f15f1d0fa408d2a886adcc52c82c897c4b1551a0ede3cb4ee36797c98ff83551fdc0007c55b0a94369f6a04c39af89d61cdf72a828ac93f05b7f86f2943c3158396f60c6f567b5eb7795086690e4f0b9d91f3e41cc9c0dcd5f0ce09443756d80b1431a951d4d611e9fce2cc9354e56c114952496931aace7717c63605912a166ecc56df3252d7ec307cee0d00e0995bd15c3ddfc4118800e4a9541ce6b523bdabe4259418af3279fdb8a3c534b02c730bedea06693b798c07c4d68d68f506a2b2fb2d9db19d9c342622eae242613cf9d7703b42efbd52124521301ca4e3a205e1ac34a6207dd4de693114ba0b4562e882ab42ddea518229160140dc77d91c673e172d57fd4dfc830f7222d5b2737d3cd00085698913e13b1fb481fb15b157261d45cc915f24a67d0d048fd271d9d7071da0fce6dcb7d6a256339e49422d2cc1d5c995b4045493adc190c49ae08e8dac20e44199f35d57f93dcd41ce3e291677a9ee5eb0bce5b069da875818269180e12f6e4aa9683b1e647b16abde5e8cefe3a5490a3ec5db4562e3ec908c2695285748eb2475373c4f84ce2a7efa9f724cbbc17625bc9d1078e2ae92fd9bb4a6d3cdd81df02ab4ec929cf5676fc69821b5ac8ad414af0daff030f451d247c4f53b940991d334df9eb2156e2dd40dafa25f970c391fe1e5aede180776ee270765b0a76fcc169d81f5592d57180da5ea4b09e2a5adbd415a956428089ebaa5923c83c3659899c667e6cb91f464c97230ce69f8be55a61d5b2e4a7e8d049c5370f593c65e90bb0b2bdeb322cb04b1a53a35e7d36c5ed87c50b6122991943701ff065e38630853e69b152e20489ec995396730601c658048409d4d1b0d1bd7fd4e2e9e5f537548a440b16556497c70607e3b1d38124ca0fb1d5b245a95128c0f4cee5854c2042f200e621add8b204e8ab7aaf4edcbb2ac0c549daee9932dd6bd4ef15468ea16baad4efcebe0836b5ce891b026f3b25f25dacb96c49b5f609be08679d903829322c950ea0dd5176ecf50f65f3f0fffd9806399f25a6e74afca947acf1e466351d6b431a1c3da883b8086831455724765f73a06370b53262cc0e14f139b713ee69219f5c6ba454b373762a1eb54bed86ad2b2e64d3290390eff92061e9eeecb82873d965f596ef0dfa78e7bebafb60035aafa31d4bdbf8dc1804c399b94600d217472cdfa9511e2d50524fe291538f80f72027cc27108a92420799d3e05d51feb36bbb8a0f3d15c0acfa68634629b19cf9a45419bbb8fedf4262b0f9115ed1fbfafa68552aefed7ff4d000b7297785fa12c5179803e67c0f2b4e113fa6d5d8e54d576ba14be33a8c4f90032338e290694d1e4718157289cb391402fca7a10838c8249725de314a2214ee9ec1e46bf2362f6a7a0d7fb83b71d648c54c7d3fe663ed4d3bb136d220c7151a48a2df4fa3ad1e6bba0dd72664d23b8a8bb13b49a0dfb39843c9adbaca83d5e71230e03be225fab2833c8e4afc5dc936a4466bd9f02076aeb6d2ca8287fcc0e8b2d93472b59c12dad15011a97bdb661433df3904e2ab5ebb726743f6c9f41dc11bef88f21849f40bc5de05f410a1fca9fd03a9cb4ab20a9d48bf3223d75d22c35dfada1f223a944bea4b9b7329739b3a5cb33d1cf9e30b90d9b0f58e239c351ff594fea3601dd7af618bb815c6c8d702ae7aea54c40ab2bd3cb0dcae70516abea4aa06333128e2ae3e7c2fb0f4a7312bf6d0faadcd184ca6803b7a26b1994f3df6adc6795cccf818449c11340f456d650a0cd103e63c6df9ed19113ca985c220c327266789e58517b716aade6be11bce0d85344f860a48f22db72760d1002988bc6235bd43db6a46ef1d812996fa39bc2920f485bcdb0f1db823129ef42acbbd2ef58624be8f0669e7efa5219ba7e613a18c3b3c13d7382e899832f24026f312bff5f1bfd6618c33e82b2fa5e18f7bbde8462851f8eb2f21d2b67c35e3e869a5414578582cfa98e68c2cf484b3acd565c0180a6d634a0d6307cb9d702059ba8b4534a8f87e24aeef643197ab22849fab4b9d13187a8c1bd233b9a6fe28d1bfb4fdec7ebaf0b2d4b3484c9cff402277424bf22f32187d002c55bd38a3fe4f75e7871c3aa153dfc0f91baa29841ab816edefeb3e47b09a6e73e979644a9b9e1efdaf433ccaac98b2483b842aa7ef485ce073657d0bd4e9281bfeece47be6259bcace46c6e90c8e45ef19487935b20310fef394738fe1ad77ea579b115bf007d1bf363fde29c51e8be4a90f00e64d074ef49b73e9461d7f87b6ad5e8ce8eebdde9c0f6e66be8c36ecb158acea5ec47f2a05d24c1c53351a1efd04462cd4c590070bc5405a0a2b68097e28e9e0c98fa1704600adde4f8bf461ea94744928f743b1835831fba63d040df2bebfa0934fe0caba7ce39055346f7341570ecee36f534272f9763416d6a2388559f15afdb81cfab9e3938278a437044427e9b37485d476a502f480d11c3700e55574e1341473ddd88311abfca4afba79278c0a2798d7590c9fae87fccb9afc12e79214c1b51411962b9ecd7a74ccf891756992ce1bcd5b087f2cc53d2b28e65c99c144b85497d21ef405944d4d61e9ad5caa43686555268ee52d474deedf8b0e0b7206d97f98b8fc29e3fabf4a9fb7b4be742bd68ecca5044541047b04b4b910063f8dfbafd42885a4b148efb169d52ed9af5bca678fbff7303aeb35ec9a3ef3ec3793778c4bc95e7f6555c9f073bea9fc7147f3ff10b0183a75d302a8280640de750f8cf85908abcbb559e24bc72ac0c147cdae3878deff01e16d252f0cac9a77bca3fb9eca20f08289f1949b981276c383a7343696402492699268246d37c33e690f659ea57355a67d2c043438979156b8818e985c5e4eddcc98658879e0247a69d5fb946c6cf3bcfcf49542e9ffedb105c390061f629ce788015364877f94cc2d171e1af0d5e96903124f7ab1fe2c10cf88748bbdee6eaf8335022043a395cce410b206daaefa8a4d2ad25523fd53a9b848a2b23753eea8e6c30a09df37d41ea3813c7c65998e07937fd1145d0f0c99edea56ea711b53ad669c881ced3e39527c7facad16e0e1fce74d491016bdd49e027188a4c781dce2cf2acba8089846e43314ad7a74d04153ec36bd7716eabcdf65fc123a397281aee79034e0a182d3cea12a217b01bba332e38443cc44766a1f56cd89395a51052e22ce5b7625423123ddd54e5113eb3837542bd8d6fa4e1308c6291ae969761be2a1fa176bcfc6fa2a2721c6a7d351c7eecb7edafd1945ee70d2a6287169a11df9c61f50fb7e582b19f670015d271a5e4995fb0348b9b8aece3c85bc0e666b698a7afb9f8e5f338fc38172ba1d17a176474e1c1b8e1b39bc8f445127e96527a344763580cd2c245d58d7a4fc4efc89f4685959bc628983ee9e7bf943bbbaa965dd38fe7c1f0fc40a304d6f7c6599fa2af24845198a6113bd93493c430caf52e3e35a54398357de0e139751905e88bdcbd6f4625685ce2410cbd3c125623a17958c0b491ec78fed3f5abb8c620c982ccbf814210f4b7e4ac8ef540979b7b584cd26804c2a008eeae21942f9a16351ed7cef7370966404d135a71832542d983126b8e6e81abd028b162505318a0abc996fdb4297373be23de5a94c23177a7e5b43fa1d18ff3a5cf7c7ea4399cb6bb185df158658d55328058f6f48eb346ab8aa55bd9a915ac92dfb6b1eeeebc0f1445ed5dfc986ec80508bac4851aa179fe0eefad1f59350936bbde66b9c33c40779e53841e09e120ece8d3cf4173bbbff1f7eab956dc918bcfbdda7ebfa21b385a8eeffe08e8b9927dcd214971deb77d9114e9bdf82d2cff6d89a6db734fe877afb78d195cd656c6cd7abef18c08eed8251d3f131ad63da5426e7fe417425b53e296492f3e37c68cee7578ad22eb191a4e8a7717e23e300b024e69691053063409815783ac467fafa0ea38ab0355fd7d82ec8b210afd3ad7f317f95e6b24b19e1562456ddb1127977fbc879b9845b02dafecc193cb81fdf05bee5a9238bbfbae7a776d1c6d6024d69634e546cc6a0f404fc0c0dfaff7c85f3e87d7722b90fbd212234a8ae2c4cfe00933560b03c60ccc5c9837a7c3a14f9f17ca31242232bca844d818a4d7647c1ae2fac268e8d6127e7323df4bfa5020949cf34fe5413df4a606d58e8f2c250ce8a1ecbd5a6c538cb6f623326096c53a9ee700a20c01aee866972a21aa6fc39f38aa6ac9a1d4569f419d545aeff53d76e6d6070c454d5f402532b0493ff105db170754027be2a46c879ee87b9544a4a3b027d0144adf0ca24a159de5030a20acdcd84a4ea7ccecf706f24f8c7c66567ba33374f72f1c5e2f53d447d6362214c54666826a2f7fafce7b5d2c3694dbc7d99b82ca8f0a004a3fd02fc1da0629c70050585acc37e2d6640911a83e5925cf56807aa058b142b9cabcf9a25a4b877d49495c5831d57bec2765fb5b9e5ed7243b1d1d6019fcce7dfb1100bd82340e359602cda0ebaa72227e7ade5e5a9d4224aa0ac4a04a526e867cafb516f384b8942207b34bbb3ce596e028c8c63c5c4ba176e6913de7fbaac0ca788a1b05c7b97d83d44a7274c29bbc6814705fe7fe3307c1bd64b61d4933fff8f378eb6a770900e67cd75f0e267d1f9540af979f599aa592bff9298c061093f4f8b14f345f48b3c3e71ceb44176a4852eb8e4c2fa2284f88be778fef01a70967ef935ec33fe68f86492a91e241677c7fce60e0c3c0d9eca4b22e6506d8cf2fe9c7ec922c52f64ef999bc8d9bed84b4f8d47c0b6ce2dd39ad91007761095bb06b1f7704126b872b7d852948f3139ba9a32ee50ddf88c543b1b0ab2d5140e68e510c301c3ef9d03146bc536c4ebdc9604a3d49f1d5cac2cc723523267342ea2aede01bda35298b7d41bcf54ef0a04d200a3949bcfa956712cd8e5519d532890bb9adf2e8e42f93bb7ec508dc0b57674f78622981352c5d1e18d44ffbf41ae6f8c2351afe3340f336805895f035686556e25e3c122b6bd4ac6f10a6b05200ebd3b68de0b992aa57dd51c2356ea5fc20fb1ac96405624543c8912d608fb74f840ff1bec2872fe908f03ec07594b1a461762df26693e57399980ca7ea72b6ab666a935e71d2df4eb7152a795add4421d67c48fab85ae5ffaec44a49c695abcd0de2260072d5ce97a518e7813dd8cc97bc03d8e73abe701745476af4896a5adf78a98023cc326fb6052c71c0f01dcc011f2f4db75d2d57911405c1f91d1363fa04f527505b6d8fb28ee6581e9e4780c708752e6824d7ca66fd1c51bf92d27dceb0c44882441d11bc2bfc5c1a99544a64297fe4a6045f24814455d895882d9cbcf1268637342f8802bc0f6a4be82a2cbc32b1d8458cca0930d2f5d0ea678ebc55ce26c1fe4b40a49096c2739df5c94ebf5a20a1cc474e32adb11ce0152c753eb96119ba4af267bbb06d39eaf6867ff63bae9531953e041a714821d44f4f0a9c0a06421131f3270b3cb2fcc9169bf465234f3435901d818a95e86e3d1121d76fa7931edf4ddb83674ebe08cc274bdd32a16712f367045dd5641534d21ded92cf5993381727e8c9bded457a5f468398ab00afc8dbdbcecbf33c706c4e3f4944b8f748e55a7cd4255c1bdca047e4f7c06eaf70ace65417a9587ea6666738f5a9c7d5ce9ef09921255b259847ee3b59bb67c461cfdfdeaef242ef1c4bfdceb1723f0815dae21cfa7a318d306af734d772fd061b70f6be198152f39d6883bc01e8fefcac2af956165a94c28b73fcb335d9cdb6a766399740e00830512fa6c50d35974e021655f19193b02dc67a04bf0c29e0fb92698668b773e516df3425ea80b6fb063738b163e47d1edde69472e229cfc489971c5ade055e84c781c2480361c7790bd001024f021c7f4e7b4188f95d220d16ee79f8c967cc7604f02f5cfef87017e1157874ff904afa7422dbab83c61b81ac79796479a3f6421137a2d4d41486e0b8ac62fa7d22a8d874b4429af2dca018249817f0c4e540c3ed213360180418549b1d41d0e1e098eb7d32ca140d9d8859fe1f42b94072d7cef4a2dfffbc98189b9eae8486054eff67948ad4b92dccdbb9648f149bbf2b989c61661fbfd85802a0e3f262b3611a699601e2ee4f23f64cb84b2728966203956315c502ee499e560daa04be237ceb1a2fa7785efe84dbae38721f2773d7f0b47d8b49aa0c4fcb0c74569a496281ebd8197f311dc24a1c1e1e0374fe6cbb41325d73763b3103657c3dee54e916c13f202409e688dc0e1b2c2215ac792ddfc4bc6ae9fbfa4284d09a36004fa2e2e8343b2b19035192b4335abeb1d78829d43d6ad96c14ac1db18c82f5aeae0fdb6586db6c979432538445e9da002bd5e62e32d1cdd93ea5377a2963356324e8b8342044073bf5f09122e264844fbbaed3f8a3b029c8e8c9a60b129e67abe5df227b3dabc87754d3ad52b69ad7006a06c5bf5817d17a8a1ec3cea8b53df14ebd1b61179db925d43c92c1873d155b7386c2c57d8050b22ec866142777b6982c9e2671ccac5457b45b4d37c48a62b027d143a2d027e2f67c7a10d704699d5a6d47dafdcd25602a75113cc75a1d2b7807f60d054fda687b394f42506389a7f4898f26c0cdf1a2fd4bd8fd37e6b09994933837215e332fa547c9d147bc1581f03f486ec08b3ac71ba24c23e076113607b74b2555bcd53ecffc64ca4e8699bd5bdbac1e247e1fa2f26248900bcc035a495bb36959b354bf70e7baf43a9cb57f2255503703195bc4393b4e53eb7a1cb058b528a1252803b3440e4f662728ef62da80c325149ccd0696e9fb6dee2306d8405032a5adfe257385a9ba7a3c4973b438fc3c0c3bdc69d087faad9489c028a4ebf8b8743dd3c891f6f654e26fce3ff2cfbd59c3e01df5ebdfc23f9a25d84a308d91ab3f2a3462ee627de104e1f1ac7f1d127f5924fa6cc2d22b2a53a5469b6ba787e78c6a37409b8463764fabe718e6649907e58db39bceee4707bc4a5091c095e461ae6cbf0eb5dc57d1b41b538692b3cc18958cd8735e984fc6ac77369c960a2c10d01e3a3c8284215f86fe616614aa360f7f5934c447e0242564093f8aa1e65c02a8ef0a3cbf2a07f84474829bfe9c80bf2d5ce1d06d6e2619fe2564b438c1de3dfcba60533180420b68ad097c8bc82ea1b3696b5d7b8cf28783b5295dc0b25967c69661b3959858546cfd0b126f420b46f6bb5d996850e7bf52eab075147f97c74728abda3b7931f4f3b4745714d5e620f52c3f3822725d63c637f1becb20c17ebb071eff082032c1ce2e6f362fd1712967fd1580b4a29170d2b607a5422a8285cead4045211c66d4232f8810067174964203ba2d8ce8e239ceadc5c5a37bd4617bce717eb3577f3d4a9c9276d69cecf5fe233a39d6963d313f5434bf62d8d128e79019add6d57f41608f4dedbd058f786dac3ddde28d0704add56b59b028f8ee53af48db85dc049831960819dcc24140510f72965250fdcaa132b45bae0750aad5aa4a2fe6315aa93ce1228adbd60b2bad3617155f85763cb3524ee35c9b4ef3360057c523c21bf449dbbad6316771483379c2e7113b7c3a2ce3cd62f92542370c1710b3f7e770475c34eed07f365344a449921de18ecabe62dae1b89d09cd3c928e19f6f898a138b9a0e9807a6300bc806f6917ca42337d8fc7d9a903dd3ae7a7e1cb4d6eaf3e527efa8865e4a8f64f374f9cebbb57139e84e1eb1fe28ad5c2e46bbf86e29874efa400e5e8b4d5ef7263fbef531e472a08f882c5668a227c0d533b66a107f53e7d12f960991284024d91cbe33883dbe53cfddf58d494babb776dc4a82183ba301152f838dfc3fa4ed8c3b51a681e9234a48d17778a6190f0be4a4568ff2c9f58afe2a7c489b20836a36175dd0c6bd3fa6deaa9eccfa062d4d0a8af713e7f5a613d0cc32840f31d44062a2355af6724a3ca61bddde94bd984d6f054e759ba1e518acda4f0134ee06ff8112531211b4e7c9e355cfa280fe9fa35621f1a65626b5e85cca8dd5655522b2f34e1cf4aa9b25d5e9ebbc04b59b81db8a3aa0ff363718e074e768b4afe92572bcf3cdc5e4d0ea5114a60ecd6efea5d001d0b49e2c725dd7f22f9ffab26c72948d6366ced2c1c222001716c10729f28908c273c704f21059491224af7a3a8bfa1512065916198bbc5ba186297bae50f1f18728c6af8358ad43344676aec4fb1074abaed6e6a774f3190b093d8bfa1c9cfa2e1c642b0ff9da7c94a749506678725eaaadc5fde2edbe25581a9cca292de7861e423953e8a2501570da80176bae636783311536e5751b2efdbecff417a8f21321c9866d997933973e7eee01ac78fcd8a20feeab07e5ab12cabac35333c155b8abc1a8252dc3fcb6603933d55bf87782ce6eef1bee973a830db79552dd964d8ceae3ca6d2ec4e492cba5c2b734786fe747c8b141de9e8b3686f80804411fc7f9433bc5c29c2c7b71bee2218a85124df24d307c82efea51cd57192b53c9f07ba30fb865e10f15e974cd95d9ebea433a35c114a796c96ec02b8f7eb1b5d134ad0bd3bd62bd7752a1473d2bcd6dfe4f2d3506b900ab6fa7fcc1f5d955235a7b9acafedf3fe283fbec4a775c86665addb924bd5f00666a539bf0e3e5689cf7d2c524db2e2487023074a6a945cefb42faafdedb58821bb21130862cedd5d89dd9cf624cb19f717de9b233037c1845aeffd8520bd6a6a200722f0ff524189ba4c226761cf550cc073f6b0e934a9261fe427ba24a648e68cdd9f39ed06f4a4d59601c2d13f26b3c5af243577d1c7c508af8e6f5c89b8ecfd41bcac67ea4aa0c14e50b7407758635621133b967f61c337d8d1e9f3614e0a201812d7b55db5a72875f00e471c331cc528312b92a17ad4bf0a13c9112ab12682f7b15aa004215218434a9638504e0fefa0b2291274243c744d5e34afb632d5432f8f97c5eeba573c4a880e05ac7378692e1635bde764c9085ec311c5b130c60507ab75d635f7ec1b11872a7dfd505ccefc77faa63db4eb2b0d0f543e16ec1d6bda72d6a20c8e6b46906a9af626879c29d5fb1ae22ec9f73fa6b594c5cfe7f1000fb6a3deddf206b5c72284bd4828c88132f5eb05139135b0ad16afa2342fe55d45249f7feb4c808cbf7e2d11533eb97c1e99e11d797b32e81205c90f0f1071561c9421c8345625bd407780fe385fa31440e2b39cf2a9a2b12d28f07f4e33e61de18fd0960cd0933cbafbde25753535cb8242033179fbf643840be812b3b4cd9d492bd7524c969d78f641e187dcbd354648b47d999146ad803ce97b59e44029b36dbc2ffb22effbaa952f2fb75ee13ff1ba2e38109e898a4e3036ef8375b5a10afc0bf7e6b8b120594cf30e1b62d5ff7bd955b5235f4154f075ce7926bb0612a59bdf65650a7f6134591587c0157c3d9a447a45c80c2fdeddeee894814f978a2f4fa2fdc843bcdf23619a9cce589d54834fc4cec291a8eae393eb8b1df09eda3ca0b61d7e75445d1a434fecf41972f04c986dd2b5c55c854126dac6a8fcd196df6a82848a7efb9a7253ee2d03824a5da4c4a774ed7eac20b071c12e51e0bc06fad8db226b3008cdebdf94e0b5fae8b9adc6dde46e8e625b69a0206929bf0da58d647dfd06538b2c348264867ef5f6dcb2b2bd08d52879c145085c8d182f79f18296e5e945c66d5058637034659330b5d1860e0577f063d0353e427b4ee8d58b4ce3c2bd1dfb3545dc90abb87f63ad508794cc9314ba5721ff5b0cd731c4ec415c1e382bb2a9ae989c6b6387030ea5c4739dc261056045e6184911954d94d318644c95d7cc3743b78979d4230a7bd0f995707d7efda69c74ff9b498eeb2cc24d502e292dde83a8d2e0c3f3429c3350c1ec32645ad6f2f4c398673a11baf65659327ea34db64bd81e1f56fc6d20698ed5bf01efb14646bb92926786c59008e23c81c78aba19bec12345a46e7c78073829c078715154a65100d986311b8a620a0138c8be5c08a99e76b9596abc7902074f2fa6ba642e4527153374fb06b8acfaa16d277d946b7b7dffbc44deadef5e29d82e5765c34617111da115849c25d39c878513bb4ae0d86efda5d5e76a23c31ce53442bf233e50e6f2d63c39bb3c380ce166689dd4e9a7ae5bd76060cf0425d73a80c3deb92dd5175d0e18a8a19017b6e07f9671f737d4694ce3fc9171a131cabf6276added999a3e7413e7387e4677b653ec33c7decc7972e932ebe3d8ae82580677c8683a78c13f94688451b5230f3e923a8211276556c9ab646a396c52bcaa2d5dc27caf18ed16ae78eb83f8644f14665ae89062a9b80c2247f6d273bbf676bf7e2577f869b1d6cea4c1aa0fe1027571ee7e64e4f4e0b274219a5bf52eafba2f1ae0680cc9ab9d59d920eb1aaf08774f1fa2c8f48914aac3df9bf7baab61e5be1796638996cb838bf780b6f9b189fc3c806c568253eb2a1f024329326976d02f27736926e977a7b9fa729cde953ee6fa2c54188917d4b2decbcaf8411351f52b7c182cf21aa059ac8a350359da86b10114bc34113152a493e1103884890a7521c8e72acb5573c7b59d4f1c8b42cee95bbd6ca8c99600e3f49823228dc99660a1929cd9e10987c2d97d3eec65371c771b4b9c0a82528e495263cf5a47ec20bd13ab8d392c4318c844bdd8ec90b14a178c37bdc4ab569f759a879f0e3a17c7230931e33ffde63feb31d5fe897d8f9b77c17640ea7b8fdac07b757db389473f36aa84363f1691e0c3824a0fc75b93296a299777ce64f2b36c758ff9a36109e690295acb57f995279d01d090fda272b53eea414254a9e11c4d217b5dca56a0bea0efa22ff9a4746962b1b6e45981035f7c4accb0e22a96bc7cceee5a80bc320a1a33f60ff8ae04073243770620c95548b044c74d6879b203567d131750ad9872b2c95401737d7907bf155faaab115810392f244d3fb8a850b5f4e2fc46ef1684cb897493dbec93db43e0bf517a1a7b459d437bc5a1a5a452b929285a4d63db8c42ef1d5877c1488fd0981102d021b6a4adea2c2fc67a679fbddbb980d4d9054ff7d850c3f68d772228bfaa469afd023724c2eb6a663ad8eb80a5e46ad33b4cf3ab442259c957bc0e6952b7d74005ad52d93b1dd1bcf957e1db75c6a6b8ec9bfc1fe030867c40658e72541de965b3076dcdff81fbbe10ed7931b2144512f60d8d15fd6d6bda877b91a1ddaad4d00575e55eb4532ec5f236caec6b8b1374e1abe0144df39166eaecb1f34862f6f731a1f1324c2451d9d68743770f99776c51175546a4bb86eaadc1fd1bd1519d63f21d1b9d4c555d791dcb3cd6f9f433709aa2959868c2a7841a3aa4894026337ac831cfc2dcd769fde10480f1e1c3fe7c493d4415ddfdff172569e2ff6d519f6c9f6ed1b296a86253efe4b066b38d983ae39192a646203af5a21c4fc9dcbf21d27e5d2faa70df87f70088005ed8c019585d62ea35b3f6cc6a9b13442d3a85bfc53b5c2866fb5d7b8d0aeb1df9ee17047483cc563e3f3128a73757d187e200320c6aca34f1310978e3e26abc2d87189ee1005c8b4041aef1305c2dfd664029f5c20b5272b1d8c19ca5d27685d0fc95e68bcfd77ca0b5203c26cab7a00a51c944e7eeb360d42d2977562c833a97e24b958ed231763b06b3e955fe0f2001440ca7b3ad8f6d7d02ad9eec9d9c1e95d59ec040409fe8bd4057a7f15bcc114186de1ad5b9d307db4b97f4e14ec57cdc4e9d391bae40f3c98129959c8b75209341fd86e436bfbe89baff137471d32905a19030e3eeb3d0f379b5121ca40191249cf9941c4c31610ace47de1a8a82a27f41d2443df301889307850655893468b925c509931d5db3c6e7d12dc513cde1179638638e46ff1d14447f9270aa5b531dfe1a2c45058f0e53e56fa349b8629b470689553119dc868f8b83bd50fcbb1345e4a0d7c1d1dcc6db4626c1ff29e817cf0b7d55329599e9200f3c5b9a69bdf5c5ce2e7a5cbe4163a424a5e1f290bc6b957e37b8d2f6b1b8db8068f8c2fb0082cf462ad26593dd3f80a2002e30290e4c2e44bac5de58b58254799e3e561f13a423ec2a5a3eb10bb94ee6ab9c5a219eefa452b596a991a3219953e935d51a2ad8cea2c9cde950f5c3ac3e36b30a46524c0cfb6364835bf5acbdc1220e3ffb51a2396ae8c3fbfc8def7004c5547741b0f37ffde9e9ab5ba94ed98203deb3d5c99f5d0449e07cb337c942b15c3298ac2c702998158109b5f41f6b7a4580b201b738197c2b3fe045b0e73568ff9acb6a0b6770c74e6c31493c2fa89c20b9d946b6c3cf968dea46257e05fbe9cd1f7d77b64596e682b6e169a47f1cb787d52fd134fd0a6c22d851859fd9e2ad8959e8e4701ff8f4b1124c05f02faab82919284ae4528e22bc96a219838ef37e7312c332f4a400ec37c20cb453ff250697a0a6f135c0900256ed2a9e069e57029f390355a28c771281745c5282d46eb33f9022f1648feac04472f9990ad6423c45c0880ce92a7254a9347415dc68c8ce1d379cff32d9db8e7ab0ccb2b6e9e2dfe4f4d65bdc61cef007f3cb3711a86df1b1a426fab5cfa3d36bb9f34b831bb2cb0d2e0b8013aec85d9aa9d497a74fd82af73e0b234b5c99b51a58bcf60b1ae3486a75d3f3dc2d8d8f8b26a9ea6e9fc8fce3e224728643a2d9fe5b709624f55239d05641dc071ccfaf69604290f3778b13afcdb3091590ba07a9329e47ce3a16439fd2cda14dd6cedc6eef096c29bacf1e5e2e29e4532f832b831f0b5dbfd7915f45d03c9033185d461a5ee0d27ca95fcb771875dfc42e112a344a9aab7bbecb3abfeaf75e9d77fdcf4686993b42c19a774e532e1fe9e25214f1a05a94b63d8bfddfe71d33c3951b28db652a70f2c8060270c0c2516ad2db4f56c76e649f2d89f63231f737312437204a62f3834b5ef3b74ccb4902a9d0653fa464868a6eefb8671f3648a618cd02bbfcbe96d453c039d7e376e5c3d366ebb05079cb919605f2c2cce3db68b2ae7f6933a9e4ffebd8e348f5018ac8c0751bad4cd9c2ba210285e26c92d824014db1c0ced81d40d2f3f0705250d7627ba71bb5399111ab554953a977a39159b24c461d9be4b7e8cc1ccbe30474f3aa180f3ca706f761a60f3dafd8098c2672f41e2b942ce5677917ad55c66da5a018d38e220136505ac4f2facedb8c0356318bde486cb5198ee48914e9d4fe841eb16a029a3a4ebd5ad276e8c08f99fb5e7233c2de03035a711ad5a161b5b39bfef284a856b06a21c42b7270a1a510d8716add57ae0f9c067285dade5a6692d9c91bbc6b8614fcf3aac9cc09aec5b84f4b9a9ef7e5c6a5d4e7d2f2cf86ceea7c1b331a8171cd1a7370a7a99008eb7e107e329ee05bab989eef27907f1bec88f4d4b0b23001456078a8f2ed3b514d684be41996e2acdd23dfca6f26c1619b25bdaf14c4fe79af62a2c09c93705ea957b3bef3e336c42423cfaf4a471860f5b125664a620b892555fbff044efd0c30220b4a99e4a70e90096aa32c714f90ab71468b5e11aece5d651a2127f9c88af950ca2bf03a5628f68a1bb72fb3792825e8f77482df2fd4669670f8f903b95803b8e564e0351d82afa8d2ab35a346535275aabe9c843489cca8e38e8e32601a07699c9a13a6f7b5a49337492f87c3d7defca54c95c947afccffa54a263c8ca42743457bf6d9a4aa31880335f64b3f18763044b81689f1bc385c6da301a9aff8bad6fef7812d6873cfc9ddf9a7e24ddebc100fff7bc2e607586f52a9d09cb0abb58d7e08c65bca0b48cfd7f33b087c6a3f016ad3a5aa9dfae2e3990c01a7b35652b6e8059418ef489acf585d2776bc906e346115b4eb9fd0169716b3b0b16fbc7fe12070346e23f9acde16763e31f6d105d0700239b4b84050650035c5b412c158fcfcc151ae18c8b145677bd52fa1ca2e10c173546d4c5ff14d9725d222d69189419fd377a9b04dbb0ec7b86b86e9c506dcbb251cd6abab93fda6118e8957cf90d0937dd0679d3fd2db64999a85d58a055588ac70b3c4645c0880b59d95d8d6b0f8e885d59979223a8c05c67a122faf724e0252364d30be351b46143acdec14d7c22ce13a68604b1b766c60e704dc929e9254a11ded7b946fd95e17e6c71795349956ab505d0f4031dad3d180a3c3fe24ac361149d15f06d399e497b70f1bdf84592e52be818ebf2fca6302845dffcdf4d43451bf6935c5ef881bcc3bb68e87ca56290bcf111c69f0a102d9a0ee782a6118e6bcc28c8e03bc5c2c38a4b7398b6eccdacfc45a21e6541b99716b28fc98838e34094acef82ea730a73c05e25c2df8b4ded63d732379ea1942f925ecdedf19107f3d8f7ef4c31429dad87f55caccb4b54aa7ee04ba8f5edce26c8c45039cd5e8884dd75fa7ca4abde37baf40149c29e578c17648d8c6955041f215f2044570b50de1e5a300b7db063d656f387625975740bbfc21ada</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码查看文章</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> Assembly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】Chainlink Any API</title>
      <link href="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/"/>
      <url>/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在Chainlink官方文档中，<strong>AnyAPI</strong>提及了获取多元链下数据的方式，包括uint256，int256，bool，string，bytes32和bytes六种类型。本文将对单元请求、多元请求、数组请求、大型请求的对应操作进行模拟。</p><p>官方文档的写法：</p><ul><li>Single Word Response</li><li>Multi-Variable Responses</li><li>Array Response</li><li>Large Response</li></ul><p><del>翻译可能不准确，那不管了</del></p><p>不仅如此，Chainlink节点的Job充当了一个辅助预言机节点监听智能合约时间的角色。当用户调用智能合约的请求函数时，请求函数体中会emit一个event事件，从而使预言机节点能够监听到这个event并根据Job的规定作出相应的回应。</p><p>部署合约关键在于指定JobId、LinkToken Address、OperatorAddress和API，但Chainlink官网文档的合约并没有明确指明这四个字段的内容，因此我对他们进行了一些修改，以方便以后修改数据。</p><p>代码可以参考<ahref="https://docs.chain.link/any-api/get-request/introduction">Make aGET Request | Chainlink Documentation</a></p><p>JOB的toml文件怎么写可以参考<ahref="https://docs.chain.link/chainlink-nodes/oracle-jobs/job-types/direct_request">DirectRequest Jobs | Chainlink Documentation</a></p><h2 id="single-word-response">Single Word Response</h2><p>针对单一属性数据的请求，可以在命令行执行以下命令来模拟：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -X <span class="string">&#x27;GET&#x27;</span> \</span><br><span class="line">  <span class="string">&#x27;https://min-api.cryptocompare.com/data/pricemultifull?fsyms=ETH&amp;tsyms=USD&#x27;</span> \</span><br><span class="line">  -H <span class="string">&#x27;accept: application/json&#x27;</span></span><br></pre></td></tr></table></figure><p>你将得到像这样的JSON文件：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;RAW&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ETH&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;USD&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;TYPE&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MARKET&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CCCAGG&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;FROMSYMBOL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ETH&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;TOSYMBOL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;USD&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;FLAGS&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2049&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;PRICE&quot;</span><span class="punctuation">:</span> <span class="number">2867.04</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTUPDATE&quot;</span><span class="punctuation">:</span> <span class="number">1650896942</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MEDIAN&quot;</span><span class="punctuation">:</span> <span class="number">2866.2</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTVOLUME&quot;</span><span class="punctuation">:</span> <span class="number">0.16533939</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTVOLUMETO&quot;</span><span class="punctuation">:</span> <span class="number">474.375243849</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTTRADEID&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1072154517&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;VOLUMEDAY&quot;</span><span class="punctuation">:</span> <span class="number">195241.78281014622</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;VOLUMEDAYTO&quot;</span><span class="punctuation">:</span> <span class="number">556240560.4621655</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;VOLUME24HOUR&quot;</span><span class="punctuation">:</span> <span class="number">236248.94641103</span><span class="punctuation">,</span></span><br><span class="line">        ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>那么我可以获取其中的某个单一字段的数据，比如<code>"VOLUME24HOUR"</code>。以下是获取单一数据的Job和示例合约。</p><h3 id="job">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;Get &gt; Uint256 - (TOML) test&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    multiply     [type=&quot;multiply&quot; input=&quot;$(parse)&quot; times=&quot;$(decode_cbor.times)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, uint256 value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(multiply) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; multiply -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract <span class="title class_">APIConsumer</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    uint256 public volume;</span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;97a63b405f35442abf8c84df1b31ed7c&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi = <span class="string">&quot;https://min-api.cryptocompare.com/data/pricemultifull?fsyms=ETH&amp;tsyms=USD&quot;</span>;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestVolume</span>(bytes32 indexed requestId, uint256 volume);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(oracleAddress);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a Chainlink request to retrieve API response, find the target</span></span><br><span class="line"><span class="comment">     * data, then multiply by 1000000000000000000 (to remove decimal places from data).</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestVolumeData</span>(<span class="params"></span>) public returns (bytes32 requestId) &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfill</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the URL to perform the GET request on</span></span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            myApi</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the path to find the desired data in the API response, where the response format is:</span></span><br><span class="line">        <span class="comment">// &#123;&quot;RAW&quot;:</span></span><br><span class="line">        <span class="comment">//   &#123;&quot;ETH&quot;:</span></span><br><span class="line">        <span class="comment">//    &#123;&quot;USD&quot;:</span></span><br><span class="line">        <span class="comment">//     &#123;</span></span><br><span class="line">        <span class="comment">//      &quot;VOLUME24HOUR&quot;: xxx.xxx,</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">//    &#125;</span></span><br><span class="line">        <span class="comment">//   &#125;</span></span><br><span class="line">        <span class="comment">//  &#125;</span></span><br><span class="line">        <span class="comment">// request.add(&quot;path&quot;, &quot;RAW.ETH.USD.VOLUME24HOUR&quot;); // Chainlink nodes prior to 1.0.0 support this format</span></span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;RAW,ETH,USD,VOLUME24HOUR&quot;</span>); <span class="comment">// Chainlink nodes 1.0.0 and later support this format</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Multiply the result by 1000000000000000000 to remove decimals</span></span><br><span class="line">        int256 timesAmount = <span class="number">10</span> ** <span class="number">18</span>;</span><br><span class="line">        req.<span class="title function_">addInt</span>(<span class="string">&quot;times&quot;</span>, timesAmount);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Sends the request</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">sendChainlinkRequest</span>(req, fee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Receive the response in the form of uint256</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfill</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        uint256 _volume</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">_requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestVolume</span>(_requestId, _volume);</span><br><span class="line">        volume = _volume;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>部署的合约地址为：0x9fAC2f4D6a039e4A0740314543B087c51f29cAE9，随后使用LinkToken合约向该合约转账0.5个LINK。</p><p>整理以上地址信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobid: 97a63b405f35442abf8c84df1b31ed7c</span><br><span class="line">APIConsumer: 0x9fAC2f4D6a039e4A0740314543B087c51f29cAE9</span><br></pre></td></tr></table></figure><p>调用<code>requestVolumeData</code>函数，请求链下API的<code>VOLUME24HOUR</code>，查看ChainlinkOperator控制台情况。</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/chainlink_single_word_response.png" class="" title="chainlink_single_word_response"><p>调用<code>Volume</code>函数即可查看返回值</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/remix_single_word_response-16814552111081.png" class="" title="remix_single_word_response"><h2 id="multi-variable-responses">Multi-Variable Responses</h2><p>这里我们申请多个数据类型为uint256的数据。废话不多说，直接放出job和合约代码</p><h3 id="job-1">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;multi-word(TOML)&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor</span></span><br><span class="line"><span class="string">    decode_cbor -&gt; btc</span></span><br><span class="line"><span class="string">    decode_cbor -&gt; usd</span></span><br><span class="line"><span class="string">    decode_cbor -&gt; eur</span></span><br><span class="line"><span class="string">    btc          [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.urlBTC)&quot; allowunrestrictednetworkaccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    btc_parse    [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.pathBTC)&quot; data=&quot;$(btc)&quot;]</span></span><br><span class="line"><span class="string">    btc_multiply [type=&quot;multiply&quot; input=&quot;$(btc_parse)&quot;, times=&quot;100000&quot;]</span></span><br><span class="line"><span class="string">    btc -&gt; btc_parse -&gt; btc_multiply</span></span><br><span class="line"><span class="string">    usd          [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.urlUSD)&quot; allowunrestrictednetworkaccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    usd_parse    [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.pathUSD)&quot; data=&quot;$(usd)&quot;]</span></span><br><span class="line"><span class="string">    usd_multiply [type=&quot;multiply&quot; input=&quot;$(usd_parse)&quot;, times=&quot;100000&quot;]</span></span><br><span class="line"><span class="string">    usd -&gt; usd_parse -&gt; usd_multiply</span></span><br><span class="line"><span class="string">    eur          [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.urlEUR)&quot; allowunrestrictednetworkaccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    eur_parse    [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.pathEUR)&quot; data=&quot;$(eur)&quot;]</span></span><br><span class="line"><span class="string">    eurs_multiply [type=&quot;multiply&quot; input=&quot;$(eur_parse)&quot;, times=&quot;100000&quot;]</span></span><br><span class="line"><span class="string">    eur -&gt; eur_parse -&gt; eurs_multiply</span></span><br><span class="line"><span class="string">    btc_multiply -&gt; encode_mwr</span></span><br><span class="line"><span class="string">    usd_multiply -&gt; encode_mwr</span></span><br><span class="line"><span class="string">    eurs_multiply -&gt; encode_mwr</span></span><br><span class="line"><span class="string">    // MWR API does NOT auto populate the requestID.</span></span><br><span class="line"><span class="string">    encode_mwr [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                abi=&quot;(bytes32 requestId, uint256 _btc, uint256 _usd, uint256 _eurs)&quot;</span></span><br><span class="line"><span class="string">                data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;_btc\\&quot;: $(btc_multiply), \\&quot;_usd\\&quot;: $(usd_multiply), \\&quot;_eurs\\&quot;: $(eurs_multiply)&#125;&quot;</span></span><br><span class="line"><span class="string">                ]</span></span><br><span class="line"><span class="string">    encode_tx  [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_mwr)&#125;&quot;</span></span><br><span class="line"><span class="string">                ]</span></span><br><span class="line"><span class="string">    submit_tx  [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string">    encode_mwr -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract-1">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract <span class="title class_">MultiWordConsumer</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// multiple params returned in a single oracle response</span></span><br><span class="line">    uint256 public btc;</span><br><span class="line">    uint256 public usd;</span><br><span class="line">    uint256 public eur;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;6073eaa7c1c14e77aef5f9fd8c96eccb&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi1 = <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=BTC&quot;</span>;</span><br><span class="line">    string myApi2 = <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=USD&quot;</span>;</span><br><span class="line">    string myApi3 = <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=EUR&quot;</span>;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestMultipleFulfilled</span>(</span><br><span class="line">        bytes32 indexed requestId,</span><br><span class="line">        uint256 btc,</span><br><span class="line">        uint256 usd,</span><br><span class="line">        uint256 eur</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Initialize the link token and target oracle</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> The oracle address must be an Operator contract for multiword response</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * Sepolia Testnet details:</span></span><br><span class="line"><span class="comment">     * Link Token: 0x779877A7B0D9E8603169DdbD7836e478b4624789</span></span><br><span class="line"><span class="comment">     * Oracle: 0x6090149792dAAeE9D1D568c9f9a6F6B46AA29eFD (Chainlink DevRel)</span></span><br><span class="line"><span class="comment">     * jobId: 53f9755920cd451a8fe46f5087468395</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(<span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Request mutiple parameters from the oracle in a single transaction</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestMultipleParameters</span>(<span class="params"></span>) public &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfillMultipleParameters</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;urlBTC&quot;</span>,</span><br><span class="line">            myApi1</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;pathBTC&quot;</span>, <span class="string">&quot;BTC&quot;</span>);</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;urlUSD&quot;</span>,</span><br><span class="line">            myApi2</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;pathUSD&quot;</span>, <span class="string">&quot;USD&quot;</span>);</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;urlEUR&quot;</span>,</span><br><span class="line">            myApi3</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;pathEUR&quot;</span>, <span class="string">&quot;EUR&quot;</span>);</span><br><span class="line">        <span class="title function_">sendChainlinkRequest</span>(req, fee); <span class="comment">// MWR API.</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Fulfillment function for multiple parameters in a single request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> This is called by the oracle. recordChainlinkFulfillment must be used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfillMultipleParameters</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 requestId,</span></span><br><span class="line"><span class="params">        uint256 btcResponse,</span></span><br><span class="line"><span class="params">        uint256 usdResponse,</span></span><br><span class="line"><span class="params">        uint256 eurResponse</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestMultipleFulfilled</span>(</span><br><span class="line">            requestId,</span><br><span class="line">            btcResponse,</span><br><span class="line">            usdResponse,</span><br><span class="line">            eurResponse</span><br><span class="line">        );</span><br><span class="line">        btc = btcResponse;</span><br><span class="line">        usd = usdResponse;</span><br><span class="line">        eur = eurResponse;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>部署得到的合约地址：0xd214Ce7721dd13F32e59c45Fee97eA26d3f2aE94</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobId: 6073eaa7c1c14e77aef5f9fd8c96eccb</span><br><span class="line">MultiWordConsumer: 0xd214Ce7721dd13F32e59c45Fee97eA26d3f2aE94</span><br></pre></td></tr></table></figure><p>转LINK，调用函数，查看Chainlink Operator控制台</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/chainlink_multi_variables_responses.png" class="" title="chainlink_multi_variables_responses"><p>)</p><p>Remix</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/remix_multi_variables_responses.png" class="" title="remix_multi_variables_responses"><h2 id="array-response">Array Response</h2><p>针对JSON数据源是数组的情况，本例在添加path路径时指定了JSON路径。比如：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;0,id&quot;</span>); <span class="comment">// Chainlink nodes 1.0.0 and later support this format</span></span><br></pre></td></tr></table></figure><p>这次我们请求string类型的数据。</p><h3 id="job-2">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES HARDCODED VALUES FOR CLARITY.</span></span><br><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"># DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;Get &gt; String&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, string value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(parse) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract-2">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract <span class="title class_">FetchFromArray</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    string public id;</span><br><span class="line"></span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestFirstId</span>(bytes32 indexed requestId, string id);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;fdef9cbf8826404fa94d9e114ef28fb4&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi = <span class="string">&quot;https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&amp;per_page=10&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(oracleAddress);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a Chainlink request to retrieve API response, find the target</span></span><br><span class="line"><span class="comment">     * data which is located in a list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestFirstId</span>(<span class="params"></span>) public returns (bytes32 requestId) &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfill</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the URL to perform the GET request on</span></span><br><span class="line">        <span class="comment">// API docs: https://www.coingecko.com/en/api/documentation?</span></span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            myApi</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the path to find the desired data in the API response, where the response format is:</span></span><br><span class="line">        <span class="comment">// [&#123;</span></span><br><span class="line">        <span class="comment">//  &quot;id&quot;: &quot;bitcoin&quot;,</span></span><br><span class="line">        <span class="comment">//  &quot;symbol&quot;: btc&quot;,</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">//&#123;</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// .. &#125;]</span></span><br><span class="line">        <span class="comment">// request.add(&quot;path&quot;, &quot;0.id&quot;); // Chainlink nodes prior to 1.0.0 support this format</span></span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;0,id&quot;</span>); <span class="comment">// Chainlink nodes 1.0.0 and later support this format</span></span><br><span class="line">        <span class="comment">// Sends the request</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">sendChainlinkRequest</span>(req, fee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Receive the response in the form of string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfill</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        string memory _id</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">_requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestFirstId</span>(_requestId, _id);</span><br><span class="line">        id = _id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>整理地址信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobId: fdef9cbf8826404fa94d9e114ef28fb4</span><br><span class="line">FetchFromArray: 0x938F9cAdf3de9b36921E223dde4Ba3E3Cb535867</span><br></pre></td></tr></table></figure><p>调用函数，结果发现job的fetch处报<code>http request timed out or interrupted</code>，于是我点进了API链接，结果居然无法访问？</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/error_chainlink.png" class="" title="error_chainlink"><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/error_web.png" class="" title="error_web"><p>那没事了，我们可以试着换成另一个API让Chainlink预言机获取。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">newAPI: https://min-api.cryptocompare.com/data/pricemultifull?fsyms=ETH&amp;tsyms=USD</span><br><span class="line">path: &#x27;RAW,ETH,USD,LASTTRADEID&#x27;</span><br><span class="line">FetchFromArray: 0x27E14F41A461E9861e0948B702bDaaBC2121E1d5</span><br></pre></td></tr></table></figure><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/chainlink_fetch_string.png" class="" title="chainlink_fetch_string"><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/remix_fetch_string.png" class="" title="remix_fetch_string"><p>很难不怀疑这是API自身的问题......不过在后期我们还能用php手写一个API，这里我们不做演示。</p><h2 id="large-responses">Large Responses</h2><p>这里我们可以获取任意字节长度的数据，数据类型为Bytes。同理，根据上面的方法照样能得到我们想要的结果。这里不作演示。</p><h3 id="job-3">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES HARDCODED VALUES FOR CLARITY.</span></span><br><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"># DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;Get &gt; String&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, string value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(parse) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract-3">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract <span class="title class_">GenericLargeResponse</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// variable bytes(arbitrary-length raw byte data) returned in a single oracle response</span></span><br><span class="line">    bytes public data;</span><br><span class="line">    string public image_url;</span><br><span class="line"></span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;fdef9cbf8826404fa94d9e114ef28fb4&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi = <span class="string">&quot;https://ipfs.io/ipfs/QmZgsvrA1o1C8BGCrx6mHTqR1Ui1XqbCrtbMVrRLHtuPVD?filename=big-api-response.json&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(oracleAddress);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Request variable bytes from the oracle</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestBytes</span>(<span class="params"></span>) public &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfillBytes</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            myApi</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;image&quot;</span>);</span><br><span class="line">        <span class="title function_">sendChainlinkRequest</span>(req, fee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestFulfilled</span>(bytes32 indexed requestId, bytes indexed data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Fulfillment function for variable bytes</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> This is called by the oracle. recordChainlinkFulfillment must be used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfillBytes</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 requestId,</span></span><br><span class="line"><span class="params">        bytes memory bytesData</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestFulfilled</span>(requestId, bytesData);</span><br><span class="line">        data = bytesData;</span><br><span class="line">        image_url = <span class="title function_">string</span>(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结">总结</h2><p>根据Chainlink官方提供的获取多种数据类型的方法，我们能够通过任意的API从链上获取到我们想要的数据，并将他们运用到我们的合约逻辑中，实现数据的链上链下协同。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【算法】递归与递推</title>
      <link href="/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E9%80%92%E5%BD%92%E4%B8%8E%E9%80%92%E6%8E%A8/"/>
      <url>/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E9%80%92%E5%BD%92%E4%B8%8E%E9%80%92%E6%8E%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="递推与递归">递推与递归</h2><h3 id="递归实现指数型枚举">递归实现指数型枚举</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/94/">92.递归实现指数型枚举 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">16</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> st[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (u &gt; n) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (st[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    st[u] = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(u + <span class="number">1</span>);</span><br><span class="line">    st[u] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    st[u] = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(u + <span class="number">1</span>);</span><br><span class="line">    st[u] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="递归实现排列型枚举">递归实现排列型枚举</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/96/">94.递归实现排列型枚举 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 01:37:12</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> state[N];</span><br><span class="line"><span class="type">bool</span> used[N]; <span class="comment">// true表示用过 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (u &gt; n) &#123; <span class="comment">// 边界 </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, state[i]); <span class="comment">// 打印方案 </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;           </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 依次枚举每个分支，即当前位置可以填哪些数 </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!used[i]) &#123;</span><br><span class="line">            state[u] = i;</span><br><span class="line">            used[i] = <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">dfs</span> (u + <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 恢复现场</span></span><br><span class="line">            state[u] = <span class="number">0</span>;</span><br><span class="line">            used[i] = <span class="literal">false</span>; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="翻硬币">翻硬币</h3><p>原题链接：<ahref="https://www.acwing.com/problem/content/1210/">1208. 翻硬币 -AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">101</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">char</span> start[N], aim[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">turn</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (start[i] == <span class="string">&#x27;*&#x27;</span>) start[i] = <span class="string">&#x27;o&#x27;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (start[i] == <span class="string">&#x27;o&#x27;</span>) start[i] = <span class="string">&#x27;*&#x27;</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; start &gt;&gt; aim;</span><br><span class="line">    n = <span class="built_in">strlen</span>(start);</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (start[i] != aim[i]) &#123;</span><br><span class="line">            <span class="built_in">turn</span>(i), <span class="built_in">turn</span>(i + <span class="number">1</span>);</span><br><span class="line">            res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开关只按一次</span></span><br><span class="line"><span class="comment">// 顺序无关紧要 </span></span><br></pre></td></tr></table></figure><h3 id="飞行员兄弟">飞行员兄弟</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/118/">116.飞行员兄弟 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1. 枚举所有方案  0 ~ 2^16 - 1 每一个数看作一个16位的二进制数 </span></span><br><span class="line"><span class="comment">2. 按照该方案对所有灯泡进行操作</span></span><br><span class="line"><span class="comment">3. 判断灯泡是否全亮 =&gt; 记录方案 </span></span><br><span class="line"><span class="comment">O(n) = 2^16 * (16 * 7 + 16 + 16)</span></span><br><span class="line"><span class="comment">（1）步数最小 -- 记录</span></span><br><span class="line"><span class="comment">（2）字典序最小 -- 优先枚举标号小的，所得到的答案就是字典序最小的 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">0  1  2  3 </span></span><br><span class="line"><span class="comment">4  5  6  7</span></span><br><span class="line"><span class="comment">8  9  10 11</span></span><br><span class="line"><span class="comment">12 13 14 15 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> g[N][N], backup[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> x * <span class="number">4</span> + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">turn_one</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (g[x][y] == <span class="string">&#x27;+&#x27;</span>) g[x][y] = <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line"><span class="keyword">else</span> g[x][y] = <span class="string">&#x27;+&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">turn_all</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line"><span class="built_in">turn_one</span>(x, i);</span><br><span class="line"><span class="built_in">turn_one</span>(i, y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">turn_one</span>(x, y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">cin &gt;&gt; g[i];</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;PII&gt; res;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> op = <span class="number">0</span>; op &lt; <span class="number">1</span> &lt;&lt; <span class="number">16</span>; op++) &#123;</span><br><span class="line">vector&lt;PII&gt; temp; <span class="comment">// 用于记录步骤 </span></span><br><span class="line"><span class="built_in">memcpy</span>(backup, g, <span class="built_in">sizeof</span>(g)); <span class="comment">// 备份 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 进行操作 </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line"><span class="comment">// 判断在op的二进制表示中，get(i,j)位的数是否为1 </span></span><br><span class="line"><span class="keyword">if</span> (op &gt;&gt; <span class="built_in">get</span>(i, j) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">temp.<span class="built_in">push_back</span>(&#123;i, j&#125;);</span><br><span class="line"><span class="built_in">turn_all</span>(i, j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断所有灯泡是否全亮</span></span><br><span class="line"><span class="type">bool</span> has_closed = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line"><span class="keyword">if</span> (g[i][j] == <span class="string">&#x27;+&#x27;</span>) &#123;</span><br><span class="line">has_closed = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span> (has_closed == <span class="literal">false</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (res.<span class="built_in">empty</span>() || res.<span class="built_in">size</span>() &gt; temp.<span class="built_in">size</span>()) &#123;</span><br><span class="line">res = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">memcpy</span>(g, backup, <span class="built_in">sizeof</span>(g)); <span class="comment">// 还原</span></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; res.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> op : res) &#123;</span><br><span class="line">cout &lt;&lt; op.x + <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; op.y + <span class="number">1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【算法】二分与前缀和</title>
      <link href="/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E4%BA%8C%E5%88%86%E4%B8%8E%E5%89%8D%E7%BC%80%E5%92%8C/"/>
      <url>/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E4%BA%8C%E5%88%86%E4%B8%8E%E5%89%8D%E7%BC%80%E5%92%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="整数二分">整数二分</h2><ol type="1"><li>确定一个区间，使得我们找的目标值一定在这个区间里</li><li>找一个性质，满足：<ol type="1"><li>性质具有二段性（前半段满足，后半段不满足）</li><li>答案是二段性的分界点</li></ol></li></ol><p>答案有两种：一种是前半段的右端点，一种是后半段的左端点</p><ul><li><strong>第一类：答案是前半段的右端点</strong></li></ul><p>将(L, R)分成(L, M - 1)和(M, R)</p><p>if M是红色的，说明ans必然在(M, R)</p><p>else 说明ans必然在(L, M - 1)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (L &lt; R) &#123;</span><br><span class="line"><span class="type">int</span> M = (L + R + <span class="number">1</span>) / <span class="number">2</span>; <span class="comment">// 一定要补上1，实际上计算的是ceil(L + R / 2)</span></span><br><span class="line"><span class="keyword">if</span> M红 L = M;</span><br><span class="line"><span class="keyword">else</span> R = M - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>第二类：答案是后半段的左端点</strong></li></ul><p>将(L, R)分成(L, M)和(M + 1, R)</p><p>if M是绿色的，说明ans必然实在M的左边（L, M）</p><p>else 说明ans必然在(M + 1, R)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (L &lt; R) &#123;</span><br><span class="line"><span class="type">int</span> M = (L + R) / <span class="number">2</span>; <span class="comment">// 这里没有加1</span></span><br><span class="line"><span class="keyword">if</span> M绿 R = M;</span><br><span class="line"><span class="keyword">else</span> L = M + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>看L=M和R=M</p><p>整数二分步骤：</p><ol type="1"><li>找一个区间[L, R]，使得答案一定在该区间中</li><li>找一个判断条件，使得该判断条件具有二段性，并且答案一定是该二段性的分界点</li><li>分析中点M在该判断条件下是否成立，如果成立，考虑答案在哪个区间；如果不成立，判断答案在哪个区间</li><li>如果更新方式写的是R = mid，则不用做任何处理；如果更新方式写的是L =mid，则需要在计算mid时加1</li></ol><h2 id="实数二分">实数二分</h2><p>将区间(L,R)划分成[L, M]和[M, R]</p><p>区间长度足够小的时侯停止 while (R - L &gt; 1e-6)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (R - L &gt; <span class="number">1e-6</span>) &#123;</span><br><span class="line"><span class="type">double</span> M = (L + R) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> ans在[M, R] L = M;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ans在[L, m] R = M;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意：有单调性一定可以二分，能二分的不一定单调</strong></p><h3 id="数的范围">数的范围</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/791/">789.数的范围 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 左端点：一定是大于等于x的第一个位置</span></span><br><span class="line"><span class="comment"> 判断条件：q[mid] &gt;= x</span></span><br><span class="line"><span class="comment"> 如果答案存在，这个答案一定是一段x的左端点</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> 如果 q[R] != x 说明答案不存在</span></span><br><span class="line"><span class="comment"> 否则说明L和R就是x的左端点 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 右端点：从[左边界, n-1] 从右往左小于等于x的第一个位置 </span></span><br><span class="line"><span class="comment"> 判断条件：q[mix] &lt;= x </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 读入每个询问 </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line"><span class="type">int</span> x;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line"><span class="type">int</span> l = <span class="number">0</span>, r = n - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line"><span class="type">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (q[mid] &gt;= x) &#123;</span><br><span class="line">r = mid;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">l = mid + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span> (q[r] == x) &#123;</span><br><span class="line"><span class="comment">// 说明存在左端点</span></span><br><span class="line">cout &lt;&lt; r &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="comment">// 二分x的右端点 </span></span><br><span class="line">r = n - <span class="number">1</span>; <span class="comment">// 右端点一定在[左端点，n-1]之间 </span></span><br><span class="line"><span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line"><span class="type">int</span> mid = l + r + <span class="number">1</span> &gt;&gt; <span class="number">1</span>; <span class="comment">// 因为写的时l=mid，所以需要补上1 </span></span><br><span class="line"><span class="keyword">if</span> (q[mid] &lt;= x) &#123;</span><br><span class="line">l = mid;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">r = mid - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">cout &lt;&lt; l &lt;&lt; endl; <span class="comment">// 最后l和r必然是相等的 </span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;-1 -1&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="数的三次方根">数的三次方根</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/792/">790.数的三次方根 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">if (m * m * m &gt;= x) R = M;</span></span><br><span class="line"><span class="comment">else L = M; </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">double</span> x;</span><br><span class="line">cin &gt;&gt; x;</span><br><span class="line"><span class="type">double</span> l = <span class="number">-10000</span>, r = <span class="number">10000</span>;</span><br><span class="line"><span class="keyword">while</span> (r - l &gt; <span class="number">1e-8</span>) &#123;</span><br><span class="line"><span class="type">double</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> (mid * mid * mid &gt;= x) &#123;</span><br><span class="line">r = mid;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">l = mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.6lf\n&quot;</span>, l);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="三分法">三分法</h3><p>一般是单峰函数或者单谷函数。求导，对导数进行二分。</p><h2 id="前缀和">前缀和</h2><p>待续...</p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】使用Chainlink预言机获取链下数据</title>
      <link href="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/"/>
      <url>/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在上一篇博客的基础上，本文将详细介绍Chainlink获取链下数据的方法。</p><p>本文需要在Remix上部署三个智能合约，分别是LinkToken.sol、Operator.sol和ATestnetConsumer.sol。而LinkToken合约的部署流程已在上文详细给出，这里我写一下跳转链接：<ahref="https://keikei99.github.io/2023/03/17/%5BChainlink%5D基于私链运行一个Chainlink预言机节点/">【Chainlink】基于私链运行一个Chainlink预言机节点| Keike1 (keikei99.github.io)</a>。</p><p>区块链上的用户作为数据获取方，需要从链下的数据提供方获取数据，而区块链本身不具备获取现实世界数据的能力，因此需要使用Chainlink预言机作为连接链上和链下之间的桥梁。下面我们将模拟用户获取数据的这个过程。</p><h2 id="部署operator.sol合约">部署Operator.sol合约</h2><p><ahref="https://remix.ethereum.org/#url=https://docs.chain.link/samples/ChainlinkNodes/Operator.sol">Operator.sol</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.7</span><span class="number">.6</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.7/Operator.sol&quot;</span>;</span><br></pre></td></tr></table></figure><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/deploy_operator.png" class="" title="deploy_operator"><p>部署完要记得把合约地址记录下来</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Operator: 0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span><br></pre></td></tr></table></figure><p>随后调用setAuthorizedSenders方法，填自己的账户地址，注意要以数组形式传递。如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&quot;0x0688AbDa371A869DcBb56d2E946A6898660ECDef&quot;]</span><br></pre></td></tr></table></figure><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/set_senders.png" class="" title="set_senders"><p>可以用<code>isAuthorizedSender</code>来判断是否设置成功</p><figure><imgsrc="https://docs.chain.link/images/chainlink-nodes/node-operators/operator-isauthorizedsender.jpg"alt="A screenshot showing Chainlink node whitelisted in Remix." /><figcaption aria-hidden="true">A screenshot showing Chainlink nodewhitelisted in Remix.</figcaption></figure><h2 id="在chainlink-operator中创建新的job">在ChainlinkOperator中创建新的Job</h2><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/new_job.png" class="" title="new_job"><p>写入以下内容</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES HARDCODED VALUES FOR CLARITY.</span></span><br><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"># DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;test&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="comment"># Optional External Job ID: Automatically generated if unspecified</span></span><br><span class="line"><span class="comment"># externalJobID = &quot;b1d42cd5-4a3a-4200-b1f7-25a68e48aad8&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;YOUR_OPERATOR_CONTRACT_ADDRESS&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    multiply     [type=&quot;multiply&quot; input=&quot;$(parse)&quot; times=&quot;$(decode_cbor.times)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, uint256 value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(multiply) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;YOUR_OPERATOR_CONTRACT_ADDRESS&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; multiply -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>注意将以上的<strong>两个</strong><code>YOUR_OPERATOR_CONTRACT_ADDRESS</code>改为你的Operator合约地址。</p><p>随后复制系统给出的<code>externalJobId</code>备用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JobId: e22cd821-ecb1-405f-9525-d273acc8d66e</span><br></pre></td></tr></table></figure><h2 id="部署atestnetconsumer合约">部署ATestnetConsumer合约</h2><p><ahref="https://remix.ethereum.org/#url=https://docs.chain.link/samples/APIRequests/ATestnetConsumer.sol">ATestnetConsumer.sol</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * THIS IS AN EXAMPLE CONTRACT THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"> * DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">contract <span class="title class_">ATestnetConsumer</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    uint256 private constant <span class="variable constant_">ORACLE_PAYMENT</span> = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0.1 * 10**18</span></span><br><span class="line">    uint256 public currentPrice;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestEthereumPriceFulfilled</span>(</span><br><span class="line">        bytes32 indexed requestId,</span><br><span class="line">        uint256 indexed price</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  Sepolia</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@dev</span> LINK address in Sepolia network: 0x779877A7B0D9E8603169DdbD7836e478b4624789</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> Check https://docs.chain.link/docs/link-token-contracts/ for LINK address for the right network</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(<span class="number">0x779877A7B0D9E8603169DdbD7836e478b4624789</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestEthereumPrice</span>(<span class="params"></span></span><br><span class="line"><span class="params">        address _oracle,</span></span><br><span class="line"><span class="params">        string memory _jobId</span></span><br><span class="line"><span class="params">    </span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            <span class="title function_">stringToBytes32</span>(_jobId),</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfillEthereumPrice</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=USD&quot;</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;USD&quot;</span>);</span><br><span class="line">        req.<span class="title function_">addInt</span>(<span class="string">&quot;times&quot;</span>, <span class="number">100</span>);</span><br><span class="line">        <span class="title function_">sendChainlinkRequestTo</span>(_oracle, req, <span class="variable constant_">ORACLE_PAYMENT</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfillEthereumPrice</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        uint256 _price</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">_requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestEthereumPriceFulfilled</span>(_requestId, _price);</span><br><span class="line">        currentPrice = _price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getChainlinkToken</span>(<span class="params"></span>) public view returns (address) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">chainlinkTokenAddress</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">cancelRequest</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        uint256 _payment,</span></span><br><span class="line"><span class="params">        bytes4 _callbackFunctionId,</span></span><br><span class="line"><span class="params">        uint256 _expiration</span></span><br><span class="line"><span class="params">    </span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title function_">cancelChainlinkRequest</span>(</span><br><span class="line">            _requestId,</span><br><span class="line">            _payment,</span><br><span class="line">            _callbackFunctionId,</span><br><span class="line">            _expiration</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">stringToBytes32</span>(<span class="params"></span></span><br><span class="line"><span class="params">        string memory source</span></span><br><span class="line"><span class="params">    </span>) private pure returns (bytes32 result) &#123;</span><br><span class="line">        bytes memory tempEmptyStringTest = <span class="title function_">bytes</span>(source);</span><br><span class="line">        <span class="keyword">if</span> (tempEmptyStringTest.<span class="property">length</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0x0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        assembly &#123;</span><br><span class="line">            <span class="comment">// solhint-disable-line no-inline-assembly</span></span><br><span class="line">            result := <span class="title function_">mload</span>(<span class="title function_">add</span>(source, <span class="number">32</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>这里注意将第29行的setChainlinkToken的参数改为之前部署的LinkToken合约地址</strong></p><h2 id="在metamask中导入link代币">在Metamask中导入LINK代币</h2><p>私有链中可以有多种代币，这里我们使用Metamask去管理我们的账户余额以方便我们在Remix部署合约。</p><p>打开Metamask，点击Assets，点击Import tokens</p><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/import_tokens.png" class="" title="import_tokens"><p>然后填入你的LinkToken合约地址和它的代币符号LINK就行。</p><h2id="利用linktoken合约向atestnetconsumer合约转账">利用LinkToken合约向ATestnetConsumer合约转账</h2><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/transfer.png" class="" title="transfer"><p>这里我转入了1个LINK，根据实际需要转就可以了。转账以后，去原来部署的ATestnetConsumer合约中调用<code>requestEthereumPrice</code>方法。</p><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/request_data.png" class="" title="request_data"><p>_oracle填入Operator合约地址，_jobId填入刚刚在控制台得到的JobId。</p><p><u><strong>JobId要去掉中间的横线！！！</strong></u></p><p><u><strong>JobId要去掉中间的横线！！！</strong></u></p><p><u><strong>JobId要去掉中间的横线！！！</strong></u></p><p>最后点击currentPrice，ETH/USD的汇率就出现了。</p><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/current_price.png" class="" title="current_price"><p>至此，我们实现了在区块链中获取链下的价格数据。在实际的开发中，可以将这种单一的数据拓展为特定的业务数据，以实现区块链与预言机在特定领域的应用。</p><p><ahref="https://zhuanlan.zhihu.com/p/373828717">基本请求模型--单预言机工作模式- 知乎 (zhihu.com)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Rust】所有权Ownership</title>
      <link href="/2023/03/20/%E3%80%90Rust%E3%80%91%E6%89%80%E6%9C%89%E6%9D%83Ownership/"/>
      <url>/2023/03/20/%E3%80%90Rust%E3%80%91%E6%89%80%E6%9C%89%E6%9D%83Ownership/</url>
      
        <content type="html"><![CDATA[<h2 id="所有权">所有权</h2><p>核心内容：</p><ol type="1"><li>Rust中的每一个值都有一个<strong>所有者</strong>（<em>owner</em>）。</li><li>值在任一时刻有且只有一个所有者。</li><li>当所有者（变量）离开作用域，这个值将被丢弃。</li></ol><p>变量有变量名和对应的内存分配空间。Rust中的所有权定义<strong>该变量与变量名和对应的存储空间相绑定</strong>，在作用域结束时拥有所有权的变量的存储空间会被释放，而没有所有权的变量则忽略释放空间的操作。</p><p>Rust编译器会隐式调用Copy函数和Clone函数。Copy即复制一份完全一样的变量，而不会转移将原有变量的所有权，举例如下：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">n1</span>: <span class="type">u32</span> = <span class="number">114514</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">n2</span> = n1;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;n1 = &#123;&#125; and n2 = &#123;&#125;&quot;</span>, n1, n2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n1 = 114514 and n2 = 114514</span><br></pre></td></tr></table></figure><p>上例的u32类型没有发生所有权转移，而对于String类型的数据，会发生所有权转移的情况。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Blockchain is so interesting&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s2</span> = s1;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;s1 = &#123;&#125; ans s2 = &#123;&#125;&quot;</span>, s1, s2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译错误：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">keikei@LAPTOP-VME6S439:~/rust_study/ownership$ cargo run</span><br><span class="line">   Compiling ownership v0.1.0 (/home/keikei/rust_study/ownership)</span><br><span class="line">error: 2 positional arguments in format string, but no arguments were given</span><br><span class="line">  --&gt; src/main.rs:57:20</span><br><span class="line">   |</span><br><span class="line">57 |     println!(&quot;s1 = &#123;&#125; ans s2 = &#123;&#125;&quot;);</span><br><span class="line">   |                    ^^          ^^</span><br><span class="line"></span><br><span class="line">error: could not compile `ownership` (bin &quot;ownership&quot;) due to previous error</span><br><span class="line">keikei@LAPTOP-VME6S439:~/rust_study/ownership$ cargo run</span><br><span class="line">   Compiling ownership v0.1.0 (/home/keikei/rust_study/ownership)</span><br><span class="line">error[E0382]: borrow of moved value: `s1`</span><br><span class="line">  --&gt; src/main.rs:57:37</span><br><span class="line">   |</span><br><span class="line">55 |     let s1 = String::from(&quot;Blockchain is so interesting&quot;);</span><br><span class="line">   |         -- move occurs because `s1` has type `String`, which does not implement the `Copy` trait</span><br><span class="line">56 |     let s2 = s1;</span><br><span class="line">   |              -- value moved here</span><br><span class="line">57 |     println!(&quot;s1 = &#123;&#125; ans s2 = &#123;&#125;&quot;, s1, s2);</span><br><span class="line">   |                                     ^^ value borrowed here after move</span><br><span class="line">   |</span><br><span class="line">   = note: this error originates in the macro `$crate::format_args_nl` which comes from the expansion of the macro `println` (in Nightly builds, run with -Z macro-backtrace for more info)</span><br><span class="line">help: consider cloning the value if the performance cost is acceptable</span><br><span class="line">   |</span><br><span class="line">56 |     let s2 = s1.clone();</span><br><span class="line">   |                ++++++++</span><br><span class="line"></span><br><span class="line">For more information about this error, try `rustc --explain E0382`.</span><br><span class="line">error: could not compile `ownership` (bin &quot;ownership&quot;) due to previous error</span><br></pre></td></tr></table></figure><p>如果把<code>let s2 = s1;</code>改为<code>let s2 = s1.clone();</code>，编译能够通过。说明我们在对复杂数据类型进行操作时需要显式的调用<code>clone</code>函数。</p><p>官方文档的说法：</p><p>任何一组简单标量值的组合都可以实现<code>Copy</code>，任何不需要分配内存或某种形式资源的类型都可以实现<code>Copy</code> 。如下是一些 <code>Copy</code> 的类型：</p><ul><li>所有整数类型，比如 <code>u32</code>。</li><li>布尔类型，<code>bool</code>，它的值是 <code>true</code> 和<code>false</code>。</li><li>所有浮点数类型，比如 <code>f64</code>。</li><li>字符类型，<code>char</code>。</li><li>元组，当且仅当其包含的类型也都实现 <code>Copy</code>的时候。比如，<code>(i32, i32)</code> 实现了 <code>Copy</code>，但<code>(i32, String)</code> 就没有。</li></ul><h2 id="引用和借用">引用和借用</h2><p>&amp;的出现能允许你使用值但不获取所有权，多在函数传参时使用。如果这个参数的值需要改变，那还必须指定&amp;mut，说明该参数是原变量的可变引用。同理，可变引用不具有所有权。</p><p>可变引用只能引用一次，因为可变引用归根结底是指向同一份内存空间。假设存在两个可变引用<code>&amp;mut a</code>和<code>&amp;mut b</code>都指向1这个值，如果a被修改为2了，那b的值到底是1还是2呢？所以Rust会拒绝这样的操作以防止数据竞争。</p><p>Rust只允许有一个可变引用或者多个不可变引用，可变引用和不可变引用不能同时存在。</p><p>一个引用的作用域从声明的地方开始一直持续到最后一次使用为止。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r1</span> = &amp;s; <span class="comment">// 没问题</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r2</span> = &amp;s; <span class="comment">// 没问题</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; and &#123;&#125;&quot;</span>, r1, r2);</span><br><span class="line">    <span class="comment">// 此位置之后 r1 和 r2 不再使用</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r3</span> = &amp;<span class="keyword">mut</span> s; <span class="comment">// 没问题</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, r3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello and hello</span><br><span class="line">hello</span><br></pre></td></tr></table></figure><h2 id="slice类型">Slice类型</h2><p>RustSlice（切片）是对数据值的部分引用，比如<code>&amp;s[0..i]</code>可以指定引用起始索引为0，长度为i的字符串</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fn first_word(s: &amp;String) -&gt; usize</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">first_word</span>(s: &amp;<span class="type">String</span>) <span class="punctuation">-&gt;</span> &amp;<span class="type">str</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">bytes</span> = s.<span class="title function_ invoke__">as_bytes</span>();</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">for</span> (i, &amp;item) <span class="keyword">in</span> bytes.<span class="title function_ invoke__">iter</span>().<span class="title function_ invoke__">enumerate</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> item == <span class="string">b&#x27; &#x27;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &amp;s[<span class="number">0</span>..i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &amp;s[..];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】Chainlink相关</title>
      <link href="/2023/03/19/%E3%80%90Chainlink%E3%80%91Chainlink%E7%9B%B8%E5%85%B3/"/>
      <url>/2023/03/19/%E3%80%90Chainlink%E3%80%91Chainlink%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<h2 id="白皮书速览">白皮书速览</h2><p>Chainlink白皮书地址：<ahref="https://research.chain.link/whitepaper-v2.pdf?_ga=2.203170515.376502038.1679147678-150248235.1677582268">whitepaper-v2.pdf(chain.link)</a></p><p>摘自<ahref="https://zhuanlan.zhihu.com/p/415515492">一文速览Chainlink2.0白皮书 - 知乎 (zhihu.com)</a></p><p>Chainlink2.0是在原版白皮书的基础上做的进一步扩展，<u>其愿景是为智能合约快速可靠地接入任何链下数据源和链下计算资源，并同时保障隐私，补充并增强已有和新增区块链的性能。</u>（<strong><em>为区块链接入链下数据，是链上和链下的桥梁</em></strong>）从愿景中不难发现，Chainlink服务的是现存及潜在所有区块链的智能合约，不仅为他们提供链下数据，还提供链下计算，完全满足智能合约的任意链下需求。</p><p>为实现这一愿景，Chainlink 2.0提出去中心化预言机网络（DON）的概念，DON是由一组Chainlink节点负责维护的网络，节点基于委员会的共识协议，可灵活选择并部署任何预言机功能。<u>DON的提出将原本功能性的预言机拓宽为预言机集群，实现预言机拓扑结构由点状到网状的演进。</u>（<strong><em>Chainlink本身是一种特殊的分布式节点集群，一定程度上避免了传统预言机存在被单点攻击的风险</em></strong>）DON的最大优势是可以快速启动新的区块链服务，无需为每个区块链或者每种服务开发新的专用网络。这样一来，无论新的应用场景如何变化，DON都能迅速响应，及时接入。</p><p>DON由可执行程序和适配器组成，其中可执行程序是确定性的程序，而适配器是DON与外界交互的接口。可执行程序类似智能合约，可执行特定计算，如生成随机数，触发链上合约自动执行等。适配器类似接口转换器，使得DON可以与区块链、Web服务器、存储服务器以及其他DON连接。</p><p>Chainlink2.0白皮书中还列举DON的5个实际用例，分别是：储备金证明，<u>接入企业/传统系统</u>，去中心化身份，优先通道及保障DeFi隐私的Mixicles。</p><p>储备金证明常用于不同区块链之间的消息验证，如用户在比特币链锁仓BTC后在以太坊上发行WBTC，这时候以太坊应用就需要验证比特币链上确实锁仓足额BTC。使用储备金证明，DON可以获取比特币链上的储备信息，并反馈给以太坊应用，确保WBTC的发行背书。<u>由于DON的连接特性，企业无需进行额外开发就能将传统系统数据发送至区块链，大大方便接入企业的传统系统</u>。去中心化身份是指通过区块链建立用户的身份信息，信息可以来自传统系统如银行系统等的信用数据，通过DON将这类隐私数据提供给智能合约使用，能够实现低抵押借贷、KYC等区块链应用。优先通道是矿工为用户提供的一种保证，保证用户的交易将在某个区块存储到链上，可以用DON轻松实现。Mixicles是由ChainlinkLabs提出的隐私保护DeFi工具，可保证在不披露底层资产信息的前提下进行二元期权交易。</p><p>Chainlink2.0白皮书单独介绍DON的公允排序服务（FSS）。公允排序包括两方面：一是排序按照节点接收交易的时间先后进行；二是保存交易之间的因果关系。所谓因果关系，是指隐藏交易数据，等到共识层完成排序后再披露交易顺序，以达到防止改变交易之间的因果关系。由此可知，公允排序服务可以有效消除抢跑交易。</p><p>Chainlink2.0白皮书提到DON采用的交易执行框架（TEF）。TEF具有<u>高性能、低费用、隐私保护等优点</u>，支持任意L2执行技术和范式，可以快速更新主网智能合约，同时保留主网的关键可信度。</p><p>去中心化也是Chainlink2.0白皮书重点关注的内容，并根据数据经由数据源到DON再到主网智能合约的流向逐一讨论去中心化方案。针对数据源，设计数据源认证机制，保证数据确实由可信数据源未经篡改提供；针对DON，设计成熟客户端，防止客户端出现故障，支持少数派报告；针对主网智能合约，建立监控和失效安全机制，实行信任最小化治理，为DON节点建立链上身份等。</p><p>建立去中心化信任模型的一个关键措施是设计合理的经济激励机制，Chainlink2.0白皮书分别<u>采用显性和隐性经济激励机制</u>（<strong><em>使作恶成本远高于作恶收益，实现链上不可信环境的可信治理</em></strong>）。显性经济激励为权益质押，Chainlink节点质押一定数量的LINK通证参与DON。Chainlink的权益质押与区块链上的权益质押有很大不同，一方面权益质押主要用来验证链下数据的真实有效性，而非达成区块链底层共识；另一方面，Chainlink的权益质押主要用于防止节点受贿发送欺诈数据，为此Chainlink提出超线性权益质押，即<u>攻击者需要提供远超节点质押的保证金，才能够有效攻击</u>。而隐性激励指未来收益机会，即只有服务质量高、声誉好的节点才能吸引潜在用户，获得未来收益机会。</p><p>Chainlink2.0白皮书将使用链下资源的智能合约称之为混合型智能合约，单单在链上运行的智能合约受限于链上资源的有限、昂贵和缓慢等制约仅能提供部分功能，而结合DON的混合型智能合约理论上可以获取链下无限的资源，并将高昂的链上计算成本转移到低廉的链下，因而可以提供完备的功能，同时继承智能合约去中心化、无需许可等优点。混合型智能合约优势之一在于让人清楚地了解该智能合约包含链下组件，并把链下组件作为智能合约的组成部分而不再是分割的两个领域。</p><p>Chainlink2.0白皮书以DON为基础，混合型智能合约为载体，向我们描绘未来预言机蓝图。欲要了解更多Chainlink2.0设计、实现细节，敬请关注即将发布的Chainlink 2.0中文版白皮书！</p><h3 id="chainlink的设计机制">Chainlink的设计机制</h3><p>Chainlink 的理想是做一个去中心化的预言机。</p><p>根据白皮书的介绍，Chainlink 通过使用 API将链上和链外联系起来。它通过获取链上资源（如以太坊、比特币和 Hyperledger等区块链），并通过 API将其连接到链下资源（如市场数据、银行支付、零售支付、后端系统、事件数据等）来实现链下数据与链上智能合约的交互。</p><figure><imgsrc="https://pic1.zhimg.com/80/v2-8295c870b7319a6e56044d07e9b0dd94_1440w.webp"alt="img" /><figcaption aria-hidden="true">img</figcaption></figure><p><ahref="https://zhuanlan.zhihu.com/p/113875183">Chainlink的理想与现实 -知乎 (zhihu.com)</a></p><p>每个参与智能合约的预言机都会搜集相关数据（如市场数据），将数据发送至网络中的其他预言机，按照指示将所有数据聚合至单一数据点，并经由统一的预言机一次性发送至链上的智能合约。</p><p>链下预言机治理其实也存在一个不可能三角问题，如何在确保链下数据客观、严谨的基础上，又能保证和链上世界接轨的处理效率，最主要的是，链下预言机的“管理者‘本身是安全、可信的。总之，链上区块链运转模型和链下预言机治理就像一个双星系统，二者互相影响又互相依赖。</p><p><ahref="https://blog.csdn.net/llslinliansheng/article/details/128057631">(56条消息)Chainlink——白皮书简析(whitepaperv2)_llsforest_llsForest的博客-CSDN博客</a></p><img src="/2023/03/19/%E3%80%90Chainlink%E3%80%91Chainlink%E7%9B%B8%E5%85%B3/attack.png" class="" title="attack"><p>数据是如何实现上链的：<ahref="https://blog.csdn.net/heyuekeji/article/details/107023324">(56条消息)深入浅出：一条数据是如何完成上链的_荷月科技的博客-CSDN博客</a></p><p>对哈希进行签名还可将发送者的身份和信息绑定，同时也可防止其他人冒充发送者，因此这样处理可保证信息的防篡改的同时认证发送者的身份，防止抵赖。</p><p><u>前不久，北京市金融工作局局长霍学文在一次演讲中曾指出，区块链中的“decentralized”特征的本意不是所谓的“去中心化”，准确地讲是“分散”的意思，把区块链简单地理解为“去中心化”，其实是翻译错误，是不准确的。</u></p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】基于私链运行一个Chainlink预言机节点</title>
      <link href="/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/"/>
      <url>/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="注意">注意</h2><p>官方文档：<ahref="https://docs.chain.link/chainlink-nodes/v1/running-a-chainlink-node">Runninga Chainlink Node | Chainlink Documentation</a></p><ol type="1"><li>本教程和官方教程的区别在于，本教程<strong>基于自己搭建的Geth私有链</strong>而非Goerli测试网</li><li>建议先在本地创建账户，再创建json文件，然后去metamask添加importaccount，最后再在启动私链的命令中添加--unlock参数解锁账户，实现交易的打包。这一步，目的是为在Remix上部署LinkToken合约做准备。</li><li>在metamask上添加创建的账户是为后续在Remix上部署合约做准备</li><li>在Remix上部署LinkToken合约的目的是为后续给预言机节点转账做准备</li></ol><h2 id="用geth搭建私有链">用Geth搭建私有链</h2><p>下载Geth</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt-get install software-properties-common</span><br><span class="line">add-apt-repository -y ppa:ethereum/ethereum</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install ethereum</span><br></pre></td></tr></table></figure><p>随后创建如下的文件目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/myChain</span><br><span class="line">├── chainlink</span><br><span class="line">└── localChain</span><br><span class="line">    ├── node1</span><br></pre></td></tr></table></figure><p>输入如下命令创建账户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo geth --datadir ./ account new</span><br></pre></td></tr></table></figure><p>可以通过两种方式配置创世区块：</p><ul><li>直接配置genesis.json文件</li><li>使用puppeth配置创世区块</li></ul><p>0xedd96278959aA8B27DdC14FD70ACb31f7e7beC2F</p><p>0xCDA9035668b149d18905349Fa8779073e433820C</p><p>如果要直接配置genesis.json文件，可参考如下写法：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;config&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;chainId&quot;</span><span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;homesteadBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;eip155Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;eip158Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;eip150Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;alloc&quot;</span>      <span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;coinbase&quot;</span>   <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000000000000000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;difficulty&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;0x20000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;extraData&quot;</span>  <span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;gasLimit&quot;</span>   <span class="punctuation">:</span> <span class="string">&quot;0x2fefd8&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;nonce&quot;</span>      <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000042&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mixhash&quot;</span>    <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;parentHash&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span>  <span class="punctuation">:</span> <span class="string">&quot;0x00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;alloc&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;18aCF602A4C1f4915709bA09A0bFd83A58656CA4&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="string">&quot;300000000000000000000&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;8c304567E5d337cB60301a998e430F056EF9F622&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="string">&quot;400000000000000000000&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>初始化。<strong>注意每次修改JSON文件后都必须初始化</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geth init --datadir data testchain.json</span><br></pre></td></tr></table></figure><p>在~/myChain/localChain/node1下启动私链</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geth --datadir data --gcmode &quot;archive&quot; --syncmode=full --networkid 4190 --http --http.addr 0.0.0.0 --http.port 6789 --http.corsdomain &quot;*&quot; --ws --port 30305 --allow-insecure-unlock --unlock edd96278959aA8B27DdC14FD70ACb31f7e7beC2F --keystore ./keystore console</span><br></pre></td></tr></table></figure><p>私链启动以后，就去Metamask添加网络。</p><p>Metamask具体可以看这篇：https://blog.csdn.net/llslinliansheng/article/details/123596009</p><p>私链开启挖矿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">miner.setEtherbase(&quot;edd96278959aa8b27ddc14fd70acb31f7e7bec2f&quot;)</span><br><span class="line">miner.start()</span><br></pre></td></tr></table></figure><h2 id="搭建chainlink预言机">搭建Chainlink预言机</h2><p>由于LinkToken.sol的Solidity代码需要在GitHub拉取，可以通过在主页按T键搜索LinkToken.sol文件，找到文件所在目录，并拉取其V0.4的所有文件。同时要修改import部分：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.11</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;https://github.com/smartcontractkit/chainlink/contracts/src/v0.4/ERC677Token.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StandardToken</span> <span class="keyword">as</span> linkStandardToken &#125; <span class="keyword">from</span> <span class="string">&quot;https://github.com/smartcontractkit/chainlink/contracts/src/v0.4/vendor/StandardToken.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract <span class="title class_">LinkToken</span> is linkStandardToken, <span class="title class_">ERC677Token</span> &#123;</span><br><span class="line"></span><br><span class="line">  uint public constant totalSupply = <span class="number">10</span>**<span class="number">27</span>;</span><br><span class="line">  string public constant name = <span class="string">&quot;ChainLink Token&quot;</span>;</span><br><span class="line">  uint8 public constant decimals = <span class="number">18</span>;</span><br><span class="line">  string public constant symbol = <span class="string">&quot;LINK&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">LinkToken</span>(<span class="params"></span>)</span><br><span class="line">    public</span><br><span class="line">  &#123;</span><br><span class="line">    balances[msg.<span class="property">sender</span>] = totalSupply;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@dev</span> transfer token to a specified address with additional data if the recipient is a contract.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _to The address to transfer to.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _value The amount to be transferred.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _data The extra data to be passed to the receiving contract.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">transferAndCall</span>(<span class="params">address _to, uint _value, bytes _data</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_to)</span><br><span class="line">    returns (bool success)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">transferAndCall</span>(_to, _value, _data);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@dev</span> transfer token to a specified address.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _to The address to transfer to.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _value The amount to be transferred.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">transfer</span>(<span class="params">address _to, uint _value</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_to)</span><br><span class="line">    returns (bool success)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">transfer</span>(_to, _value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@dev</span> Approve the passed address to spend the specified amount of tokens on behalf of msg.sender.</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _spender The address which will spend the funds.</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _value The amount of tokens to be spent.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">approve</span>(<span class="params">address _spender, uint256 _value</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_spender)</span><br><span class="line">    returns (bool)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">approve</span>(_spender,  _value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@dev</span> Transfer tokens from one address to another</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _from address The address which you want to send tokens from</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _to address The address which you want to transfer to</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _value uint256 the amount of tokens to be transferred</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">transferFrom</span>(<span class="params">address _from, address _to, uint256 _value</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_to)</span><br><span class="line">    returns (bool)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">transferFrom</span>(_from, _to, _value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// MODIFIERS</span></span><br><span class="line"></span><br><span class="line">  modifier <span class="title function_">validRecipient</span>(<span class="params">address _recipient</span>) &#123;</span><br><span class="line">    <span class="built_in">require</span>(_recipient != <span class="title function_">address</span>(<span class="number">0</span>) &amp;&amp; _recipient != <span class="title function_">address</span>(<span class="variable language_">this</span>));</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>随后使用Remix部署合约，然而私链终端需要对交易进行打包，解锁账户，开始挖矿。</p><img src="/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/geth_miner.png" class="" title="geth_miner"><p>安装PostgreSQL和docker，这里不细说。PostgreSQL的安装过程具体可以看这篇文章：<ahref="https://linux.cn/article-11480-1.html">技术|如何在 Ubuntu上安装和配置 PostgreSQL (linux.cn)</a>。</p><p>我使用的PostgreSQL版本和docker版本如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">keikei@ubuntu:~$ psql --version</span><br><span class="line">psql (PostgreSQL) 12.14 (Ubuntu 12.14-0ubuntu0.20.04.1)</span><br><span class="line">keikei@ubuntu:~$ docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           23.0.1</span><br><span class="line"> API version:       1.42</span><br><span class="line"> Go version:        go1.19.5</span><br><span class="line"> Git commit:        a5ee5b1</span><br><span class="line"> Built:             Thu Feb  9 19:46:56 2023</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Context:           default</span><br><span class="line">permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get &quot;http://%2Fvar%2Frun%2Fdocker.sock/v1.24/version&quot;: dial unix /var/run/docker.sock: connect: permission denied</span><br></pre></td></tr></table></figure><p>随后在~/myChain/chainlink/.chainlink下创建<code>.env</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ROOT=/chainlink</span><br><span class="line">LOG_LEVEL=debug</span><br><span class="line">ETH_CHAIN_ID=4190</span><br><span class="line">CHAINLINK_TLS_PORT=0</span><br><span class="line">LINK_CONTRACT_ADDRESS=0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span><br><span class="line">SECURE_COOKIES=false</span><br><span class="line">ALLOW_ORIGINS=*</span><br><span class="line">ETH_URL=ws://127.0.0.1:8546</span><br><span class="line">DATABASE_URL=postgresql://postgres:Likeqi5201314000@localhost:5432/chainlink?sslmode=disable</span><br><span class="line">DATABASE_TIMEOUT=0</span><br></pre></td></tr></table></figure><p>随后启动预言机</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --net host -u=root  -p 6688:6688 -v ~/.chainlink:/chainlink -it --env-file=.env smartcontract/chainlink:1.11.0 local n</span><br></pre></td></tr></table></figure><p>在本地浏览器输入127.0.0.1:6688，打开Chainlink Operator</p><img src="/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/chainlink_operator.png" class="" title="chainlink_operator"><p>至此，Chainlink分布式预言机节点已经搭建完毕。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
