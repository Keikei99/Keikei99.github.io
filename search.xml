<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>【Database】未分类的数据库原理</title>
      <link href="/2023/04/18/%E3%80%90Database%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/"/>
      <url>/2023/04/18/%E3%80%90Database%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="未分类的数据库原理">未分类的数据库原理</h1><h2 id="数据依赖的公理系统">数据依赖的公理系统</h2><p>In relation <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="11.559ex" height="1.984ex" role="img" focusable="false" viewBox="0 -683 5109 877"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mo" transform="translate(1036.8,0)"><path data-c="3C" d="M694 -11T694 -19T688 -33T678 -40Q671 -40 524 29T234 166L90 235Q83 240 83 250Q83 261 91 266Q664 540 678 540Q681 540 687 534T694 519T687 505Q686 504 417 376L151 250L417 124Q686 -4 687 -5Q694 -11 694 -19Z"></path></g><g data-mml-node="mi" transform="translate(2092.6,0)"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></g><g data-mml-node="mo" transform="translate(2859.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(3304.2,0)"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="mo" transform="translate(4331,0)"><path data-c="3E" d="M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"></path></g></g></g></svg></mjx-container></span>, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="20.296ex" height="2.059ex" role="img" focusable="false" viewBox="0 -716 8970.9 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></g><g data-mml-node="mo" transform="translate(1044.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2100.6,0)"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mo" transform="translate(750,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(1194.7,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(1953.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2398.3,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(3158.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(3603,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mo" transform="translate(4431,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(4875.7,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path></g><g data-mml-node="mo" transform="translate(5639.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(6084.3,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g></g></g></g></svg></mjx-container></p><p><span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="66.593ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 29434.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="mo" transform="translate(1026.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mrow" transform="translate(2082.6,0)"><g data-mml-node="mo"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mi" transform="translate(1259,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g><g data-mml-node="mo" transform="translate(2322.8,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(3600.6,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(4360.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(4805.2,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mi" transform="translate(5564.2,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mo" transform="translate(6670,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(7947.8,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path></g><g data-mml-node="mo" transform="translate(8711.8,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(9156.4,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mi" transform="translate(9984.4,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g><g data-mml-node="mo" transform="translate(11048.2,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(12326,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(13086,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(13530.7,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(14280.7,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mi" transform="translate(15108.7,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g><g data-mml-node="mo" transform="translate(16172.4,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(17450.2,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mi" transform="translate(18209.2,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(18969.2,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(19413.9,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(20163.9,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g><g data-mml-node="mo" transform="translate(21227.7,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(22505.4,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(23264.4,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(23709.1,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(24745.9,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(26023.7,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mo" transform="translate(26851.7,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"></path></g></g></g></g></svg></mjx-container></span></p><ol type="1"><li>Please find <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.357ex;" xmlns="http://www.w3.org/2000/svg" width="4.559ex" height="1.895ex" role="img" focusable="false" viewBox="0 -680 2015.1 837.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="TeXAtom" transform="translate(676,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1223,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g></g></svg></mjx-container></span></li><li>Please find Candidate Key for R</li><li>Format the <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="11.559ex" height="1.984ex" role="img" focusable="false" viewBox="0 -683 5109 877"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mo" transform="translate(1036.8,0)"><path data-c="3C" d="M694 -11T694 -19T688 -33T678 -40Q671 -40 524 29T234 166L90 235Q83 240 83 250Q83 261 91 266Q664 540 678 540Q681 540 687 534T694 519T687 505Q686 504 417 376L151 250L417 124Q686 -4 687 -5Q694 -11 694 -19Z"></path></g><g data-mml-node="mi" transform="translate(2092.6,0)"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></g><g data-mml-node="mo" transform="translate(2859.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(3304.2,0)"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="mo" transform="translate(4331,0)"><path data-c="3E" d="M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"></path></g></g></g></svg></mjx-container></span> into3NF (give derivation process)</li></ol><img src="/2023/04/18/%E3%80%90Database%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/image-20230418173647471.png" class="" title="image-20230418173647471"><img src="/2023/04/18/%E3%80%90Database%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/image-20230418173704320.png" class="" title="image-20230418173704320">]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Base】求职简历以及面试教程</title>
      <link href="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/"/>
      <url>/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，请重试" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="be92fae29aada83f4b3b92fb89f1ae969ac73efe4411469c4da393dd74c413d0">dd3ed03bd336fd6815aa6e965af0fe4bd89f6637e8f100e386f033928faa690f006d3f7632822352e561141309626995810fb023a4133fa15441a8b922e9fce74b0ee4e94555ed705009ed3f3797a1716c9a99efb170c31e24d89fc73d15b12942eebb699ad21801cfc5a235c61e2326d44cc22cad52c6189b7f444be30dbc5e1ac2b0f33f339bebec64f4177a09d3dab23b9cad2f367195452160761f0c0185e6ea04fe4e904e6cb8e9b73ae6ec30c9ceb5da33c420e792df06e7c9dce2b16334ed14e424fb5b094c174afefb32bc44ae66d9fad06fc44dbe956154bfaa9604765932538e3ded2be9be5af482ad706ddd4b6f71175f55e8b41e0d219818e493a8d774e0f3fdfb0ef5e96d891de1187fef1b199025b4bdf356d4e7ab17da872a088f3e85c518526fe383085b069d00c0c1681b88c06d34fd750f3255b03e942467ab0e2cdf5a1e3d6de474419920e4581206327082de9337b920765a3b1b32a5daecafdee0e29d14c57439aba7b70ccc4b34ffd2317e5ed9e05edc48686e56cb665932f6af682fca629f7adb11d19ff4058e57f008c65bb24032cc424058672efb804ec5a51f4347c9461cc3026700e8487de3d2b97aa5f5c247cfa7d6880966e2ce9b57288f995ecf7e0be55277ee571a4fa91bf00544f30c23e6af9f050cac0fee5986c4ffc59fcd18f2444adca2b56e6d3c5b705208962a60dc0993037f34db5eafc7590c336527d2c1b32afd8af3ccb100db385c27d3cee9523252704a8c5902223917a157ada9ca15613587ef4825d7c0950944fd3e488cac1918c8e699187d4de73ccc4da50aba3c71da748be6fa7a3255bcae120fd174ae00a1e7d7855dbc42f8464debc12540a4f5b95b790f9ed9eee379a63be8e7f7aab44cfc7dc2b31eb8ac2941faee93179afad1877ae3ac1e33ae4fec6aba8b64527509adc8cdfbfcfc0dfbd518335e23365519ff13565b4fe62b4d1ae541fb4a59bee93bd34986d8a9812bffbcb0b3186db4eddc92482dec0fc81ac1e043f14cfa02c6a22680dae71a4181b010380c7d1f6ea64cd8c0a8c2b67d98ce1af5a12f2367f20e67760cdb78f207f3184baa9baf842c3832b5a4edb0ea713bb982f0a1725881db753c8027433ccfd47a2052adfaa20fa21de9c71f83e0eb07662ee5859a675b52ee4d8590c13841fc63b816c4687d4502dd8245ce4ef1004ce9a18039988d67b4a8071507b04aee39eafe57c3c131fd6ce6ab26d6875dfc3455982c57ad4bae9cbc8fdc1b46228559a1d98328d90c78540bc743d5d45f5acba64bd956b585c0d1bb20283e564a7edc9e79696003a0ef3dbc5eec106143dda95e60c5733a5dd64fa9013b51b29a5abbeef91a30355e5c87cb98759730465a82a19dcf640cd9628f8c4aec47275ff3f6a06973d511b14a85112d58c69c9b84829906f023277ea9901de3c7cb60ee1790063cf428dafca52e853bebb90c03c2a9c9fbc5353a502ccc470a28d1522ad7b32ddeab78855dd971b9d7aab94997357205f2b5f54673fbb21c2caafbf7889b2c80c4eb04b958bf9d7b5de1425ef71ff558d2d7d99b26728b73a3f555f4bbe18bcdc34ba5cbf833c9a841dadef88a7704d6239ad4d104c22f9316dd7b862dd96a0bc60c782cf3a657816e1e9e8acf33ce1211a9af815a31efd4d71a60f550e822bfe89dd76dbaa9894fd68878776f73efe7908d8cc7a22e685f5a901952f65e4228c1048bec3aca4fda438775b32c827f9fd3721752442e6b1a0e127e1ec91f6ef8be0b6911412fce270ce84f4122e0fea90de1fbd0287d6e4610b2a5cefe2e2ffe76bac01ebbaa908c0c4614738594148362505dac7d6098f9e82f6e13b3fbd76788f8523997e26301a597ac3bd3e6d926fbd6b08aca67eb2cd1713a0612bdd6fb52969f31d7229ae8cfc405e334da438c48e3128e9571619d745f3876cf09339cf4fd7f0a7b053cd7f81fe76fa657dc74bbc674a06a807860c482de85c1e6a1d2ffb19bfa7b71bbd6d0c306139935c6cee01af3754c5c2ccebf7d19c659546eb09a1c7afd64b995563d234a0708ffdcb1426d1d5968431c72d219f1571b84048614f3422758276f470dbfca057b19506988a7bfc90a8859ea8dcc7fc4f57d9df99327da2df176ac8ed4e819966ea2ff6483fc06fff06fce5b37d040de4897faf49bb0357da54cd2a633d007c9bed59a17d13f877732ef4a2a35b479569440aec9430c24210dae971f83a13450c1fd7c8056e2ceb78754f0c77c67f2495c106ab0116f1d9e8489da63e2f413afb81c0d360fc349eb0e2c0daca159a248c1d8331d58bc8da2aeb5bf3c189d8b6754339c53588272af5f7811c05ebd2de9a71e4da30b2bfa985e973268cdfbdf66caf15ba80da8590457792c6acf56ca0c48fcaf19c010f63a35a350f7f87b74c6ac2da55284e1430fa7dc1783f9e7ce9df6069e9aa0fe90fc60712ab1341040025194add8a7f082d1db4943073798726c0acf0b0dd2532221375548cd4613df9ced62d524c02ed9913c694be1f5ef33b70ddaf34d232f8914f8a3847c3b111e824199d80228cf82cb5526fcedb0bea1c7a82f3e8485a3dffa72dc7d1af93f8d1983644c0fd79908e0153b8c071be9a12065055d9496044bf35a25c1d5e0cba341c575c0125aa81c0b114ba68913cbb7ee81db00a964ecc2b9fa49855c79181799e5c471410ceaab843b36a83b089e0480eac91f25db26f3e2622e5c654fdb1fac4aa684ad796066b3ab4b5da4de226e99f6ae5dc0df94e5efc1cfa6e52b6561a52184c3797d81c1d539eb62d89a4c3f150bbaf0a8b76f5685c64c4ab5ba3cad02588c2ac3e6f1df5a73a165a06af4c2fdad7d9d583e4c099c8124d2ecaeddd8c26e971898a2d05b3880266a2e5602f79b5bb053aacd7611d3204b90f777e327d98acbe179e3cae8f092fbe77566d9fd9fb778ccd7a921024f30c5bbe66d9174fc71d9381674c2b1b2c247ba333a245b5f73408c87d0785e2d99d329c0b51dcd79c84cbecd5cd400db9dfedba8d42acf833adf4670ee7b25cbea1c2eafdf6c38feb9471b599896dc4c2f91d3910652ef3bda1c233ced70ba0662c7507a3e7b8c6e812a06a95a6ce586cc41a98c40c5c7d973cb34a726bd499be21d7874fc52e5549f333bcf6aab6e4b91f8a2072406957e475a45e9a53a3c457b7e8c6ad80e9847824bcbd914332f66e06f298fcd6fc2f9b12f9bf74a8e6ab3969de77bc1915734a4f60577a27c995e92d92ec3aee2f5aa9907fc4d3ab646f6fc3e15b8761be816a73a66ccc19879d0408df88a3d09f7ecf6b8b1531ac56a03baceecebd3868c72cb70fd530c2370908c7180ae445d266d45415f3e32cd35ee0597f6bac21923b717e85085b2a6d2133c12d9d2d4709b6b54500e0a5941cf5f46d3cb82ba15dff4cc4144c998f2a9bcc87088c298f9764e5dff35d3f8300fefa78f3d96e8d867c3aa5439e5ba42aed4556af53616bd8e80ee2d1f6e7531fa4d1eafc9270eab96e70ad8bc4b2480aa4dc802f3497442ada8733244310785240cad85fb0b16cf11a8cc74e335bf79e513707784b619542a3a734cc59d2fdf2d1a88b7cbcbfb018e0cb36138cec19e6d170bfd1919a967fd1347243327a38adcc6218e8731235e5d5b0942610bc104614b8a3b57071d9e90c8c0a88638b8c0863c07c3cc63f38dfa62ad35811b1d93fd99ef6d05371c6c8c5fcfbc72fe02a7758bd875906331e52419e205f363d2b44b0d93b2693df605a878e037d710eafab22dfb4639ecd349c567df8b5aadae228f255f9442309f2100578fe2ff7626671055a29902b6385527ebe7532c406f2ce3307b2b44d50e9268e645593d2b546511ccb46e1fb8a542b7689406d903c109b07c6ddfc316a0e6c02c7ea2b8ef78ff3334bf00063324bf03cea2dbbc453ff823ef26e3a84ae66551cd9924dc96343aa17f30dceab780b587287937253867811c85fafc2956f3dcfb075096d16b9be09a9db407eaa47deb5f7cef9cdd12f7e49c1c57acc4ed35253f9a0e70e30f5c5b4bc5acab723750d63824c09629a78ad9b51957224436756ac8225f34ed82a876ed6370028fc1e0712259efeffc32d98d9f22a34cb3bca9f4a3a5721d2e5a35b50f823166f2729f50d4d35b70045bdc1e1aeb28867d3e1b4714791727ec248dbd3171368612e6af130b3dcdf3ced3eba436b12eec732aba34a097fa4e5c2a7279e01971854dc008e680116cbf17c4c4b8ea173ec820aca7799f6869bec1969b458f131da60f0acf3563bb03c4f520b100ab265fa1396db632619761c53c3f7a38a9920c2bc3e8322ee7df5b883377c851a34dc547d967338631ceb686d21ab925f2714e55d7380c7a1fb7378a400da913312de446c2af57717ce04165c6c8d1a1f495906686c0aa9420d28e2f6d5e352724b594c74ddb11a887b340f92fef6ca903d135ef34d1b7963120d0b88d83b718be05ce58d89b3d4d10756422b347b6e3dbfbf00a3630a1b59d9327b46a4305a02c03d7f3e86e5e92b6ecb73435e41d53c5ed3d1f323a308576138e634d30fa2d6fce6981065bbd7316b6d3d04ec1d6ecb2e53b6002ad875f085c9e2aebc3ac38b3a137dac74d810a09a0ce846d05d4388151b57eb229183c06ca13858d676a1bb3004cc62e998317bc3e682083cf924aabe0b636eeb336df11dab834f8ad9cb641584a929aeaabcd2e37d9776a23f2e6ea8691494f4a49cf06129c120617ee81da26875e8fe904810ebe7d2bf8877c0a9d965bca4fa5d272ca2ae24049016332cf5eb7fa459191ac47b3e31bee65ec8b5d23c4a5d4ba686ffd6b13ef6149dac394dd40684412fd47a10c69f4ed61a2564d1e7c6a7c4f24f4e034d7cc89250315e1110ef68d80d1cbeefba8af6af35c97baf89ed32718ce448c1d44dbd639a9bb3eea3118ca95df91dc6fa954aea4ec54dfa5b3515b9573e23e68ff77da919bde38ae91c672946567c104b25a335423db071c869169669a319aee147234ad713b305d316243e147df8a2fe43c6118c447a76c3496e7f133a94baec5b68b94c94c4f7b753c4a95f8e57d4ef05b2dd628c78ca7eeeca09e11ac78502420cbc1a7e858fadac0d882988fffc8b64e92a782f24d247a5eefdb97c3cfddf54617265bdd3f9907af331f333199c581612adaae59a52bc562c5f5d331bc4b801521f5594be8aa1524b5a07c447ce0751e4a0908a00b7a8e390b2bb7254b3dabe0ca66ad296ee9315c864b1208c13dadb1e56d7b71a573b55c2149a705d4fac7a65593c97597f996fcdeb5033fb70f370e1c9df80aab08bb8fe328345cc8c582dcf0ed20a45c4339628906ad0824c2247a8092c7d5313a4473a81f1e9c4a5840608904d383c65da66a34e157b01af3edd7853bb42b3a528f8f984b0d7ec9e0f94b61ba389aedbfaf2cd75938f2aa31ead45a9fedb94b358d4d072b36f2d01f6f587bc0877276e45e2d43d3c80de0da94faaab3e9370f2f57d35da87e9d5af6f05d73f32ed9af799c158366be823e6b7580332b36b61a4c368d710f289f4ec040e5ba8701c226c638abe3c0bd73a0c938e3ea962f6dcab60b57fbcd31871fa47c91abfa61282de00cea78a0b6c526fa0f3828fd80e474285e845bd4041f3b1af4585c4c6a5247bbff97a6dde9c1dcc68a01dcbd51b9b7f5a80f25e1a15120eea94673a1e515254cc3818335aab75f61f4d3fdb705f2675268d53691e9168433fd94690186ed07dbcefbf74719d5c7b3bb1ac78499a195eb09b9ca56ab70718716ea65892cdea5c582f13e33df5ad7e75fb3583b4975ec198940dc6b49aeead8653970c040ee790dacf9eaa1697ec641075f62a745356681038a3154b3f344e5159ba5b1c892e676da10fd9490a02ba0d177afce27375a9778d0cfd767f8e1b0d7283bd5fe2f50bb1b708109167377f4919b78c8996e32e393e5d33ac9af22de43508525bf14f989ae23e02fb47115ab60d45f717552fdb3cf971c09190a1e95de2167e8c389927ca1c8583fa1ad3d5cd46e9921d0a81210913e9d040445393559f8d8bd4a5889c251b63e3da9b97e8728da7b96ac63b8bd84083abdfe4284b908e47d06412e1360f743a68ad72986242052e5f37531e7409084a98236ab7c9ca481855e0ab1f5c9526f55bd10a88057fc00cfd7e19a3e9120103c49d480d5ddf45c79a5b1a04d7c881824a931d4d59a82e1abc4d198a0e98c3c356de34a588627af32ed7626ee3fd6cf2b09a19976f2b03e8cf7516768373bc3012e514a48c34fc869bdd682271bc501985940904764cd76052d4f5ccd3410e45432d61de3a99717d8ed57ae24a0f3cb64e5904202dfa61fb79bba40e79948495e3077bc6728a33b07351c516d2832f5ff65d0d7f25c863a8d87c4b95a689b82e7c9fab982f6cac5f58a70bd6508a704adc05a3289bba4f8db67c9962c485b7868e1600af2f556327833cee292815c21cb6273074f458629f30039d74c1e53eecb14208e57bba260fd230ab2fb0da64c2d6d5969b8364fd3a26637bab12559d874aaf850c8537abd421a5abca748604a1483118eee7e9d156062439e211535e918c25577b2344c3c9e2a5796f5945b3986419c1dc59caa1c175c85b3e2f39f823ca0bc8a9ec247ddc9d753f752d0bae0e333530b7677658c4436c066fd5fc4425c3de4949fa070172e0d0caa3776fa5894f8eb1419777f96de4a2fdcba3c632f9a21661ce9a693eed2ae57b5b233cb85826fb2938bd0d670d528f094760327fa0648d94c0b5862812dca892b6ff005d2fb9bb9b8d63b7fa41791dbd705b56b9aabcffad5f24d5d5feeb30d8d690cabd4ae526dfc952bbb42becc1912cedc586fad75a98b3d710949ac78f2a46572574bad6ff42bffe7956b0611ad0aa31c4b5d8106bbecad242b6b5968e04b24f2b9a073c5f161a05f03b550db3566accb6d96675889f8f5ae959478f802ed9bd0ea5374121818218cde7e71bd22721eda516639bfff6d2168f3d7f543f99dcf71a0820c0a93449e9d38bccafa75a9d6fcd007468106257f632bdb4f8819c3e44902f4262f4020e073c0523021a3f4fd116859fe11b2aa947e5a2c9c13efe0a70c4edf743160423366d7b66a1755e17d0e7f181d8baa047a96f3e74cce0ad42c9bc2960e12024c8528ebf6443d4852cb51cd806b41a1b239038bada6253eed2db2c8e190bec6f45b453ac9e9f49095abe8a2fca508fcf2ac1e4d203877a3d1451f01856382ea153e6d3819368ddcf1a2c953fb06d68f745afe08d4530d486b58e9778e7d40cd4ac09db6c77ce02671ec8c8ce3d894f0e7a731ba809197b3dac56ac8b00365a438b972aef04d2b3ca807fbe1b09e1b2c15bc6dd198a4e9dd3e9580c1b7d4ebe7e1c4190385e09d306d6b2ad372084573e01ec157cb7c4d402c018be6f2445febaf04ec0c4b6df9bfcdb4394eb5472c6c940157b31b61961f83287a10121551b1e1c17a2e37526aa2b1d805fec26e0d52d2322410c98ca73092658ec31ab2b0266d525bf1f0a5bdc0d9119c67a256dd45e36c4cda4c79e0676e0c65ccb8234ff41baafdec6b74d0309e80669a82c901075ac64da0b60326b1dc94bd3869e4499869b1dbefe204e6b79e86336a7bd35a506b0fec5bf3ab2e907620fdee8414d84bf933de71622d34363bc7e334b8df733ffde3f389ab522557326d143159133761650489091f0e9a1864826dc0fa8639b695f97e4b7cfba1d9c3dbba2c09678789b110bd3c39a3d55391adbb062ab5220d7d713dda127acb71eb99234181c32dc1ea4af897b3ac9ff6fe4d19cf888bcc21e680ff8646a588d9e5bba3908636703966b2ca110bfff2d4e1656b7eaacb117fae6026d7aa28e208f830e6d6758b3dc3bfba57dcdd820c18cbd70f7c829beeaa14cd354669c365a94c1512861143ad9c914fafedd0342bace00f49c2d4e64e47b1f38b660b037a4ac319337c5b55a1259935fc4c161ca58b77716c271ff1f34f85d6073e710b8a210ddb25fac645b0de11f2f6d10da6c11692cd7b639b9a6dc19f9b2fd133a1a33f7af7c16c1349e21e2581abcab907a330308f2aa48e5d740852709737a3dedbe17dde281e80af63293bdb557838bd8e2b0e2a4ebc7e5f69cb081af8e17aeb82a468762f27687464346a1b9b0c647b16bc0c835b7f330dad6d89f75390568540c30f2403ac660e9e8236d2f92f1d29c0381c98f3942f36890ffcccd71f34e5301ec994193aeffacee4a02a1f3499459121dc2db4c25519066bf9e589f894e039166fae1e06273fe7cf2a605261122c880cc95de14487c89e52623214e1adab856b3580f19281193d231b511e5a067ad9b3086a4173b2d2d30ba77dcad2c4eba50c3434a2c1313b8dd129d6b6818381e279dd8db63e0ef93ad78b97e09b75d89babdcb96492ac52e1a12972640735c004791d0cb8e8ff70578a94d643702da1a025ad42c662226a7a04ec5b1f35c8132e3af5f4042c3b93b7a094510fe6b4161b72fc2274868eba349fefdd567e3b130ec4cc2ae5f46792a942c25fd75ece689a3b357271476ec8a5a4d45ac48d5960cdc1d8370bb6f7331522ec9530ed7c9b1b5e08f0a560c025fca86b1c29ae4ed564389d5787f16446b037f823eafaedbb40c88f8aff7e6eb898375d888a52e8f01857a955d29a8b5fc021b30a84638a0b437ad49e33c462dfbe9ef9bd4501a5fd9813542a9db7989e3f331b4702907bb7c08d006369076e1d0da8d8df5d9e7ad1b1049c7e5532bf7b99a1f1a1d63c43e8b59b7a987b9b5761a64473b4588dd35bcb4b77178527283fdfd40b316c2532fc3cf20813c8035dd84e6c6a44dfc77dbdfd4a9fac5ccf6bf2ade6068aa346e4a54ab092bb4904f7c50f131d531c6777e7ac6759b15c2fc4b233057c400350c91e971dbf9657b0e9dd482cae7f02fe5124f54cf14197fd069faf874db9e08c2380d020a8736722c8e214790c31afb05af7acdaf3b184af1b11ced8eef2bc922e1356d322525e1c975652705526af48611bc2d37ef7830787df7c4d800df95e2a52fb097f06d4aa81db52b02592a128494a036ec5dd041bfb31822f0be42effd33a5298b6bbb09f9370b8f6a81f4f5d3a225f27d585ef1aae7750fe04549b4eb7034e19049a6a481af6d87b65134f0f8e9d3ba10f0595ac1e86f38f9c09b515da0197013b78ad531bc6bfb4e42aee7f7e4faf295619dcba933e477f6dc843580579d50b6a2ead4f71280dd1b92075e4a0351aaf124fc1bbeb9f1ab0b57b6544655bb5a8b56b7df7154966f5d8cbecebc263cfc48646895a03ffb037610c0e7184f1209da50d79ca015baa68e26885893608f520b9ae45859197ec65fa5e64f89aa73bf65493329cbbea4b848130d230c742eb1e4cc2b78b724591a54037aa04dfd16b352cf8998600fc0c01de69e88dbe624b464c382bd4fc28d831682bc8d645e6ea1daa7fea0ff1a72e07b0216844f707ac6cc7b8360faed6a5e1a98f10e22a19061646ceb0ed81c3deb0de4dc29ee2f74b21f4097254f972c7a7cc46aa31c7897cf904b999a760506c8dcd396a8dd5a4659400f79afeeb528a998fe820d4c56703681e2437b4d7043ca7034d5f4db835b43c5784795195e82ae3646f450d94b0eb7feeec63a11ac415c00ce52e2bb2ea6ba6c59035c6be421fc0334d2ae709336fb2911f8d6f8d7ce4c71e27d5c44ba512bf7df4a6342477438455741783b189e19c6c92d732ce5571c0069c5edbbf0c74de69137f60d882fb4754c9f2c056159d8a071cccdbb09add8ee6dcfea6196063bf1c8aecf591d2596c53e39612f927ad40d5e5b2530475ea0cb9284ffdf4ad449c60223f27834a857e8ea45459a780a8a45490a641bc5f39d7e718c80091e27e05df9998432302ffdf8ae4aeb1b115df1d1b89bc8e0fd8751084b25fc38d9bc0ec1788e80d502b31fa40e66bdd587dd63949ba453f34b794fbf392ee5802d2b8e078a9483284d8468b9021f8c26547740fdaa7035085434dd0d9b04f6db0d88a263413e286881deb32a6d5992eadad9abc6b1388564f6b2fb1f568029bdab92a697b89230f454e3890edc5baa8ac43d5f9979629bb7e00270c78c9513f99ce62bc195333b96ebc9e45d4c23aa3479cd0af3b173ab4d46c8d3f2ca96642e8bd9ef3e673279572462bc7d51b0a3dd129e9c759e0b230451cdae542692e4f75bf10fae3a5f70552951b560e84d41c5e63f015ab16156df64475365f88aa2c51740f78567a6ec8c840f740572934d8568107f14f441f79f3b59ebdc9b072108110ec843ebb43fdfd0a310a66a1b433968d9be9443c128b95fceec82f4cf51afacd233bf4f479df7440a1c32baf88d7a7fd35076a427a0ce3d86e5084f0df5eae8c2c504ec97f09660e2bd2ccd311aa55b33209c5aa3ceb480ec51165328048678743d68d2226361c2d87fcd7a73d687b47e4abd209b5b683e9277cd20a86082b02031a9bfdc4b07cf8b2214ba66d31c1e32441bc859aa2a0aa14101811f843ba820bb22f329e8729013c2fe7f5befdcc2630c3ae0ceedb775bfc4248ec5bcd88ffed47a7ca459b954499b63d919756a7f7ac2fa292ca35b100478f9057e42958d59dbbcd189f32c40c648e54c807bf535165234259d3f61761f1d1f008d2fc054406f441a2dba85dcb18c01e065b504916e9bc9d8a7214aedc9015884b9828ed00a6388a10f74c9632ce7b0994483729dfcedf29b60f4d3c5e2300491d1f886c47d4d818511dd5d1ab4fd09b3269f0994cff555e0d9169bcb13a3a917e1840244739739a154f1c8f99d4620ba02071bdbc9e4c3f6a665aebe52b7d8087d524ef86a2c224e5533c6af55c1206323beddd9b808ab3ee11d830860f06222cf356644fbd9335ea63ef7df03720cffe66672f89c71a1fe02ddff9d89a4f9630f1874e4c268ea4ea0bab6853c2f67df33200b00af92e44a69077a7efc63b57e75aa5ccaa3c2b8af5e90e1ceba9e48657bd7d4f28cfb4fc3a4aba0a901dbe70bb57db86b6b2cbca8ee99a0f2f68087841dbb861db0ea2d754f0ac9e9effcd42cff3cf55d32eeeaedbd292e0c0761f3799b31ec67b6821876c6918d0f70c4f916c5aa3d1f9c72e4e8323f20e0c630cd8f0c32086e6570b7e89a3e7838025edda0d0afe6e46dcd00cba971b44ee502bd12429d1257ea3ae3d861b842e654f46d61fafc80a3c717ff4a3a323e76cd04f7040c6cf234c454d84d92e9ead290cf1ecff750016838a12d7c60d49b34b7d56f4f316c1478c167b3665a3efd9f279343e344bd478f9bdf155f63801af940bd0b2f70a92e30d0a8ca924e89d5063b96fa16b02e352f77625ab39e6a3dbb361bb43a2322838800b4df4e5329434242a26ce4b1769bf5f49fc9621850dcd0c4e9b19efb06c8812d0084e9c9a0c9affecab3107869a6fa4a90db19b397aa776d3251ca7c1633d1301e2ff5e061519b970f82ecb8f94561ca7bd2142441550bca4a81ed2d41695ac7419d166461dddeb6265a0d09b48194260ac73a5d5a7c456c841d05b019b56685563caa5da5bfdda195988aecc783859a796e4b4b86e0d8e576267f732051db1c00a6ff3826c501204edd6330d169359159b50be20d08ed9e736bce985423e3e271374e0f8aa72f01d748b636479099f4ab991a2c365c1eb563e5440ecf86862b8b8eb9d7b0f3d4e492f6b314bee6995ca41a6cc700e980da607f572ce9efcde61694a6eacc15e54f8643c9de368a17e3f3bec3cbdfddbffde791390bf1e07a93e25289f33bc427e57ec648eda406ea94d6b8e5c53af5a6f180e0d68a9a8cfb7df2ee940b744877143afae63e3aa56b503800f1d51bee904655bdab4398a4e7c39ecd19b26cc4ec089ecd896866bbd4b505d04b89d6322b35287e9fb0bdb1051634125018bc15ac6e1e15bc4a42d0f745f570a85d9ed49c6faa7a67ef82519c9a842f69b5545b96d3da49427b9d5cceb6e0a546b11330b26d13a8fcf642435ddafc67c771e77ac542757ccb6635c6e3bdf7d322d6ef8bfd471a73f82b92bac26d7a783224d6b38c9ff6dd479ac84eccb2a47b8c67c7dd82e45ca9219ccb3545e52d3877f3bf27829888b4317be5ab22e96da49c752154b2203736dd9b5f36ce9383f6fe6f93caa1198a06da1c11abb028a0b9526f74459c7834f3828ad40d0a92012d82a4c12001d0862786f654283efdd05a21021493a556f6104c4542c96472846ef1cdfd7868b90b113e7b3d2f54655de2f547aae9d7679c68a1b51b80f38352df46ff07470f42e2a3c84acc5a2c4c34de0537f993a801d1b1a587c9f76520316325cb498749df88311c1bfe1a504d7d3d99faf1e2bdb566be3a64a83c3696334b3bb0b67b56b6202b5d9d59b332ef418b12d155c22dd5f04b8702e8199d210f1a4e8fcb58f7b29da3e827039a9f402a1a449817bfcd81240df936128f50bdda3d00472fc4d387e9c162308770ce9c3f2a91d574438ee1646ac47d7edc6f146af8c5a382576dba6fbd596b58bb1a6e39547e78528861530c8e6cff27244f3bf547e00d244e6c8db6a5cbec716a9f5548fb1a09082fce67e65101c2bcc8876b53bd10f507601d0068473e1e9479e4048c5cdc8f1d5ee9b086e07acb30e6ae38472114d1373cb5a0630df776e7f7bd73d754d92adbfa4cdaa170d9c82c436314304b73b02ee7e9e1b3c17be84e3801232b953756d6fc6095fe17aa82fc3960caeeb720179650cb566c44733835dea62bbcba6d2b4ef5df0f51489ad88817991774b733758b1d714a4d7a1a3424b7dda455007364aa873de0d958789662cb56fe8ee6c6d45431beba790e7ffa54b7d7930ec8f333271e3390a7d221c0c5f6e7880f75e30b50f64a93bc094876d7af72026c6a2732fb2002d4f10652db32b8657e05a4c7414ba0315a82be45560f709653fc78940bffaa09f73960ccb9ce64056fb5902afa7b68d02e7d090ab7ac69aab7c625b2be3390c20b56b71e928bbe78140fd099be2f680a907c335547c84311788e0ebc868e11f1adb53c5edd7175efafd1e93900b5c3907fe8664bef9a8c5791d378bd3bf31659b43b878dfb546b6c28eefb762a79d15c6b6374ffa38a61ad47d12e5dbc1d1076878b4ee0d9ef5639586ce2297b6441a6649e55f37700a2166e2099b11c64c1e16e5e8202b22b4c80ccb5599c39e17621722600bc5e6a62cefad7a52d8df53876096e75d53f41b79c2c0851ece6f0bbfdc1ef9a62c023aea2629c53e5280dde71ce51ce56d619e9acb5193526a129ca65465f8f670abfc97fcc6b360d31187a34e6f5745c1976fd55f6b5605a43a039051986bcf07feaad3cd841e5f895f91e3a356225206d362c600e16283086188799331783717846a39e201a2a08ac7a0ab84761a656f678dfa2be13089763fa7886415eb12fc8a2af2eaa322c9b2f75af29b3d8c1a94b51d0e7ea6c6e9e1536383fa2deaa0e105a2a014a8ea198788475fe23a97be09a0a3e9f203684a3f78d24bf12608a23196c7e4cc705550fb290d2a1a0e0d1d69ec576e0f2be27c2496615b75f689c3a728461118e2aa9533b16cdaa053215e65e9a61e4d48a9cbef0af814432ab4705be1cf77e051e5536f3477dcf4d2a79026f66f836bc3c96b89c9a378f2ca4f93c74b9ea4caf58cd99434fe65dc510dadd12ddb41b254e39b40aaac42a6e13d58d3c3362e5afa538350521c518049b7df6c9b70e552fbc073501bb04518bf19d6714a29603fa86ad0adddc61b2595bc09f7dac7f32561fddfceca1d0522d06915822a87a322afb8c021c93b3f0e48c174f5eb3120d8df697c672481351a1ed9c36ea20cdcdb749d7a44de04639f62fe695fdbaf7704af22cb9cbb85f3e7e3bcbb49314cde0645f9ce2cd1fa4df025189fade008f59abf3b0e16d5e4bf12f39cea7733a36a627f0d52e6f80a1427d548c90764d2c18cc8ec97ee8ea0ed3b5d9ff1e2d4a47808adb24d56b502b6e98501c83daf979fb1c31b1425904f39cea38b115e317ba124a6abec9588c6505c2cc318ed5ca86ead5a65b07ae2bcbc1f030ab0ea0b793306748756e50b3aeaf9742cb9e5d4281754bc914d246dafc106fb018fb3a3d5f4d23a88a82faa9de388388b88c5d8e80e43b115ce7eed38954de79fc308a1bb71aef372929a7273176480ee1f9dca55a035377c7880c2349d621eaadf4bdcdb8ae57bdc2ec13d6b58c1101084df7bc98bf09b635b6b80f5cd7d352df65f17facc8b44e077cf4bec6a9f85b49023f4bb7f3b0c46cdf4dbf46827d3b9228e45925ed13c7f8dc186020e48acf0822b7f5db67d40a641f78c5c65b45aa655ba5bb24f4e5258a19fcbc498ebd377f4c0504f028f50f2a039d3fbbd72d0d6b8de92af16879078fe2667178f65a4b62b5e7d22c471a3f5a553e7a9089390b6c79f5fb56f3ad8f23684158e9e9ac613d31b1a0eb5b42329e8f8ac9fa8ea39b47f33e2e02bc86221aa8c1872d5f9ee098f29b8db5370d89380bb4db74073f3044e5d52b8416b1b56a89faf2ebb7c0b3be86a0ebe765d359647b3ce4c453108c3e57e6f99e6a549864026c8c27a30785ade5267477379402af34e6fb62957f777ec739c123186f2098679fcbd4f6481350a878d9a18ce3a9ae466fa404436907ad117a3b2be023764c85314690cee61ce047e9543cecec6790869e02e039d3e7777117a679bbbd8a53c626f156db0a62f47164588eaab5f0eff0167dfd27aa1213d9a6364dcf24a7271f4d16126ec22595d2d16e29353de34c4978c88dd74fba7</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码以查看文章</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> Base </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Assembly】未分类的汇编语言</title>
      <link href="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"/>
      <url>/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<h2 id="编译方法">编译方法</h2><p>编译与连接</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">masm test.asm</span><br><span class="line">link test.obj</span><br></pre></td></tr></table></figure><p>生成可执行文件后执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test.exe</span><br></pre></td></tr></table></figure><h2 id="伪指令定义">伪指令定义</h2><p>伪指令用来指出程序分段、数据定义、存储分配、程序开始和结束等相关信息。</p><h3 id="段定义伪指令">段定义伪指令</h3><p>segment和ends成对使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">...</span><br><span class="line">data ends</span><br><span class="line">extra segment</span><br><span class="line">...</span><br><span class="line">extra ends</span><br><span class="line">stack segment</span><br><span class="line">...</span><br><span class="line">stack ends</span><br><span class="line">code segment</span><br><span class="line">...</span><br><span class="line">code ends</span><br></pre></td></tr></table></figure><p>使用assume伪指令知名段寄存器与段的对应关系</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code,ds:data,es:extra,ss:stack</span><br></pre></td></tr></table></figure><h3 id="数据定义伪指令">数据定义伪指令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db 定义字节单元（byte）</span><br><span class="line">dw 定义字单元（word）</span><br><span class="line">dd 定义双字单元（double word）</span><br><span class="line">dq 定义四字单元</span><br><span class="line">dt 定义十字节单元</span><br></pre></td></tr></table></figure><p>举例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">x db 56</span><br><span class="line">e_1 dw 2030H</span><br><span class="line">carry dd 12345678H</span><br><span class="line">data ends</span><br></pre></td></tr></table></figure><p>可以使用dup循环指令定义存储空间</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n dup(m) ;表示n个m</span><br></pre></td></tr></table></figure><h3 id="其他伪指令">其他伪指令</h3><h2 id="个数倒序存放">3个数倒序存放</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x dw 12,34,56</span><br><span class="line">    y dw 3 dup(?)</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data</span><br><span class="line">    mov ds,ax</span><br><span class="line">    push x</span><br><span class="line">    push x+2</span><br><span class="line">    push x+4</span><br><span class="line">    pop y</span><br><span class="line">    pop y+2</span><br><span class="line">    pop y+4</span><br><span class="line">    mov ah,4ch</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h2 id="查十六进制数的ascii码表">查十六进制数的ASCII码表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    table db 30h,31h,32h,33h,34h,35h,36h,37h</span><br><span class="line">          db 38h,39h,41h,42h,43h,44h,45h,46h</span><br><span class="line">    hex db 6 ;查找6</span><br><span class="line">    ascii db ?</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">begin: </span><br><span class="line">    mov ax,data</span><br><span class="line">    mov ds,ax</span><br><span class="line">    mov bx,offset table</span><br><span class="line">    mov al,hex</span><br><span class="line">    xlat</span><br><span class="line">    mov ascii,al</span><br><span class="line">    mov dl,ascii</span><br><span class="line">    mov ah,02h</span><br><span class="line">    int 21h</span><br><span class="line">    mov ah,4ch</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end begin</span><br></pre></td></tr></table></figure><h2 id="以内的十进制数与一位十六进制数的转换">15以内的十进制数与一位十六进制数的转换</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    table db 30h, 31h, 32h, 33h, 34h, 35h, 36h, 37h</span><br><span class="line">          db 38h, 39h, 41h, 42h, 43h, 44h, 45h, 46h</span><br><span class="line">    x db 13 ; 查询十进制数13</span><br><span class="line">    ascii db ?</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code, ds:data</span><br><span class="line">begin: </span><br><span class="line">mov ax, data</span><br><span class="line">    mov ds, ax</span><br><span class="line">    mov bl, x   ;x是字节数，因此放入bl寄存器（bx寄存器的低位）</span><br><span class="line">    mov bh, 0   ;bx的高位清零</span><br><span class="line">    mov al,table[bx]    ;源操作数为相对寄存器寻址</span><br><span class="line">    mov ascii, al</span><br><span class="line">    mov dl, al</span><br><span class="line">    mov ah, 02h     ;显示这个十六进制数</span><br><span class="line">    int 21h</span><br><span class="line">    mov ah, 4ch</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end begin</span><br></pre></td></tr></table></figure><h2 id="两个双精度数加法">两个双精度数加法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">; 4-4.asm 两个双精度数加法</span><br><span class="line">data segment    </span><br><span class="line">    dd 20034980h</span><br><span class="line">    dd 1008e699h</span><br><span class="line">    dd ?</span><br><span class="line">data ends</span><br><span class="line">code segment    </span><br><span class="line">    assume cs:code, ds:data</span><br><span class="line">start: </span><br><span class="line">    mov ax, data</span><br><span class="line">    mov ds, ax</span><br><span class="line">    mov ax, ds:[0]</span><br><span class="line">    mov dx, ds:[2]</span><br><span class="line">    mov bx, ds:[4]</span><br><span class="line">    mov cx, ds:[6]</span><br><span class="line">    add ax, bx  ; 低字相加</span><br><span class="line">    adc dx, cx  ; 高字带进位加</span><br><span class="line">    mov ds:[8], ax ; 将结果存放在数据段中</span><br><span class="line">    mov ds:[10], dx</span><br><span class="line">    mov ah, 4ch</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h2 id="分支程序设计5-1">分支程序设计5-1</h2><p>按照如下公式编写汇编代码，实现输入x并输出对应的y <span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -3.828ex;" xmlns="http://www.w3.org/2000/svg" width="25.444ex" height="8.787ex" role="img" focusable="false" viewBox="0 -2192 11246.1 3883.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(767.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mrow" transform="translate(1823.6,0)"><g data-mml-node="mo"><path data-c="23A7" d="M712 899L718 893V876V865Q718 854 704 846Q627 793 577 710T510 525Q510 524 509 521Q505 493 504 349Q504 345 504 334Q504 277 504 240Q504 -2 503 -4Q502 -8 494 -9T444 -10Q392 -10 390 -9Q387 -8 386 -5Q384 5 384 230Q384 262 384 312T383 382Q383 481 392 535T434 656Q510 806 664 892L677 899H712Z" transform="translate(0,1293)"></path><path data-c="23A9" d="M718 -893L712 -899H677L666 -893Q542 -825 468 -714T385 -476Q384 -466 384 -282Q384 3 385 5L389 9Q392 10 444 10Q486 10 494 9T503 4Q504 2 504 -239V-310V-366Q504 -470 508 -513T530 -609Q546 -657 569 -698T617 -767T661 -812T699 -843T717 -856T718 -876V-893Z" transform="translate(0,-793)"></path><path data-c="23A8" d="M389 1159Q391 1160 455 1160Q496 1160 498 1159Q501 1158 502 1155Q504 1145 504 924Q504 691 503 682Q494 549 425 439T243 259L229 250L243 241Q349 175 421 66T503 -182Q504 -191 504 -424Q504 -600 504 -629T499 -659H498Q496 -660 444 -660T390 -659Q387 -658 386 -655Q384 -645 384 -425V-282Q384 -176 377 -116T342 10Q325 54 301 92T255 155T214 196T183 222T171 232Q170 233 170 250T171 268Q171 269 191 284T240 331T300 407T354 524T383 679Q384 691 384 925Q384 1152 385 1155L389 1159Z" transform="translate(0,0)"></path><svg width="889" height="323" y="1060" x="0" viewBox="0 56.9 889 323"><path data-c="23AA" d="M384 150V266Q384 304 389 309Q391 310 455 310Q496 310 498 309Q502 308 503 298Q504 283 504 150Q504 32 504 12T499 -9H498Q496 -10 444 -10T390 -9Q386 -8 385 2Q384 17 384 150Z" transform="scale(1,1.588)"></path></svg><svg width="889" height="323" y="-883" x="0" viewBox="0 56.9 889 323"><path data-c="23AA" d="M384 150V266Q384 304 389 309Q391 310 455 310Q496 310 498 309Q502 308 503 298Q504 283 504 150Q504 32 504 12T499 -9H498Q496 -10 444 -10T390 -9Q386 -8 385 2Q384 17 384 150Z" transform="scale(1,1.588)"></path></svg></g><g data-mml-node="mtable" transform="translate(889,0)"><g data-mml-node="mtr" transform="translate(0,1358)"><g data-mml-node="mtd" transform="translate(892.9,0)"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g><g data-mml-node="mtd" transform="translate(4961.2,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(849.8,0)"><path data-c="3C" d="M694 -11T694 -19T688 -33T678 -40Q671 -40 524 29T234 166L90 235Q83 240 83 250Q83 261 91 266Q664 540 678 540Q681 540 687 534T694 519T687 505Q686 504 417 376L151 250L417 124Q686 -4 687 -5Q694 -11 694 -19Z"></path></g><g data-mml-node="mn" transform="translate(1905.6,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g><g data-mml-node="mtr" transform="translate(0,-42)"><g data-mml-node="mtd"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(1294.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(2294.4,0)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mtd" transform="translate(3794.4,0)"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(777.8,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mi" transform="translate(1833.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(2683.3,0)"><path data-c="3C" d="M694 -11T694 -19T688 -33T678 -40Q671 -40 524 29T234 166L90 235Q83 240 83 250Q83 261 91 266Q664 540 678 540Q681 540 687 534T694 519T687 505Q686 504 417 376L151 250L417 124Q686 -4 687 -5Q694 -11 694 -19Z"></path></g><g data-mml-node="mn" transform="translate(3739.1,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g></g></g><g data-mml-node="mtr" transform="translate(0,-1442)"><g data-mml-node="mtd" transform="translate(611.2,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(572,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(1072,0)"><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></g></g><g data-mml-node="mtd" transform="translate(4711.2,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(849.8,0)"><path data-c="2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mn" transform="translate(1905.6,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g></g></g></g><g data-mml-node="mo" transform="translate(9422.6,0) translate(0 250)"></g></g></g></g></svg></mjx-container></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x dw 9,-6,34</span><br><span class="line">    y dw 3 dup(?)</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code, ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data</span><br><span class="line">    mov ds,ax</span><br><span class="line">    mov cx,3;循环三次</span><br><span class="line">    mov si,0</span><br><span class="line">let0:</span><br><span class="line">    mov ax,x[si];取出x</span><br><span class="line">    cmp ax,0;x&gt;=0?</span><br><span class="line">    jge let1;是，转到let1</span><br><span class="line">    mov bx,ax;否，计算x*x</span><br><span class="line">    imul bx;</span><br><span class="line">    jmp out1;跳到公共出口out1</span><br><span class="line">let1:</span><br><span class="line">    cmp ax,10;x&gt;=10?</span><br><span class="line">    jge let2;是，转到let2</span><br><span class="line">    sal ax,1;否，计算2x+3</span><br><span class="line">    add ax,3;</span><br><span class="line">    jmp out1;跳到公共出口out1</span><br><span class="line">let2:</span><br><span class="line">    mov bl,6;计算x/6</span><br><span class="line">    idiv bl;商在al，余数在ah</span><br><span class="line">out1:</span><br><span class="line">    mov y[si],ax;保存y</span><br><span class="line">    add si,2;</span><br><span class="line">    dec cx;cx减1</span><br><span class="line">    cmp cx,0;</span><br><span class="line">    jnz let0;cx!=0转移到let0</span><br><span class="line">    mov ah,4ch;cx=0程序结束</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/5-1.png" class="" title="5-1"><h2 id="分支程序设计5-2">分支程序设计5-2</h2><p>计算<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="11.579ex" height="1.971ex" role="img" focusable="false" viewBox="0 -666 5118 871"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(767.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1823.6,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g><g data-mml-node="mi" transform="translate(2323.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(3117.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(4118,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(500,0)"></path></g></g></g></svg></mjx-container></span>，如果结果为负，求绝对值。并显示十进制结果。</p><p>实际上结果就是<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.564ex;" xmlns="http://www.w3.org/2000/svg" width="12.837ex" height="2.26ex" role="img" focusable="false" viewBox="0 -749.5 5674 999"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(767.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(1823.6,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mn" transform="translate(2101.6,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g><g data-mml-node="mi" transform="translate(2601.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(3395.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(4396,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(5396,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g></g></g></svg></mjx-container></span>，直接计算结果就行。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x db ?</span><br><span class="line">    y dw ?</span><br><span class="line">    info db 'input: $'</span><br><span class="line">    cc db 0ah,0dh,'y = $'</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov dx,offset info;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1;</span><br><span class="line">    int 21h;</span><br><span class="line">    sub al,30h;</span><br><span class="line">    mov bl,5;</span><br><span class="line">    imul bl;</span><br><span class="line">    sub ax,18;</span><br><span class="line">    jns let0;</span><br><span class="line">    neg ax;</span><br><span class="line">let0:</span><br><span class="line">    mov y,ax;</span><br><span class="line">    mov cx,0;</span><br><span class="line">    mov bx,10;</span><br><span class="line">let1:</span><br><span class="line">    mov dx,0;</span><br><span class="line">    inc cx;</span><br><span class="line">    idiv bx;</span><br><span class="line">    push dx;</span><br><span class="line">    cmp ax,0;</span><br><span class="line">    jnz let1;</span><br><span class="line">    mov dx,offset cc;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h</span><br><span class="line">let2:</span><br><span class="line">    pop ax;</span><br><span class="line">    add ax,0030h;</span><br><span class="line">    mov dl,al;</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    dec cx;</span><br><span class="line">    cmp cx,0;</span><br><span class="line">    jnz let2;</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/5-2.png" class="" title="5-2"><h2 id="分支程序设计5-3">分支程序设计5-3</h2><p>从键盘输入一串字符，如果是数字存入NUMB单元，如果是字母，将大写字母存入CAPI单元，小写字母存入LETT单元，分别统计个数，输入回车时退出。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    numb db 10 dup(?);</span><br><span class="line">    capi db 10 dup(?);</span><br><span class="line">    lett db 10 dup(?);</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">let0:</span><br><span class="line">    mov ah,1; 键盘输入</span><br><span class="line">    int 21h;</span><br><span class="line">    cmp al,0dh; 判断回车</span><br><span class="line">    jz exit;</span><br><span class="line">    test al,40h; 用于区分字母和数字，第6位</span><br><span class="line">    jz let1;</span><br><span class="line">    test al,20h; 用于区分大小写字母，第5位</span><br><span class="line">    jz let2;</span><br><span class="line">    cmp al,7ah; 排除不是小写字母</span><br><span class="line">    ja exit;</span><br><span class="line">    mov lett[bx],al;</span><br><span class="line">    inc bx; 小写个数加1</span><br><span class="line">    jmp let0;</span><br><span class="line">let2:</span><br><span class="line">    cmp al,5ah;</span><br><span class="line">    ja exit;</span><br><span class="line">    mov capi[si],al;</span><br><span class="line">    inc si; 大写个数加1</span><br><span class="line">    jmp let0;</span><br><span class="line">let1:</span><br><span class="line">    cmp al,'0';</span><br><span class="line">    jb exit;</span><br><span class="line">    cmp al,'9';</span><br><span class="line">    ja exit;</span><br><span class="line">    mov numb[di],al;</span><br><span class="line">    inc di; 数字个数加1</span><br><span class="line">    jmp let0;</span><br><span class="line">exit:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/5-3.png" class="" title="5-3"><h2 id="分支程序设计5-4">分支程序设计5-4</h2><p>输入字符串，小写转大写</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    mess1 db 0ah,0dh,'input:$';</span><br><span class="line">    mess2 db 0ah,0dh,'output:$';</span><br><span class="line">    buff db 10,?,10 dup(?);</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">prog1:</span><br><span class="line">    mov dx,offset mess1; 显示提示1</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dx,offset buff; 输入字符串</span><br><span class="line">    mov ah,10;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov cl,buff+1; 实际输入的字母个数</span><br><span class="line">    mov bx,2; 第一个字母的地址</span><br><span class="line">    mov dx,offset mess2; 显示提示2</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">let1:</span><br><span class="line">    and buff[bx],0dfh; 小写字母变为大写</span><br><span class="line">    mov dl,buff[bx]; 循环显示每个字母</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    inc bx;</span><br><span class="line">    dec cl;</span><br><span class="line">    jnz let1;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230418093005059.png" class="" title="image-20230418093005059"><h2 id="分支程序设计5-5">分支程序设计5-5</h2><p>输入一个数字<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.294ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 572 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g></svg></mjx-container></span>，输出它的十进制<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.282ex" height="1.91ex" role="img" focusable="false" viewBox="0 -833.2 1008.6 844.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g></g></g></svg></mjx-container></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    mess1 db 0ah,0dh,'input:$';</span><br><span class="line">    mess2 db 0ah,0dh,'output:$';</span><br><span class="line">    x db 3 dup(?);</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">let0:</span><br><span class="line">    ;显示mess1</span><br><span class="line">    mov dx,offset mess1; </span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    ;输入0~9</span><br><span class="line">    mov ah,1; </span><br><span class="line">    int 21h;</span><br><span class="line">    ;输入判断</span><br><span class="line">    cmp al,27; 判断是不是esc，是则退出</span><br><span class="line">    jz out1;</span><br><span class="line">    cmp al,'0'; 判断输入的是不是个数字</span><br><span class="line">    jb let0;</span><br><span class="line">    cmp al,'9';</span><br><span class="line">    ja let0;</span><br><span class="line">    </span><br><span class="line">    and al,0fh; 去掉ASCII码</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,al; 求m³，结果存在al中</span><br><span class="line">    mul bl;</span><br><span class="line">    mul bl; </span><br><span class="line">    mov bl,10; 立方变为10进制</span><br><span class="line">    div bl; ah存商，al存余数</span><br><span class="line">    add ah,30h; </span><br><span class="line">    mov x,ah; 先用x保存个位</span><br><span class="line">    </span><br><span class="line">    cmp al,10; 判断余数是不是大于10；</span><br><span class="line">    jb let2;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    div bl;</span><br><span class="line">    add ah,30h;</span><br><span class="line">    mov x+1,ah;</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov x+2,al;</span><br><span class="line">    jmp let3;</span><br><span class="line">let2:</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov x+1,al;</span><br><span class="line">let3:</span><br><span class="line">    mov ax,0;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    mov dx,offset mess2; 显示mess2</span><br><span class="line">    int 21h;</span><br><span class="line"></span><br><span class="line">    mov dl,x+2; 显示立方</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl,x+1;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl,x;</span><br><span class="line">    int 21h;</span><br><span class="line"></span><br><span class="line">    mov word ptr x,0; 单元清零，初始化</span><br><span class="line">    mov word ptr x+2,0;</span><br><span class="line">    jmp let0;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230418092859108.png" class="" title="image-20230418092859108"><h2 id="分支程序设计5-8">分支程序设计5-8</h2><p>设计菜单程序，实现三个功能：</p><ul><li>小写字母转换大小写</li><li>计算立方值</li><li>退出</li></ul><p>设计思路：</p><ol type="1"><li>在数据段中定义菜单。每行换行显示；</li><li>用9号功能显示菜单；</li><li>根据输入选择执行某段程序</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    mess0 db 0ah,0dh,'1.input string'</span><br><span class="line">          db 0ah,0dh,'2.calculate cube'</span><br><span class="line">          db 0ah,0dh,'3.exit'</span><br><span class="line">          db 0ah,0dh,'select: $'</span><br><span class="line">    mess1 db 0ah,0dh,'input: $'</span><br><span class="line">    mess2 db 0ah,0dh,'output: $'</span><br><span class="line">    buff db 10,?,10 dup(?)</span><br><span class="line">    x db 3 dup(?)</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume ds:data,cs:code</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">let0:</span><br><span class="line">    mov dx,offset mess0; 显示菜单</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1; 输入选择</span><br><span class="line">    int 21h;</span><br><span class="line">    cmp al,'1';</span><br><span class="line">    jz prog1;</span><br><span class="line">    cmp al,'2';</span><br><span class="line">    jz prog2;</span><br><span class="line">    jmp prog3;</span><br><span class="line">prog1:</span><br><span class="line">    ; 5-4.asm 程序部分</span><br><span class="line">    ; 输入英文单词，将小写字母转换为大写</span><br><span class="line">    mov dx,offset mess1; 显示提示1</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dx,offset buff; 输入字符串</span><br><span class="line">    mov ah,10;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov cl,buff+1; 实际输入的字母个数</span><br><span class="line">    mov bx,2; 第一个字母的地址</span><br><span class="line">    mov dx,offset mess2; 显示提示2</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">let1:</span><br><span class="line">    and buff[bx],0dfh; 小写字母变为大写</span><br><span class="line">    mov dl,buff[bx]; 循环显示每个字母</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    inc bx;</span><br><span class="line">    dec cl;</span><br><span class="line">    jnz let1;</span><br><span class="line">    jmp let0;</span><br><span class="line">prog2:</span><br><span class="line">    ; 5-5.asm 程序部分</span><br><span class="line">    ; 计算0~9立方值</span><br><span class="line">    ;显示mess1</span><br><span class="line">    mov dx,offset mess1; </span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    ;输入0~9</span><br><span class="line">    mov ah,1; </span><br><span class="line">    int 21h;</span><br><span class="line">    ;输入判断</span><br><span class="line">    cmp al,27; 判断是不是esc，是则退出</span><br><span class="line">    jz prog3;</span><br><span class="line">    cmp al,'0'; 判断输入的是不是个数字</span><br><span class="line">    jb let0;</span><br><span class="line">    cmp al,'9';</span><br><span class="line">    ja let0;</span><br><span class="line">    </span><br><span class="line">    and al,0fh; 去掉ASCII码</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,al; 求m³，结果存在al中</span><br><span class="line">    mul bl;</span><br><span class="line">    mul bl; </span><br><span class="line">    mov bl,10; 立方变为10进制</span><br><span class="line">    div bl; ah存商，al存余数</span><br><span class="line">    add ah,30h; </span><br><span class="line">    mov x,ah; 先用x保存个位</span><br><span class="line">    </span><br><span class="line">    cmp al,10; 判断余数是不是大于10；</span><br><span class="line">    jb let2;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    div bl;</span><br><span class="line">    add ah,30h;</span><br><span class="line">    mov x+1,ah;</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov x+2,al;</span><br><span class="line">    jmp let3;</span><br><span class="line">let2:</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov x+1,al;</span><br><span class="line">let3:</span><br><span class="line">    mov ax,0;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    mov dx,offset mess2; 显示mess2</span><br><span class="line">    int 21h;</span><br><span class="line"></span><br><span class="line">    mov dl,x+2; 显示立方</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl,x+1;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl,x;</span><br><span class="line">    int 21h;</span><br><span class="line"></span><br><span class="line">    mov word ptr x,0; 单元清零，初始化</span><br><span class="line">    mov word ptr x+2,0;</span><br><span class="line">    jmp let0;</span><br><span class="line">prog3:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230422171057146.png" class="" title="image-20230422171057146"><h2 id="分支程序设计5-9">分支程序设计5-9</h2><p>输入1，计算并显示<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="9.238ex" height="1.783ex" role="img" focusable="false" viewBox="0 -583 4083 788"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D467" d="M347 338Q337 338 294 349T231 360Q211 360 197 356T174 346T162 335T155 324L153 320Q150 317 138 317Q117 317 117 325Q117 330 120 339Q133 378 163 406T229 440Q241 442 246 442Q271 442 291 425T329 392T367 375Q389 375 411 408T434 441Q435 442 449 442H462Q468 436 468 434Q468 430 463 420T449 399T432 377T418 358L411 349Q368 298 275 214T160 106L148 94L163 93Q185 93 227 82T290 71Q328 71 360 90T402 140Q406 149 409 151T424 153Q443 153 443 143Q443 138 442 134Q425 72 376 31T278 -11Q252 -11 232 6T193 40T155 57Q111 57 76 -3Q70 -11 59 -11H54H41Q35 -5 35 -2Q35 13 93 84Q132 129 225 214T340 322Q352 338 347 338Z"></path></g><g data-mml-node="mo" transform="translate(742.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(1798.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(2592.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(3593,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>；输入2，则将输入的字母改变大小写；输入0则退出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    table dw prog0,prog1,prog2,prog0;</span><br><span class="line">    mess1 db 0ah,0dh,'input(0~2):$';</span><br><span class="line">    mess2 db 0ah,0dh,'z = x + y = $';</span><br><span class="line">    x db 3;</span><br><span class="line">    y db 6;</span><br><span class="line">    z db ?;</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">let0:;</span><br><span class="line">    mov dx,offset mess1;</span><br><span class="line">    mov ah,9; 显示输入信息</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1; 键盘输入分支选择</span><br><span class="line">    int 21h;</span><br><span class="line">    and al,03h; 保留al最低2位，其余位清0</span><br><span class="line">    mov ah,0;</span><br><span class="line">    shl ax,1; 左移1位，计算分支表地址</span><br><span class="line">    mov bx,ax;</span><br><span class="line">    jmp table[bx]; 按分支表转移</span><br><span class="line">prog1:</span><br><span class="line">    mov dx,offset mess2;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov al,x;</span><br><span class="line">    add al,y;</span><br><span class="line">    mov z,al; z = x + y</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov dl,al;</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    jmp let0; 返回菜单</span><br><span class="line">prog2:</span><br><span class="line">    mov dl,0ah; 换行</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1; 输入字母</span><br><span class="line">    int 21h;</span><br><span class="line">    test al,20h;</span><br><span class="line">    jz let1; 是大写</span><br><span class="line">    and al,0dfh; 小写转大写</span><br><span class="line">    jmp let2;</span><br><span class="line">let1:</span><br><span class="line">    or al,20h;</span><br><span class="line">let2:</span><br><span class="line">    mov dl,al;</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    jmp let0;</span><br><span class="line">prog0:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230422165039155.png" class="" title="image-20230422165039155"><h2 id="section">5-27</h2><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212318609.png" class="" title="image-20230424212318609"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x db -1</span><br><span class="line">    y db ?</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    cmp x,0;</span><br><span class="line">    jge let0;</span><br><span class="line">    mov al,x;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,4;</span><br><span class="line">    imul bl;</span><br><span class="line">    mov y,al;</span><br><span class="line">    jmp out1;</span><br><span class="line">let0:</span><br><span class="line">    cmp x,0;</span><br><span class="line">    je let1;</span><br><span class="line">    mov al,x;</span><br><span class="line">    mov bl,3;</span><br><span class="line">    add al,bl;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,2;</span><br><span class="line">    idiv bl;</span><br><span class="line">    mov y,ah;</span><br><span class="line">    jmp out1;</span><br><span class="line">let1:</span><br><span class="line">    mov y,0;</span><br><span class="line">    jmp out1;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212535453.png" class="" title="image-20230424212535453"><h2 id="section-1">5-28</h2><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212330880.png" class="" title="image-20230424212330880"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x db 2</span><br><span class="line">    y db 32</span><br><span class="line">    z db ?</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    cmp x,0;</span><br><span class="line">    jge let0;</span><br><span class="line">    mov bl,0;</span><br><span class="line">    sub bl,x;</span><br><span class="line">    mov z,bl;</span><br><span class="line">    jmp out1;</span><br><span class="line">let0:</span><br><span class="line">    mov al,x;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,4;</span><br><span class="line">    imul bl;</span><br><span class="line">    mov cx,ax;</span><br><span class="line">    mov al,y;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,16;</span><br><span class="line">    idiv bl;</span><br><span class="line">    sub cl,al;</span><br><span class="line">    mov z,cl;</span><br><span class="line">    jmp out1;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212540030.png" class="" title="image-20230424212540030"><h2 id="section-2">5-29</h2><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212409057.png" class="" title="image-20230424212409057"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    M dw -4,-3,-2,-1,0,1,2,3,4,5</span><br><span class="line">    posi db 0</span><br><span class="line">    nega db 0</span><br><span class="line">    zero db 0</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov si,0;</span><br><span class="line">    mov cx,10;</span><br><span class="line">let0:</span><br><span class="line">    mov ax,M[si];</span><br><span class="line">    cmp ax,0;</span><br><span class="line">    jge let1;</span><br><span class="line">    mov bl,nega;</span><br><span class="line">    inc bl;</span><br><span class="line">    mov nega,bl;</span><br><span class="line">    jmp out1;</span><br><span class="line">let1:</span><br><span class="line">    cmp ax,0;</span><br><span class="line">    je let2;</span><br><span class="line">    mov bl,posi;</span><br><span class="line">    inc bl;</span><br><span class="line">    mov posi,bl;</span><br><span class="line">    jmp out1;</span><br><span class="line">let2:</span><br><span class="line">    mov bl,zero;</span><br><span class="line">    inc bl;</span><br><span class="line">    mov zero,bl;</span><br><span class="line">    jmp out1;</span><br><span class="line">out1:</span><br><span class="line">    add si,2;</span><br><span class="line">    dec cx;</span><br><span class="line">    cmp cx,0;</span><br><span class="line">    jnz let0;</span><br><span class="line">out2:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212543874.png" class="" title="image-20230424212543874"><h2 id="section-3">5-30</h2><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212430592.png" class="" title="image-20230424212430592"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    info db 'input: $'</span><br><span class="line">    buf db 50 dup(0)</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov si,0;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    mov dx,offset info;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1;</span><br><span class="line">let0:</span><br><span class="line">    int 21h;</span><br><span class="line">    cmp al,20h;</span><br><span class="line">    je let1;</span><br><span class="line">    mov buf[si],al;</span><br><span class="line">    inc si;</span><br><span class="line">    jmp let0;</span><br><span class="line">let1:</span><br><span class="line">    mov buf[si],'$';</span><br><span class="line">    jmp out1;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212548592.png" class="" title="image-20230424212548592"><h2 id="section-4">5-31</h2><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212454482.png" class="" title="image-20230424212454482"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212502000.png" class="" title="image-20230424212502000"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">code segment</span><br><span class="line">    assume cs:code</span><br><span class="line">start:</span><br><span class="line">    mov ax,1234h;</span><br><span class="line">    mov bx,ax;</span><br><span class="line">    and al,0fh;</span><br><span class="line">    and bl,0f0h;</span><br><span class="line">    and ah,0fh;</span><br><span class="line">    mov cl,ah;</span><br><span class="line">    and bh,0f0h;</span><br><span class="line">    mov dl,bh;</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212552398.png" class="" title="image-20230424212552398">]]></content>
      
      
      
        <tags>
            
            <tag> Assembly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】Chainlink Any API</title>
      <link href="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/"/>
      <url>/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在Chainlink官方文档中，<strong>AnyAPI</strong>提及了获取多元链下数据的方式，包括uint256，int256，bool，string，bytes32和bytes六种类型。本文将对单元请求、多元请求、数组请求、大型请求的对应操作进行模拟。</p><p>官方文档的写法：</p><ul><li>Single Word Response</li><li>Multi-Variable Responses</li><li>Array Response</li><li>Large Response</li></ul><p><del>翻译可能不准确，那不管了</del></p><p>不仅如此，Chainlink节点的Job充当了一个辅助预言机节点监听智能合约时间的角色。当用户调用智能合约的请求函数时，请求函数体中会emit一个event事件，从而使预言机节点能够监听到这个event并根据Job的规定作出相应的回应。</p><p>部署合约关键在于指定JobId、LinkToken Address、OperatorAddress和API，但Chainlink官网文档的合约并没有明确指明这四个字段的内容，因此我对他们进行了一些修改，以方便以后修改数据。</p><p>代码可以参考<ahref="https://docs.chain.link/any-api/get-request/introduction">Make aGET Request | Chainlink Documentation</a></p><p>JOB的toml文件怎么写可以参考<ahref="https://docs.chain.link/chainlink-nodes/oracle-jobs/job-types/direct_request">DirectRequest Jobs | Chainlink Documentation</a></p><h2 id="single-word-response">Single Word Response</h2><p>针对单一属性数据的请求，可以在命令行执行以下命令来模拟：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -X <span class="string">&#x27;GET&#x27;</span> \</span><br><span class="line">  <span class="string">&#x27;https://min-api.cryptocompare.com/data/pricemultifull?fsyms=ETH&amp;tsyms=USD&#x27;</span> \</span><br><span class="line">  -H <span class="string">&#x27;accept: application/json&#x27;</span></span><br></pre></td></tr></table></figure><p>你将得到像这样的JSON文件：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;RAW&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ETH&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;USD&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;TYPE&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MARKET&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CCCAGG&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;FROMSYMBOL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ETH&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;TOSYMBOL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;USD&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;FLAGS&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2049&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;PRICE&quot;</span><span class="punctuation">:</span> <span class="number">2867.04</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTUPDATE&quot;</span><span class="punctuation">:</span> <span class="number">1650896942</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MEDIAN&quot;</span><span class="punctuation">:</span> <span class="number">2866.2</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTVOLUME&quot;</span><span class="punctuation">:</span> <span class="number">0.16533939</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTVOLUMETO&quot;</span><span class="punctuation">:</span> <span class="number">474.375243849</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTTRADEID&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1072154517&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;VOLUMEDAY&quot;</span><span class="punctuation">:</span> <span class="number">195241.78281014622</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;VOLUMEDAYTO&quot;</span><span class="punctuation">:</span> <span class="number">556240560.4621655</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;VOLUME24HOUR&quot;</span><span class="punctuation">:</span> <span class="number">236248.94641103</span><span class="punctuation">,</span></span><br><span class="line">        ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>那么我可以获取其中的某个单一字段的数据，比如<code>"VOLUME24HOUR"</code>。以下是获取单一数据的Job和示例合约。</p><h3 id="job">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;Get &gt; Uint256 - (TOML) test&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    multiply     [type=&quot;multiply&quot; input=&quot;$(parse)&quot; times=&quot;$(decode_cbor.times)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, uint256 value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(multiply) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; multiply -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract <span class="title class_">APIConsumer</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    uint256 public volume;</span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;97a63b405f35442abf8c84df1b31ed7c&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi = <span class="string">&quot;https://min-api.cryptocompare.com/data/pricemultifull?fsyms=ETH&amp;tsyms=USD&quot;</span>;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestVolume</span>(bytes32 indexed requestId, uint256 volume);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(oracleAddress);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a Chainlink request to retrieve API response, find the target</span></span><br><span class="line"><span class="comment">     * data, then multiply by 1000000000000000000 (to remove decimal places from data).</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestVolumeData</span>(<span class="params"></span>) public returns (bytes32 requestId) &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfill</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the URL to perform the GET request on</span></span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            myApi</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the path to find the desired data in the API response, where the response format is:</span></span><br><span class="line">        <span class="comment">// &#123;&quot;RAW&quot;:</span></span><br><span class="line">        <span class="comment">//   &#123;&quot;ETH&quot;:</span></span><br><span class="line">        <span class="comment">//    &#123;&quot;USD&quot;:</span></span><br><span class="line">        <span class="comment">//     &#123;</span></span><br><span class="line">        <span class="comment">//      &quot;VOLUME24HOUR&quot;: xxx.xxx,</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">//    &#125;</span></span><br><span class="line">        <span class="comment">//   &#125;</span></span><br><span class="line">        <span class="comment">//  &#125;</span></span><br><span class="line">        <span class="comment">// request.add(&quot;path&quot;, &quot;RAW.ETH.USD.VOLUME24HOUR&quot;); // Chainlink nodes prior to 1.0.0 support this format</span></span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;RAW,ETH,USD,VOLUME24HOUR&quot;</span>); <span class="comment">// Chainlink nodes 1.0.0 and later support this format</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Multiply the result by 1000000000000000000 to remove decimals</span></span><br><span class="line">        int256 timesAmount = <span class="number">10</span> ** <span class="number">18</span>;</span><br><span class="line">        req.<span class="title function_">addInt</span>(<span class="string">&quot;times&quot;</span>, timesAmount);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Sends the request</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">sendChainlinkRequest</span>(req, fee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Receive the response in the form of uint256</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfill</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        uint256 _volume</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">_requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestVolume</span>(_requestId, _volume);</span><br><span class="line">        volume = _volume;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>部署的合约地址为：0x9fAC2f4D6a039e4A0740314543B087c51f29cAE9，随后使用LinkToken合约向该合约转账0.5个LINK。</p><p>整理以上地址信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobid: 97a63b405f35442abf8c84df1b31ed7c</span><br><span class="line">APIConsumer: 0x9fAC2f4D6a039e4A0740314543B087c51f29cAE9</span><br></pre></td></tr></table></figure><p>调用<code>requestVolumeData</code>函数，请求链下API的<code>VOLUME24HOUR</code>，查看ChainlinkOperator控制台情况。</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/chainlink_single_word_response.png" class="" title="chainlink_single_word_response"><p>调用<code>Volume</code>函数即可查看返回值</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/remix_single_word_response-16814552111081.png" class="" title="remix_single_word_response"><h2 id="multi-variable-responses">Multi-Variable Responses</h2><p>这里我们申请多个数据类型为uint256的数据。废话不多说，直接放出job和合约代码</p><h3 id="job-1">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;multi-word(TOML)&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor</span></span><br><span class="line"><span class="string">    decode_cbor -&gt; btc</span></span><br><span class="line"><span class="string">    decode_cbor -&gt; usd</span></span><br><span class="line"><span class="string">    decode_cbor -&gt; eur</span></span><br><span class="line"><span class="string">    btc          [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.urlBTC)&quot; allowunrestrictednetworkaccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    btc_parse    [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.pathBTC)&quot; data=&quot;$(btc)&quot;]</span></span><br><span class="line"><span class="string">    btc_multiply [type=&quot;multiply&quot; input=&quot;$(btc_parse)&quot;, times=&quot;100000&quot;]</span></span><br><span class="line"><span class="string">    btc -&gt; btc_parse -&gt; btc_multiply</span></span><br><span class="line"><span class="string">    usd          [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.urlUSD)&quot; allowunrestrictednetworkaccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    usd_parse    [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.pathUSD)&quot; data=&quot;$(usd)&quot;]</span></span><br><span class="line"><span class="string">    usd_multiply [type=&quot;multiply&quot; input=&quot;$(usd_parse)&quot;, times=&quot;100000&quot;]</span></span><br><span class="line"><span class="string">    usd -&gt; usd_parse -&gt; usd_multiply</span></span><br><span class="line"><span class="string">    eur          [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.urlEUR)&quot; allowunrestrictednetworkaccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    eur_parse    [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.pathEUR)&quot; data=&quot;$(eur)&quot;]</span></span><br><span class="line"><span class="string">    eurs_multiply [type=&quot;multiply&quot; input=&quot;$(eur_parse)&quot;, times=&quot;100000&quot;]</span></span><br><span class="line"><span class="string">    eur -&gt; eur_parse -&gt; eurs_multiply</span></span><br><span class="line"><span class="string">    btc_multiply -&gt; encode_mwr</span></span><br><span class="line"><span class="string">    usd_multiply -&gt; encode_mwr</span></span><br><span class="line"><span class="string">    eurs_multiply -&gt; encode_mwr</span></span><br><span class="line"><span class="string">    // MWR API does NOT auto populate the requestID.</span></span><br><span class="line"><span class="string">    encode_mwr [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                abi=&quot;(bytes32 requestId, uint256 _btc, uint256 _usd, uint256 _eurs)&quot;</span></span><br><span class="line"><span class="string">                data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;_btc\\&quot;: $(btc_multiply), \\&quot;_usd\\&quot;: $(usd_multiply), \\&quot;_eurs\\&quot;: $(eurs_multiply)&#125;&quot;</span></span><br><span class="line"><span class="string">                ]</span></span><br><span class="line"><span class="string">    encode_tx  [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_mwr)&#125;&quot;</span></span><br><span class="line"><span class="string">                ]</span></span><br><span class="line"><span class="string">    submit_tx  [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string">    encode_mwr -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract-1">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract <span class="title class_">MultiWordConsumer</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// multiple params returned in a single oracle response</span></span><br><span class="line">    uint256 public btc;</span><br><span class="line">    uint256 public usd;</span><br><span class="line">    uint256 public eur;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;6073eaa7c1c14e77aef5f9fd8c96eccb&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi1 = <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=BTC&quot;</span>;</span><br><span class="line">    string myApi2 = <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=USD&quot;</span>;</span><br><span class="line">    string myApi3 = <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=EUR&quot;</span>;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestMultipleFulfilled</span>(</span><br><span class="line">        bytes32 indexed requestId,</span><br><span class="line">        uint256 btc,</span><br><span class="line">        uint256 usd,</span><br><span class="line">        uint256 eur</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Initialize the link token and target oracle</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> The oracle address must be an Operator contract for multiword response</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * Sepolia Testnet details:</span></span><br><span class="line"><span class="comment">     * Link Token: 0x779877A7B0D9E8603169DdbD7836e478b4624789</span></span><br><span class="line"><span class="comment">     * Oracle: 0x6090149792dAAeE9D1D568c9f9a6F6B46AA29eFD (Chainlink DevRel)</span></span><br><span class="line"><span class="comment">     * jobId: 53f9755920cd451a8fe46f5087468395</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(<span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Request mutiple parameters from the oracle in a single transaction</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestMultipleParameters</span>(<span class="params"></span>) public &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfillMultipleParameters</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;urlBTC&quot;</span>,</span><br><span class="line">            myApi1</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;pathBTC&quot;</span>, <span class="string">&quot;BTC&quot;</span>);</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;urlUSD&quot;</span>,</span><br><span class="line">            myApi2</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;pathUSD&quot;</span>, <span class="string">&quot;USD&quot;</span>);</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;urlEUR&quot;</span>,</span><br><span class="line">            myApi3</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;pathEUR&quot;</span>, <span class="string">&quot;EUR&quot;</span>);</span><br><span class="line">        <span class="title function_">sendChainlinkRequest</span>(req, fee); <span class="comment">// MWR API.</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Fulfillment function for multiple parameters in a single request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> This is called by the oracle. recordChainlinkFulfillment must be used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfillMultipleParameters</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 requestId,</span></span><br><span class="line"><span class="params">        uint256 btcResponse,</span></span><br><span class="line"><span class="params">        uint256 usdResponse,</span></span><br><span class="line"><span class="params">        uint256 eurResponse</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestMultipleFulfilled</span>(</span><br><span class="line">            requestId,</span><br><span class="line">            btcResponse,</span><br><span class="line">            usdResponse,</span><br><span class="line">            eurResponse</span><br><span class="line">        );</span><br><span class="line">        btc = btcResponse;</span><br><span class="line">        usd = usdResponse;</span><br><span class="line">        eur = eurResponse;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>部署得到的合约地址：0xd214Ce7721dd13F32e59c45Fee97eA26d3f2aE94</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobId: 6073eaa7c1c14e77aef5f9fd8c96eccb</span><br><span class="line">MultiWordConsumer: 0xd214Ce7721dd13F32e59c45Fee97eA26d3f2aE94</span><br></pre></td></tr></table></figure><p>转LINK，调用函数，查看Chainlink Operator控制台</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/chainlink_multi_variables_responses.png" class="" title="chainlink_multi_variables_responses"><p>)</p><p>Remix</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/remix_multi_variables_responses.png" class="" title="remix_multi_variables_responses"><h2 id="array-response">Array Response</h2><p>针对JSON数据源是数组的情况，本例在添加path路径时指定了JSON路径。比如：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;0,id&quot;</span>); <span class="comment">// Chainlink nodes 1.0.0 and later support this format</span></span><br></pre></td></tr></table></figure><p>这次我们请求string类型的数据。</p><h3 id="job-2">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES HARDCODED VALUES FOR CLARITY.</span></span><br><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"># DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;Get &gt; String&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, string value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(parse) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract-2">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract <span class="title class_">FetchFromArray</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    string public id;</span><br><span class="line"></span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestFirstId</span>(bytes32 indexed requestId, string id);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;fdef9cbf8826404fa94d9e114ef28fb4&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi = <span class="string">&quot;https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&amp;per_page=10&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(oracleAddress);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a Chainlink request to retrieve API response, find the target</span></span><br><span class="line"><span class="comment">     * data which is located in a list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestFirstId</span>(<span class="params"></span>) public returns (bytes32 requestId) &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfill</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the URL to perform the GET request on</span></span><br><span class="line">        <span class="comment">// API docs: https://www.coingecko.com/en/api/documentation?</span></span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            myApi</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the path to find the desired data in the API response, where the response format is:</span></span><br><span class="line">        <span class="comment">// [&#123;</span></span><br><span class="line">        <span class="comment">//  &quot;id&quot;: &quot;bitcoin&quot;,</span></span><br><span class="line">        <span class="comment">//  &quot;symbol&quot;: btc&quot;,</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">//&#123;</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// .. &#125;]</span></span><br><span class="line">        <span class="comment">// request.add(&quot;path&quot;, &quot;0.id&quot;); // Chainlink nodes prior to 1.0.0 support this format</span></span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;0,id&quot;</span>); <span class="comment">// Chainlink nodes 1.0.0 and later support this format</span></span><br><span class="line">        <span class="comment">// Sends the request</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">sendChainlinkRequest</span>(req, fee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Receive the response in the form of string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfill</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        string memory _id</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">_requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestFirstId</span>(_requestId, _id);</span><br><span class="line">        id = _id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>整理地址信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobId: fdef9cbf8826404fa94d9e114ef28fb4</span><br><span class="line">FetchFromArray: 0x938F9cAdf3de9b36921E223dde4Ba3E3Cb535867</span><br></pre></td></tr></table></figure><p>调用函数，结果发现job的fetch处报<code>http request timed out or interrupted</code>，于是我点进了API链接，结果居然无法访问？</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/error_chainlink.png" class="" title="error_chainlink"><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/error_web.png" class="" title="error_web"><p>那没事了，我们可以试着换成另一个API让Chainlink预言机获取。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">newAPI: https://min-api.cryptocompare.com/data/pricemultifull?fsyms=ETH&amp;tsyms=USD</span><br><span class="line">path: &#x27;RAW,ETH,USD,LASTTRADEID&#x27;</span><br><span class="line">FetchFromArray: 0x27E14F41A461E9861e0948B702bDaaBC2121E1d5</span><br></pre></td></tr></table></figure><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/chainlink_fetch_string.png" class="" title="chainlink_fetch_string"><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/remix_fetch_string.png" class="" title="remix_fetch_string"><p>很难不怀疑这是API自身的问题......不过在后期我们还能用php手写一个API，这里我们不做演示。</p><h2 id="large-responses">Large Responses</h2><p>这里我们可以获取任意字节长度的数据，数据类型为Bytes。同理，根据上面的方法照样能得到我们想要的结果。这里不作演示。</p><h3 id="job-3">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES HARDCODED VALUES FOR CLARITY.</span></span><br><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"># DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;Get &gt; String&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, string value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(parse) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract-3">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract <span class="title class_">GenericLargeResponse</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// variable bytes(arbitrary-length raw byte data) returned in a single oracle response</span></span><br><span class="line">    bytes public data;</span><br><span class="line">    string public image_url;</span><br><span class="line"></span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;fdef9cbf8826404fa94d9e114ef28fb4&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi = <span class="string">&quot;https://ipfs.io/ipfs/QmZgsvrA1o1C8BGCrx6mHTqR1Ui1XqbCrtbMVrRLHtuPVD?filename=big-api-response.json&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(oracleAddress);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Request variable bytes from the oracle</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestBytes</span>(<span class="params"></span>) public &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfillBytes</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            myApi</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;image&quot;</span>);</span><br><span class="line">        <span class="title function_">sendChainlinkRequest</span>(req, fee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestFulfilled</span>(bytes32 indexed requestId, bytes indexed data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Fulfillment function for variable bytes</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> This is called by the oracle. recordChainlinkFulfillment must be used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfillBytes</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 requestId,</span></span><br><span class="line"><span class="params">        bytes memory bytesData</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestFulfilled</span>(requestId, bytesData);</span><br><span class="line">        data = bytesData;</span><br><span class="line">        image_url = <span class="title function_">string</span>(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结">总结</h2><p>根据Chainlink官方提供的获取多种数据类型的方法，我们能够通过任意的API从链上获取到我们想要的数据，并将他们运用到我们的合约逻辑中，实现数据的链上链下协同。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【算法】递归与递推</title>
      <link href="/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E9%80%92%E5%BD%92%E4%B8%8E%E9%80%92%E6%8E%A8/"/>
      <url>/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E9%80%92%E5%BD%92%E4%B8%8E%E9%80%92%E6%8E%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="递推与递归">递推与递归</h2><h3 id="递归实现指数型枚举">递归实现指数型枚举</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/94/">92.递归实现指数型枚举 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">16</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> st[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (u &gt; n) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (st[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    st[u] = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(u + <span class="number">1</span>);</span><br><span class="line">    st[u] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    st[u] = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(u + <span class="number">1</span>);</span><br><span class="line">    st[u] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="递归实现排列型枚举">递归实现排列型枚举</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/96/">94.递归实现排列型枚举 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 01:37:12</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> state[N];</span><br><span class="line"><span class="type">bool</span> used[N]; <span class="comment">// true表示用过 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (u &gt; n) &#123; <span class="comment">// 边界 </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, state[i]); <span class="comment">// 打印方案 </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;           </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 依次枚举每个分支，即当前位置可以填哪些数 </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!used[i]) &#123;</span><br><span class="line">            state[u] = i;</span><br><span class="line">            used[i] = <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">dfs</span> (u + <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 恢复现场</span></span><br><span class="line">            state[u] = <span class="number">0</span>;</span><br><span class="line">            used[i] = <span class="literal">false</span>; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="翻硬币">翻硬币</h3><p>原题链接：<ahref="https://www.acwing.com/problem/content/1210/">1208. 翻硬币 -AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">101</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">char</span> start[N], aim[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">turn</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (start[i] == <span class="string">&#x27;*&#x27;</span>) start[i] = <span class="string">&#x27;o&#x27;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (start[i] == <span class="string">&#x27;o&#x27;</span>) start[i] = <span class="string">&#x27;*&#x27;</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; start &gt;&gt; aim;</span><br><span class="line">    n = <span class="built_in">strlen</span>(start);</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (start[i] != aim[i]) &#123;</span><br><span class="line">            <span class="built_in">turn</span>(i), <span class="built_in">turn</span>(i + <span class="number">1</span>);</span><br><span class="line">            res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开关只按一次</span></span><br><span class="line"><span class="comment">// 顺序无关紧要 </span></span><br></pre></td></tr></table></figure><h3 id="飞行员兄弟">飞行员兄弟</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/118/">116.飞行员兄弟 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1. 枚举所有方案  0 ~ 2^16 - 1 每一个数看作一个16位的二进制数 </span></span><br><span class="line"><span class="comment">2. 按照该方案对所有灯泡进行操作</span></span><br><span class="line"><span class="comment">3. 判断灯泡是否全亮 =&gt; 记录方案 </span></span><br><span class="line"><span class="comment">O(n) = 2^16 * (16 * 7 + 16 + 16)</span></span><br><span class="line"><span class="comment">（1）步数最小 -- 记录</span></span><br><span class="line"><span class="comment">（2）字典序最小 -- 优先枚举标号小的，所得到的答案就是字典序最小的 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">0  1  2  3 </span></span><br><span class="line"><span class="comment">4  5  6  7</span></span><br><span class="line"><span class="comment">8  9  10 11</span></span><br><span class="line"><span class="comment">12 13 14 15 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> g[N][N], backup[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> x * <span class="number">4</span> + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">turn_one</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (g[x][y] == <span class="string">&#x27;+&#x27;</span>) g[x][y] = <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line"><span class="keyword">else</span> g[x][y] = <span class="string">&#x27;+&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">turn_all</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line"><span class="built_in">turn_one</span>(x, i);</span><br><span class="line"><span class="built_in">turn_one</span>(i, y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">turn_one</span>(x, y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">cin &gt;&gt; g[i];</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;PII&gt; res;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> op = <span class="number">0</span>; op &lt; <span class="number">1</span> &lt;&lt; <span class="number">16</span>; op++) &#123;</span><br><span class="line">vector&lt;PII&gt; temp; <span class="comment">// 用于记录步骤 </span></span><br><span class="line"><span class="built_in">memcpy</span>(backup, g, <span class="built_in">sizeof</span>(g)); <span class="comment">// 备份 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 进行操作 </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line"><span class="comment">// 判断在op的二进制表示中，get(i,j)位的数是否为1 </span></span><br><span class="line"><span class="keyword">if</span> (op &gt;&gt; <span class="built_in">get</span>(i, j) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">temp.<span class="built_in">push_back</span>(&#123;i, j&#125;);</span><br><span class="line"><span class="built_in">turn_all</span>(i, j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断所有灯泡是否全亮</span></span><br><span class="line"><span class="type">bool</span> has_closed = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line"><span class="keyword">if</span> (g[i][j] == <span class="string">&#x27;+&#x27;</span>) &#123;</span><br><span class="line">has_closed = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span> (has_closed == <span class="literal">false</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (res.<span class="built_in">empty</span>() || res.<span class="built_in">size</span>() &gt; temp.<span class="built_in">size</span>()) &#123;</span><br><span class="line">res = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">memcpy</span>(g, backup, <span class="built_in">sizeof</span>(g)); <span class="comment">// 还原</span></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; res.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> op : res) &#123;</span><br><span class="line">cout &lt;&lt; op.x + <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; op.y + <span class="number">1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【算法】二分与前缀和</title>
      <link href="/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E4%BA%8C%E5%88%86%E4%B8%8E%E5%89%8D%E7%BC%80%E5%92%8C/"/>
      <url>/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E4%BA%8C%E5%88%86%E4%B8%8E%E5%89%8D%E7%BC%80%E5%92%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="整数二分">整数二分</h2><ol type="1"><li>确定一个区间，使得我们找的目标值一定在这个区间里</li><li>找一个性质，满足：<ol type="1"><li>性质具有二段性（前半段满足，后半段不满足）</li><li>答案是二段性的分界点</li></ol></li></ol><p>答案有两种：一种是前半段的右端点，一种是后半段的左端点</p><ul><li><strong>第一类：答案是前半段的右端点</strong></li></ul><p>将(L, R)分成(L, M - 1)和(M, R)</p><p>if M是红色的，说明ans必然在(M, R)</p><p>else 说明ans必然在(L, M - 1)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (L &lt; R) &#123;</span><br><span class="line"><span class="type">int</span> M = (L + R + <span class="number">1</span>) / <span class="number">2</span>; <span class="comment">// 一定要补上1，实际上计算的是ceil(L + R / 2)</span></span><br><span class="line"><span class="keyword">if</span> M红 L = M;</span><br><span class="line"><span class="keyword">else</span> R = M - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>第二类：答案是后半段的左端点</strong></li></ul><p>将(L, R)分成(L, M)和(M + 1, R)</p><p>if M是绿色的，说明ans必然实在M的左边（L, M）</p><p>else 说明ans必然在(M + 1, R)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (L &lt; R) &#123;</span><br><span class="line"><span class="type">int</span> M = (L + R) / <span class="number">2</span>; <span class="comment">// 这里没有加1</span></span><br><span class="line"><span class="keyword">if</span> M绿 R = M;</span><br><span class="line"><span class="keyword">else</span> L = M + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>看L=M和R=M</p><p>整数二分步骤：</p><ol type="1"><li>找一个区间[L, R]，使得答案一定在该区间中</li><li>找一个判断条件，使得该判断条件具有二段性，并且答案一定是该二段性的分界点</li><li>分析中点M在该判断条件下是否成立，如果成立，考虑答案在哪个区间；如果不成立，判断答案在哪个区间</li><li>如果更新方式写的是R = mid，则不用做任何处理；如果更新方式写的是L =mid，则需要在计算mid时加1</li></ol><h2 id="实数二分">实数二分</h2><p>将区间(L,R)划分成[L, M]和[M, R]</p><p>区间长度足够小的时侯停止 while (R - L &gt; 1e-6)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (R - L &gt; <span class="number">1e-6</span>) &#123;</span><br><span class="line"><span class="type">double</span> M = (L + R) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> ans在[M, R] L = M;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ans在[L, m] R = M;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意：有单调性一定可以二分，能二分的不一定单调</strong></p><h3 id="数的范围">数的范围</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/791/">789.数的范围 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 左端点：一定是大于等于x的第一个位置</span></span><br><span class="line"><span class="comment"> 判断条件：q[mid] &gt;= x</span></span><br><span class="line"><span class="comment"> 如果答案存在，这个答案一定是一段x的左端点</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> 如果 q[R] != x 说明答案不存在</span></span><br><span class="line"><span class="comment"> 否则说明L和R就是x的左端点 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 右端点：从[左边界, n-1] 从右往左小于等于x的第一个位置 </span></span><br><span class="line"><span class="comment"> 判断条件：q[mix] &lt;= x </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 读入每个询问 </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line"><span class="type">int</span> x;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line"><span class="type">int</span> l = <span class="number">0</span>, r = n - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line"><span class="type">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (q[mid] &gt;= x) &#123;</span><br><span class="line">r = mid;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">l = mid + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span> (q[r] == x) &#123;</span><br><span class="line"><span class="comment">// 说明存在左端点</span></span><br><span class="line">cout &lt;&lt; r &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="comment">// 二分x的右端点 </span></span><br><span class="line">r = n - <span class="number">1</span>; <span class="comment">// 右端点一定在[左端点，n-1]之间 </span></span><br><span class="line"><span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line"><span class="type">int</span> mid = l + r + <span class="number">1</span> &gt;&gt; <span class="number">1</span>; <span class="comment">// 因为写的时l=mid，所以需要补上1 </span></span><br><span class="line"><span class="keyword">if</span> (q[mid] &lt;= x) &#123;</span><br><span class="line">l = mid;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">r = mid - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">cout &lt;&lt; l &lt;&lt; endl; <span class="comment">// 最后l和r必然是相等的 </span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;-1 -1&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="数的三次方根">数的三次方根</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/792/">790.数的三次方根 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">if (m * m * m &gt;= x) R = M;</span></span><br><span class="line"><span class="comment">else L = M; </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">double</span> x;</span><br><span class="line">cin &gt;&gt; x;</span><br><span class="line"><span class="type">double</span> l = <span class="number">-10000</span>, r = <span class="number">10000</span>;</span><br><span class="line"><span class="keyword">while</span> (r - l &gt; <span class="number">1e-8</span>) &#123;</span><br><span class="line"><span class="type">double</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> (mid * mid * mid &gt;= x) &#123;</span><br><span class="line">r = mid;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">l = mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.6lf\n&quot;</span>, l);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="三分法">三分法</h3><p>一般是单峰函数或者单谷函数。求导，对导数进行二分。</p><h2 id="前缀和">前缀和</h2><p>待续...</p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】使用Chainlink预言机获取链下数据</title>
      <link href="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/"/>
      <url>/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在上一篇博客的基础上，本文将详细介绍Chainlink获取链下数据的方法。</p><p>本文需要在Remix上部署三个智能合约，分别是LinkToken.sol、Operator.sol和ATestnetConsumer.sol。而LinkToken合约的部署流程已在上文详细给出，这里我写一下跳转链接：<ahref="https://keikei99.github.io/2023/03/17/%5BChainlink%5D基于私链运行一个Chainlink预言机节点/">【Chainlink】基于私链运行一个Chainlink预言机节点| Keike1 (keikei99.github.io)</a>。</p><p>区块链上的用户作为数据获取方，需要从链下的数据提供方获取数据，而区块链本身不具备获取现实世界数据的能力，因此需要使用Chainlink预言机作为连接链上和链下之间的桥梁。下面我们将模拟用户获取数据的这个过程。</p><h2 id="部署operator.sol合约">部署Operator.sol合约</h2><p><ahref="https://remix.ethereum.org/#url=https://docs.chain.link/samples/ChainlinkNodes/Operator.sol">Operator.sol</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.7</span><span class="number">.6</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.7/Operator.sol&quot;</span>;</span><br></pre></td></tr></table></figure><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/deploy_operator.png" class="" title="deploy_operator"><p>部署完要记得把合约地址记录下来</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Operator: 0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span><br></pre></td></tr></table></figure><p>随后调用setAuthorizedSenders方法，填自己的账户地址，注意要以数组形式传递。如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&quot;0x0688AbDa371A869DcBb56d2E946A6898660ECDef&quot;]</span><br></pre></td></tr></table></figure><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/set_senders.png" class="" title="set_senders"><p>可以用<code>isAuthorizedSender</code>来判断是否设置成功</p><figure><imgsrc="https://docs.chain.link/images/chainlink-nodes/node-operators/operator-isauthorizedsender.jpg"alt="A screenshot showing Chainlink node whitelisted in Remix." /><figcaption aria-hidden="true">A screenshot showing Chainlink nodewhitelisted in Remix.</figcaption></figure><h2 id="在chainlink-operator中创建新的job">在ChainlinkOperator中创建新的Job</h2><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/new_job.png" class="" title="new_job"><p>写入以下内容</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES HARDCODED VALUES FOR CLARITY.</span></span><br><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"># DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;test&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="comment"># Optional External Job ID: Automatically generated if unspecified</span></span><br><span class="line"><span class="comment"># externalJobID = &quot;b1d42cd5-4a3a-4200-b1f7-25a68e48aad8&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;YOUR_OPERATOR_CONTRACT_ADDRESS&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    multiply     [type=&quot;multiply&quot; input=&quot;$(parse)&quot; times=&quot;$(decode_cbor.times)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, uint256 value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(multiply) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;YOUR_OPERATOR_CONTRACT_ADDRESS&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; multiply -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>注意将以上的<strong>两个</strong><code>YOUR_OPERATOR_CONTRACT_ADDRESS</code>改为你的Operator合约地址。</p><p>随后复制系统给出的<code>externalJobId</code>备用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JobId: e22cd821-ecb1-405f-9525-d273acc8d66e</span><br></pre></td></tr></table></figure><h2 id="部署atestnetconsumer合约">部署ATestnetConsumer合约</h2><p><ahref="https://remix.ethereum.org/#url=https://docs.chain.link/samples/APIRequests/ATestnetConsumer.sol">ATestnetConsumer.sol</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * THIS IS AN EXAMPLE CONTRACT THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"> * DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">contract <span class="title class_">ATestnetConsumer</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    uint256 private constant <span class="variable constant_">ORACLE_PAYMENT</span> = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0.1 * 10**18</span></span><br><span class="line">    uint256 public currentPrice;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestEthereumPriceFulfilled</span>(</span><br><span class="line">        bytes32 indexed requestId,</span><br><span class="line">        uint256 indexed price</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  Sepolia</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@dev</span> LINK address in Sepolia network: 0x779877A7B0D9E8603169DdbD7836e478b4624789</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> Check https://docs.chain.link/docs/link-token-contracts/ for LINK address for the right network</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(<span class="number">0x779877A7B0D9E8603169DdbD7836e478b4624789</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestEthereumPrice</span>(<span class="params"></span></span><br><span class="line"><span class="params">        address _oracle,</span></span><br><span class="line"><span class="params">        string memory _jobId</span></span><br><span class="line"><span class="params">    </span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            <span class="title function_">stringToBytes32</span>(_jobId),</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfillEthereumPrice</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=USD&quot;</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;USD&quot;</span>);</span><br><span class="line">        req.<span class="title function_">addInt</span>(<span class="string">&quot;times&quot;</span>, <span class="number">100</span>);</span><br><span class="line">        <span class="title function_">sendChainlinkRequestTo</span>(_oracle, req, <span class="variable constant_">ORACLE_PAYMENT</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfillEthereumPrice</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        uint256 _price</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">_requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestEthereumPriceFulfilled</span>(_requestId, _price);</span><br><span class="line">        currentPrice = _price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getChainlinkToken</span>(<span class="params"></span>) public view returns (address) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">chainlinkTokenAddress</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">cancelRequest</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        uint256 _payment,</span></span><br><span class="line"><span class="params">        bytes4 _callbackFunctionId,</span></span><br><span class="line"><span class="params">        uint256 _expiration</span></span><br><span class="line"><span class="params">    </span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title function_">cancelChainlinkRequest</span>(</span><br><span class="line">            _requestId,</span><br><span class="line">            _payment,</span><br><span class="line">            _callbackFunctionId,</span><br><span class="line">            _expiration</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">stringToBytes32</span>(<span class="params"></span></span><br><span class="line"><span class="params">        string memory source</span></span><br><span class="line"><span class="params">    </span>) private pure returns (bytes32 result) &#123;</span><br><span class="line">        bytes memory tempEmptyStringTest = <span class="title function_">bytes</span>(source);</span><br><span class="line">        <span class="keyword">if</span> (tempEmptyStringTest.<span class="property">length</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0x0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        assembly &#123;</span><br><span class="line">            <span class="comment">// solhint-disable-line no-inline-assembly</span></span><br><span class="line">            result := <span class="title function_">mload</span>(<span class="title function_">add</span>(source, <span class="number">32</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>这里注意将第29行的setChainlinkToken的参数改为之前部署的LinkToken合约地址</strong></p><h2 id="在metamask中导入link代币">在Metamask中导入LINK代币</h2><p>私有链中可以有多种代币，这里我们使用Metamask去管理我们的账户余额以方便我们在Remix部署合约。</p><p>打开Metamask，点击Assets，点击Import tokens</p><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/import_tokens.png" class="" title="import_tokens"><p>然后填入你的LinkToken合约地址和它的代币符号LINK就行。</p><h2id="利用linktoken合约向atestnetconsumer合约转账">利用LinkToken合约向ATestnetConsumer合约转账</h2><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/transfer.png" class="" title="transfer"><p>这里我转入了1个LINK，根据实际需要转就可以了。转账以后，去原来部署的ATestnetConsumer合约中调用<code>requestEthereumPrice</code>方法。</p><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/request_data.png" class="" title="request_data"><p>_oracle填入Operator合约地址，_jobId填入刚刚在控制台得到的JobId。</p><p><u><strong>JobId要去掉中间的横线！！！</strong></u></p><p><u><strong>JobId要去掉中间的横线！！！</strong></u></p><p><u><strong>JobId要去掉中间的横线！！！</strong></u></p><p>最后点击currentPrice，ETH/USD的汇率就出现了。</p><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/current_price.png" class="" title="current_price"><p>至此，我们实现了在区块链中获取链下的价格数据。在实际的开发中，可以将这种单一的数据拓展为特定的业务数据，以实现区块链与预言机在特定领域的应用。</p><p><ahref="https://zhuanlan.zhihu.com/p/373828717">基本请求模型--单预言机工作模式- 知乎 (zhihu.com)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Rust】所有权Ownership</title>
      <link href="/2023/03/20/%E3%80%90Rust%E3%80%91%E6%89%80%E6%9C%89%E6%9D%83Ownership/"/>
      <url>/2023/03/20/%E3%80%90Rust%E3%80%91%E6%89%80%E6%9C%89%E6%9D%83Ownership/</url>
      
        <content type="html"><![CDATA[<h2 id="所有权">所有权</h2><p>核心内容：</p><ol type="1"><li>Rust中的每一个值都有一个<strong>所有者</strong>（<em>owner</em>）。</li><li>值在任一时刻有且只有一个所有者。</li><li>当所有者（变量）离开作用域，这个值将被丢弃。</li></ol><p>变量有变量名和对应的内存分配空间。Rust中的所有权定义<strong>该变量与变量名和对应的存储空间相绑定</strong>，在作用域结束时拥有所有权的变量的存储空间会被释放，而没有所有权的变量则忽略释放空间的操作。</p><p>Rust编译器会隐式调用Copy函数和Clone函数。Copy即复制一份完全一样的变量，而不会转移将原有变量的所有权，举例如下：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">n1</span>: <span class="type">u32</span> = <span class="number">114514</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">n2</span> = n1;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;n1 = &#123;&#125; and n2 = &#123;&#125;&quot;</span>, n1, n2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n1 = 114514 and n2 = 114514</span><br></pre></td></tr></table></figure><p>上例的u32类型没有发生所有权转移，而对于String类型的数据，会发生所有权转移的情况。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Blockchain is so interesting&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s2</span> = s1;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;s1 = &#123;&#125; ans s2 = &#123;&#125;&quot;</span>, s1, s2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译错误：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">keikei@LAPTOP-VME6S439:~/rust_study/ownership$ cargo run</span><br><span class="line">   Compiling ownership v0.1.0 (/home/keikei/rust_study/ownership)</span><br><span class="line">error: 2 positional arguments in format string, but no arguments were given</span><br><span class="line">  --&gt; src/main.rs:57:20</span><br><span class="line">   |</span><br><span class="line">57 |     println!(&quot;s1 = &#123;&#125; ans s2 = &#123;&#125;&quot;);</span><br><span class="line">   |                    ^^          ^^</span><br><span class="line"></span><br><span class="line">error: could not compile `ownership` (bin &quot;ownership&quot;) due to previous error</span><br><span class="line">keikei@LAPTOP-VME6S439:~/rust_study/ownership$ cargo run</span><br><span class="line">   Compiling ownership v0.1.0 (/home/keikei/rust_study/ownership)</span><br><span class="line">error[E0382]: borrow of moved value: `s1`</span><br><span class="line">  --&gt; src/main.rs:57:37</span><br><span class="line">   |</span><br><span class="line">55 |     let s1 = String::from(&quot;Blockchain is so interesting&quot;);</span><br><span class="line">   |         -- move occurs because `s1` has type `String`, which does not implement the `Copy` trait</span><br><span class="line">56 |     let s2 = s1;</span><br><span class="line">   |              -- value moved here</span><br><span class="line">57 |     println!(&quot;s1 = &#123;&#125; ans s2 = &#123;&#125;&quot;, s1, s2);</span><br><span class="line">   |                                     ^^ value borrowed here after move</span><br><span class="line">   |</span><br><span class="line">   = note: this error originates in the macro `$crate::format_args_nl` which comes from the expansion of the macro `println` (in Nightly builds, run with -Z macro-backtrace for more info)</span><br><span class="line">help: consider cloning the value if the performance cost is acceptable</span><br><span class="line">   |</span><br><span class="line">56 |     let s2 = s1.clone();</span><br><span class="line">   |                ++++++++</span><br><span class="line"></span><br><span class="line">For more information about this error, try `rustc --explain E0382`.</span><br><span class="line">error: could not compile `ownership` (bin &quot;ownership&quot;) due to previous error</span><br></pre></td></tr></table></figure><p>如果把<code>let s2 = s1;</code>改为<code>let s2 = s1.clone();</code>，编译能够通过。说明我们在对复杂数据类型进行操作时需要显式的调用<code>clone</code>函数。</p><p>官方文档的说法：</p><p>任何一组简单标量值的组合都可以实现<code>Copy</code>，任何不需要分配内存或某种形式资源的类型都可以实现<code>Copy</code> 。如下是一些 <code>Copy</code> 的类型：</p><ul><li>所有整数类型，比如 <code>u32</code>。</li><li>布尔类型，<code>bool</code>，它的值是 <code>true</code> 和<code>false</code>。</li><li>所有浮点数类型，比如 <code>f64</code>。</li><li>字符类型，<code>char</code>。</li><li>元组，当且仅当其包含的类型也都实现 <code>Copy</code>的时候。比如，<code>(i32, i32)</code> 实现了 <code>Copy</code>，但<code>(i32, String)</code> 就没有。</li></ul><h2 id="引用和借用">引用和借用</h2><p>&amp;的出现能允许你使用值但不获取所有权，多在函数传参时使用。如果这个参数的值需要改变，那还必须指定&amp;mut，说明该参数是原变量的可变引用。同理，可变引用不具有所有权。</p><p>可变引用只能引用一次，因为可变引用归根结底是指向同一份内存空间。假设存在两个可变引用<code>&amp;mut a</code>和<code>&amp;mut b</code>都指向1这个值，如果a被修改为2了，那b的值到底是1还是2呢？所以Rust会拒绝这样的操作以防止数据竞争。</p><p>Rust只允许有一个可变引用或者多个不可变引用，可变引用和不可变引用不能同时存在。</p><p>一个引用的作用域从声明的地方开始一直持续到最后一次使用为止。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r1</span> = &amp;s; <span class="comment">// 没问题</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r2</span> = &amp;s; <span class="comment">// 没问题</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; and &#123;&#125;&quot;</span>, r1, r2);</span><br><span class="line">    <span class="comment">// 此位置之后 r1 和 r2 不再使用</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r3</span> = &amp;<span class="keyword">mut</span> s; <span class="comment">// 没问题</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, r3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello and hello</span><br><span class="line">hello</span><br></pre></td></tr></table></figure><h2 id="slice类型">Slice类型</h2><p>RustSlice（切片）是对数据值的部分引用，比如<code>&amp;s[0..i]</code>可以指定引用起始索引为0，长度为i的字符串</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fn first_word(s: &amp;String) -&gt; usize</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">first_word</span>(s: &amp;<span class="type">String</span>) <span class="punctuation">-&gt;</span> &amp;<span class="type">str</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">bytes</span> = s.<span class="title function_ invoke__">as_bytes</span>();</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">for</span> (i, &amp;item) <span class="keyword">in</span> bytes.<span class="title function_ invoke__">iter</span>().<span class="title function_ invoke__">enumerate</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> item == <span class="string">b&#x27; &#x27;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &amp;s[<span class="number">0</span>..i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &amp;s[..];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】Chainlink相关</title>
      <link href="/2023/03/19/%E3%80%90Chainlink%E3%80%91Chainlink%E7%9B%B8%E5%85%B3/"/>
      <url>/2023/03/19/%E3%80%90Chainlink%E3%80%91Chainlink%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<h2 id="白皮书速览">白皮书速览</h2><p>Chainlink白皮书地址：<ahref="https://research.chain.link/whitepaper-v2.pdf?_ga=2.203170515.376502038.1679147678-150248235.1677582268">whitepaper-v2.pdf(chain.link)</a></p><p>摘自<ahref="https://zhuanlan.zhihu.com/p/415515492">一文速览Chainlink2.0白皮书 - 知乎 (zhihu.com)</a></p><p>Chainlink2.0是在原版白皮书的基础上做的进一步扩展，<u>其愿景是为智能合约快速可靠地接入任何链下数据源和链下计算资源，并同时保障隐私，补充并增强已有和新增区块链的性能。</u>（<strong><em>为区块链接入链下数据，是链上和链下的桥梁</em></strong>）从愿景中不难发现，Chainlink服务的是现存及潜在所有区块链的智能合约，不仅为他们提供链下数据，还提供链下计算，完全满足智能合约的任意链下需求。</p><p>为实现这一愿景，Chainlink 2.0提出去中心化预言机网络（DON）的概念，DON是由一组Chainlink节点负责维护的网络，节点基于委员会的共识协议，可灵活选择并部署任何预言机功能。<u>DON的提出将原本功能性的预言机拓宽为预言机集群，实现预言机拓扑结构由点状到网状的演进。</u>（<strong><em>Chainlink本身是一种特殊的分布式节点集群，一定程度上避免了传统预言机存在被单点攻击的风险</em></strong>）DON的最大优势是可以快速启动新的区块链服务，无需为每个区块链或者每种服务开发新的专用网络。这样一来，无论新的应用场景如何变化，DON都能迅速响应，及时接入。</p><p>DON由可执行程序和适配器组成，其中可执行程序是确定性的程序，而适配器是DON与外界交互的接口。可执行程序类似智能合约，可执行特定计算，如生成随机数，触发链上合约自动执行等。适配器类似接口转换器，使得DON可以与区块链、Web服务器、存储服务器以及其他DON连接。</p><p>Chainlink2.0白皮书中还列举DON的5个实际用例，分别是：储备金证明，<u>接入企业/传统系统</u>，去中心化身份，优先通道及保障DeFi隐私的Mixicles。</p><p>储备金证明常用于不同区块链之间的消息验证，如用户在比特币链锁仓BTC后在以太坊上发行WBTC，这时候以太坊应用就需要验证比特币链上确实锁仓足额BTC。使用储备金证明，DON可以获取比特币链上的储备信息，并反馈给以太坊应用，确保WBTC的发行背书。<u>由于DON的连接特性，企业无需进行额外开发就能将传统系统数据发送至区块链，大大方便接入企业的传统系统</u>。去中心化身份是指通过区块链建立用户的身份信息，信息可以来自传统系统如银行系统等的信用数据，通过DON将这类隐私数据提供给智能合约使用，能够实现低抵押借贷、KYC等区块链应用。优先通道是矿工为用户提供的一种保证，保证用户的交易将在某个区块存储到链上，可以用DON轻松实现。Mixicles是由ChainlinkLabs提出的隐私保护DeFi工具，可保证在不披露底层资产信息的前提下进行二元期权交易。</p><p>Chainlink2.0白皮书单独介绍DON的公允排序服务（FSS）。公允排序包括两方面：一是排序按照节点接收交易的时间先后进行；二是保存交易之间的因果关系。所谓因果关系，是指隐藏交易数据，等到共识层完成排序后再披露交易顺序，以达到防止改变交易之间的因果关系。由此可知，公允排序服务可以有效消除抢跑交易。</p><p>Chainlink2.0白皮书提到DON采用的交易执行框架（TEF）。TEF具有<u>高性能、低费用、隐私保护等优点</u>，支持任意L2执行技术和范式，可以快速更新主网智能合约，同时保留主网的关键可信度。</p><p>去中心化也是Chainlink2.0白皮书重点关注的内容，并根据数据经由数据源到DON再到主网智能合约的流向逐一讨论去中心化方案。针对数据源，设计数据源认证机制，保证数据确实由可信数据源未经篡改提供；针对DON，设计成熟客户端，防止客户端出现故障，支持少数派报告；针对主网智能合约，建立监控和失效安全机制，实行信任最小化治理，为DON节点建立链上身份等。</p><p>建立去中心化信任模型的一个关键措施是设计合理的经济激励机制，Chainlink2.0白皮书分别<u>采用显性和隐性经济激励机制</u>（<strong><em>使作恶成本远高于作恶收益，实现链上不可信环境的可信治理</em></strong>）。显性经济激励为权益质押，Chainlink节点质押一定数量的LINK通证参与DON。Chainlink的权益质押与区块链上的权益质押有很大不同，一方面权益质押主要用来验证链下数据的真实有效性，而非达成区块链底层共识；另一方面，Chainlink的权益质押主要用于防止节点受贿发送欺诈数据，为此Chainlink提出超线性权益质押，即<u>攻击者需要提供远超节点质押的保证金，才能够有效攻击</u>。而隐性激励指未来收益机会，即只有服务质量高、声誉好的节点才能吸引潜在用户，获得未来收益机会。</p><p>Chainlink2.0白皮书将使用链下资源的智能合约称之为混合型智能合约，单单在链上运行的智能合约受限于链上资源的有限、昂贵和缓慢等制约仅能提供部分功能，而结合DON的混合型智能合约理论上可以获取链下无限的资源，并将高昂的链上计算成本转移到低廉的链下，因而可以提供完备的功能，同时继承智能合约去中心化、无需许可等优点。混合型智能合约优势之一在于让人清楚地了解该智能合约包含链下组件，并把链下组件作为智能合约的组成部分而不再是分割的两个领域。</p><p>Chainlink2.0白皮书以DON为基础，混合型智能合约为载体，向我们描绘未来预言机蓝图。欲要了解更多Chainlink2.0设计、实现细节，敬请关注即将发布的Chainlink 2.0中文版白皮书！</p><h3 id="chainlink的设计机制">Chainlink的设计机制</h3><p>Chainlink 的理想是做一个去中心化的预言机。</p><p>根据白皮书的介绍，Chainlink 通过使用 API将链上和链外联系起来。它通过获取链上资源（如以太坊、比特币和 Hyperledger等区块链），并通过 API将其连接到链下资源（如市场数据、银行支付、零售支付、后端系统、事件数据等）来实现链下数据与链上智能合约的交互。</p><figure><imgsrc="https://pic1.zhimg.com/80/v2-8295c870b7319a6e56044d07e9b0dd94_1440w.webp"alt="img" /><figcaption aria-hidden="true">img</figcaption></figure><p><ahref="https://zhuanlan.zhihu.com/p/113875183">Chainlink的理想与现实 -知乎 (zhihu.com)</a></p><p>每个参与智能合约的预言机都会搜集相关数据（如市场数据），将数据发送至网络中的其他预言机，按照指示将所有数据聚合至单一数据点，并经由统一的预言机一次性发送至链上的智能合约。</p><p>链下预言机治理其实也存在一个不可能三角问题，如何在确保链下数据客观、严谨的基础上，又能保证和链上世界接轨的处理效率，最主要的是，链下预言机的“管理者‘本身是安全、可信的。总之，链上区块链运转模型和链下预言机治理就像一个双星系统，二者互相影响又互相依赖。</p><p><ahref="https://blog.csdn.net/llslinliansheng/article/details/128057631">(56条消息)Chainlink——白皮书简析(whitepaperv2)_llsforest_llsForest的博客-CSDN博客</a></p><img src="/2023/03/19/%E3%80%90Chainlink%E3%80%91Chainlink%E7%9B%B8%E5%85%B3/attack.png" class="" title="attack"><p>数据是如何实现上链的：<ahref="https://blog.csdn.net/heyuekeji/article/details/107023324">(56条消息)深入浅出：一条数据是如何完成上链的_荷月科技的博客-CSDN博客</a></p><p>对哈希进行签名还可将发送者的身份和信息绑定，同时也可防止其他人冒充发送者，因此这样处理可保证信息的防篡改的同时认证发送者的身份，防止抵赖。</p><p><u>前不久，北京市金融工作局局长霍学文在一次演讲中曾指出，区块链中的“decentralized”特征的本意不是所谓的“去中心化”，准确地讲是“分散”的意思，把区块链简单地理解为“去中心化”，其实是翻译错误，是不准确的。</u></p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】基于私链运行一个Chainlink预言机节点</title>
      <link href="/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/"/>
      <url>/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="注意">注意</h2><p>官方文档：<ahref="https://docs.chain.link/chainlink-nodes/v1/running-a-chainlink-node">Runninga Chainlink Node | Chainlink Documentation</a></p><ol type="1"><li>本教程和官方教程的区别在于，本教程<strong>基于自己搭建的Geth私有链</strong>而非Goerli测试网</li><li>建议先在本地创建账户，再创建json文件，然后去metamask添加importaccount，最后再在启动私链的命令中添加--unlock参数解锁账户，实现交易的打包。这一步，目的是为在Remix上部署LinkToken合约做准备。</li><li>在metamask上添加创建的账户是为后续在Remix上部署合约做准备</li><li>在Remix上部署LinkToken合约的目的是为后续给预言机节点转账做准备</li></ol><h2 id="用geth搭建私有链">用Geth搭建私有链</h2><p>下载Geth</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt-get install software-properties-common</span><br><span class="line">add-apt-repository -y ppa:ethereum/ethereum</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install ethereum</span><br></pre></td></tr></table></figure><p>随后创建如下的文件目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/myChain</span><br><span class="line">├── chainlink</span><br><span class="line">└── localChain</span><br><span class="line">    ├── node1</span><br></pre></td></tr></table></figure><p>输入如下命令创建账户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo geth --datadir ./ account new</span><br></pre></td></tr></table></figure><p>可以通过两种方式配置创世区块：</p><ul><li>直接配置genesis.json文件</li><li>使用puppeth配置创世区块</li></ul><p>0xedd96278959aA8B27DdC14FD70ACb31f7e7beC2F</p><p>0xCDA9035668b149d18905349Fa8779073e433820C</p><p>如果要直接配置genesis.json文件，可参考如下写法：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;config&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;chainId&quot;</span><span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;homesteadBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;eip155Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;eip158Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;eip150Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;alloc&quot;</span>      <span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;coinbase&quot;</span>   <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000000000000000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;difficulty&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;0x20000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;extraData&quot;</span>  <span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;gasLimit&quot;</span>   <span class="punctuation">:</span> <span class="string">&quot;0x2fefd8&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;nonce&quot;</span>      <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000042&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mixhash&quot;</span>    <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;parentHash&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span>  <span class="punctuation">:</span> <span class="string">&quot;0x00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;alloc&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;18aCF602A4C1f4915709bA09A0bFd83A58656CA4&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="string">&quot;300000000000000000000&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;8c304567E5d337cB60301a998e430F056EF9F622&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="string">&quot;400000000000000000000&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>初始化。<strong>注意每次修改JSON文件后都必须初始化</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geth init --datadir data testchain.json</span><br></pre></td></tr></table></figure><p>在~/myChain/localChain/node1下启动私链</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geth --datadir data --gcmode &quot;archive&quot; --syncmode=full --networkid 4190 --http --http.addr 0.0.0.0 --http.port 6789 --http.corsdomain &quot;*&quot; --ws --port 30305 --allow-insecure-unlock --unlock edd96278959aA8B27DdC14FD70ACb31f7e7beC2F --keystore ./keystore console</span><br></pre></td></tr></table></figure><p>私链启动以后，就去Metamask添加网络。</p><p>Metamask具体可以看这篇：https://blog.csdn.net/llslinliansheng/article/details/123596009</p><p>私链开启挖矿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">miner.setEtherbase(&quot;edd96278959aa8b27ddc14fd70acb31f7e7bec2f&quot;)</span><br><span class="line">miner.start()</span><br></pre></td></tr></table></figure><h2 id="搭建chainlink预言机">搭建Chainlink预言机</h2><p>由于LinkToken.sol的Solidity代码需要在GitHub拉取，可以通过在主页按T键搜索LinkToken.sol文件，找到文件所在目录，并拉取其V0.4的所有文件。同时要修改import部分：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.11</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;https://github.com/smartcontractkit/chainlink/contracts/src/v0.4/ERC677Token.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StandardToken</span> <span class="keyword">as</span> linkStandardToken &#125; <span class="keyword">from</span> <span class="string">&quot;https://github.com/smartcontractkit/chainlink/contracts/src/v0.4/vendor/StandardToken.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract <span class="title class_">LinkToken</span> is linkStandardToken, <span class="title class_">ERC677Token</span> &#123;</span><br><span class="line"></span><br><span class="line">  uint public constant totalSupply = <span class="number">10</span>**<span class="number">27</span>;</span><br><span class="line">  string public constant name = <span class="string">&quot;ChainLink Token&quot;</span>;</span><br><span class="line">  uint8 public constant decimals = <span class="number">18</span>;</span><br><span class="line">  string public constant symbol = <span class="string">&quot;LINK&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">LinkToken</span>(<span class="params"></span>)</span><br><span class="line">    public</span><br><span class="line">  &#123;</span><br><span class="line">    balances[msg.<span class="property">sender</span>] = totalSupply;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@dev</span> transfer token to a specified address with additional data if the recipient is a contract.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _to The address to transfer to.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _value The amount to be transferred.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _data The extra data to be passed to the receiving contract.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">transferAndCall</span>(<span class="params">address _to, uint _value, bytes _data</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_to)</span><br><span class="line">    returns (bool success)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">transferAndCall</span>(_to, _value, _data);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@dev</span> transfer token to a specified address.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _to The address to transfer to.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _value The amount to be transferred.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">transfer</span>(<span class="params">address _to, uint _value</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_to)</span><br><span class="line">    returns (bool success)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">transfer</span>(_to, _value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@dev</span> Approve the passed address to spend the specified amount of tokens on behalf of msg.sender.</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _spender The address which will spend the funds.</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _value The amount of tokens to be spent.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">approve</span>(<span class="params">address _spender, uint256 _value</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_spender)</span><br><span class="line">    returns (bool)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">approve</span>(_spender,  _value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@dev</span> Transfer tokens from one address to another</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _from address The address which you want to send tokens from</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _to address The address which you want to transfer to</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _value uint256 the amount of tokens to be transferred</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">transferFrom</span>(<span class="params">address _from, address _to, uint256 _value</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_to)</span><br><span class="line">    returns (bool)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">transferFrom</span>(_from, _to, _value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// MODIFIERS</span></span><br><span class="line"></span><br><span class="line">  modifier <span class="title function_">validRecipient</span>(<span class="params">address _recipient</span>) &#123;</span><br><span class="line">    <span class="built_in">require</span>(_recipient != <span class="title function_">address</span>(<span class="number">0</span>) &amp;&amp; _recipient != <span class="title function_">address</span>(<span class="variable language_">this</span>));</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>随后使用Remix部署合约，然而私链终端需要对交易进行打包，解锁账户，开始挖矿。</p><img src="/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/geth_miner.png" class="" title="geth_miner"><p>安装PostgreSQL和docker，这里不细说。PostgreSQL的安装过程具体可以看这篇文章：<ahref="https://linux.cn/article-11480-1.html">技术|如何在 Ubuntu上安装和配置 PostgreSQL (linux.cn)</a>。</p><p>我使用的PostgreSQL版本和docker版本如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">keikei@ubuntu:~$ psql --version</span><br><span class="line">psql (PostgreSQL) 12.14 (Ubuntu 12.14-0ubuntu0.20.04.1)</span><br><span class="line">keikei@ubuntu:~$ docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           23.0.1</span><br><span class="line"> API version:       1.42</span><br><span class="line"> Go version:        go1.19.5</span><br><span class="line"> Git commit:        a5ee5b1</span><br><span class="line"> Built:             Thu Feb  9 19:46:56 2023</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Context:           default</span><br><span class="line">permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get &quot;http://%2Fvar%2Frun%2Fdocker.sock/v1.24/version&quot;: dial unix /var/run/docker.sock: connect: permission denied</span><br></pre></td></tr></table></figure><p>随后在~/myChain/chainlink/.chainlink下创建<code>.env</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ROOT=/chainlink</span><br><span class="line">LOG_LEVEL=debug</span><br><span class="line">ETH_CHAIN_ID=4190</span><br><span class="line">CHAINLINK_TLS_PORT=0</span><br><span class="line">LINK_CONTRACT_ADDRESS=0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span><br><span class="line">SECURE_COOKIES=false</span><br><span class="line">ALLOW_ORIGINS=*</span><br><span class="line">ETH_URL=ws://127.0.0.1:8546</span><br><span class="line">DATABASE_URL=postgresql://postgres:Likeqi5201314000@localhost:5432/chainlink?sslmode=disable</span><br><span class="line">DATABASE_TIMEOUT=0</span><br></pre></td></tr></table></figure><p>随后启动预言机</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --net host -u=root  -p 6688:6688 -v ~/.chainlink:/chainlink -it --env-file=.env smartcontract/chainlink:1.11.0 local n</span><br></pre></td></tr></table></figure><p>在本地浏览器输入127.0.0.1:6688，打开Chainlink Operator</p><img src="/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/chainlink_operator.png" class="" title="chainlink_operator"><p>至此，Chainlink分布式预言机节点已经搭建完毕。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
