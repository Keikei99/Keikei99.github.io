<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>【Chainlink】Job and Task</title>
      <link href="/2023/05/11/%E3%80%90Chainlink%E3%80%91Job-and-Task/"/>
      <url>/2023/05/11/%E3%80%90Chainlink%E3%80%91Job-and-Task/</url>
      
        <content type="html"><![CDATA[<h1 id="job类型">Job类型</h1><ul><li><ahref="https://docs.chain.link/chainlink-nodes/oracle-jobs/all-jobs/#solidity-cron-jobs"><code>cron</code></a></li><li><ahref="https://docs.chain.link/chainlink-nodes/oracle-jobs/all-jobs/#direct-request-jobs"><code>directrequest</code></a></li><li><ahref="https://docs.chain.link/chainlink-nodes/oracle-jobs/all-jobs/#flux-monitor-jobs"><code>fluxmonitor</code></a></li><li><ahref="https://docs.chain.link/chainlink-nodes/oracle-jobs/all-jobs/#keeper-jobs"><code>keeper</code></a></li><li><ahref="https://docs.chain.link/chainlink-nodes/oracle-jobs/all-jobs/#off-chain-reporting-jobs"><code>offchainreporting</code></a></li><li><ahref="https://docs.chain.link/chainlink-nodes/oracle-jobs/all-jobs/#webhook-jobs"><code>webhook</code></a></li></ul><h2 id="job中的内容">Job中的内容</h2><ul><li><code>name</code>: The name of the job in the Operator UI</li><li><code>type</code>: Specifies the v2 job type, which can be one ofthe following:<ul><li><code>cron</code></li><li><code>directrequest</code></li><li><code>fluxmonitor</code></li><li><code>keeper</code></li><li><code>offchainreporting</code></li><li><code>webhook</code></li></ul></li><li><code>schemaVersion</code>: Must be present and set to a value of<code>1</code>. This field will handle progressive iterations of the jobspec format gracefully with backwards-compatibility.【模式版本】</li><li><code>observationSource</code>: The v2 pipeline task DAG, which isspecified in DOT syntax. See below for information on writing pipelineDAGs.【类似于task的集合】</li><li><code>maxTaskDuration</code>: The default maximum duration that anytask is allowed to run. If the duration is exceeded, the task iserrored. This value can be overridden on a per-task basis using the<code>timeout</code> attribute. See the <ahref="https://docs.chain.link/chainlink-nodes/oracle-jobs/tasks#shared-attributes">Sharedattributes</a> section fordetails.【允许任务执行的最大持续时间，如果超越了这个时间，那么任务报错】</li><li><code>externalJobID</code>: An optional way for a user todeterministically provide the ID of a job. The ID must be unique. Forexample, you can specify an <code>externalJobID</code> if you want torun the same <code>directrequest</code> job on two different Chainlinknodes with different bridge names. The spec contents differ slightly,but you can use the same <code>externalJobID</code> on both jobs,specify that in your on-chain requests, and both nodes will pick it up.If you do not provide an <code>externalJobID</code>, the node generatesthe ID foryou.【如果需要两个不同的Chainlink节点执行同一个Job，那么你可以显式地指定一个ID。如果不指定，系统默认会给你分配一个。】</li><li><code>gasLimit</code>: Optional gas limit for any outgoingtransactions spawned by this job. When specified, it overrides<code>ETH_GAS_LIMIT_DEFAULT</code> env variable.【gas费用上限】</li><li><code>forwardingAllowed</code>: Optional. When <code>true</code>, itallows forwarding transactions submitted by thejob.【允许转发Job提交地交易】</li></ul><p>请问文档中ORACLEJOBS里的observationSource和forwardingAllowed要怎么理解？observationSource可以理解为Task的集合吗？</p><img src="/2023/05/11/%E3%80%90Chainlink%E3%80%91Job-and-Task/image-20230511115718701.png" class="" title="image-20230511115718701"><h2 id="cron-jobs">Cron Jobs</h2><p>Executes a job on a schedule. Does not rely on any kind of externaltrigger.</p><p>按照指定的时间执行，不依赖于任何外部的触发器。</p><p>TOML模板</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span>            = <span class="string">&quot;cron&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span>   = <span class="number">1</span></span><br><span class="line"><span class="attr">evmChainID</span>      = <span class="number">1</span></span><br><span class="line"><span class="attr">schedule</span>        = <span class="string">&quot;CRON_TZ=UTC * */20 * * * *&quot;</span></span><br><span class="line"><span class="attr">externalJobID</span>       = <span class="string">&quot;0EEC7E1D-D0D2-476C-A1A8-72DFB6633F01&quot;</span></span><br><span class="line"><span class="attr">observationSource</span>   = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    fetch    [type=&quot;http&quot; method=GET url=&quot;https://chain.link/ETH-USD&quot;]</span></span><br><span class="line"><span class="string">    parse    [type=&quot;jsonparse&quot; path=&quot;data,price&quot;]</span></span><br><span class="line"><span class="string">    multiply [type=&quot;multiply&quot; times=100]</span></span><br><span class="line"><span class="string">    fetch -&gt; parse -&gt; multiply</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>需要注意的是<code>schedule</code>字段</p><ul><li><code>schedule</code>: the frequency with which the job is to berun. There are two ways to specify this:<ul><li>Traditional UNIX cron format, but with 6 fields, not 5. The extrafield allows for "seconds" granularity. <strong>Note:</strong> you<em>must</em> specify the <code>CRON_TZ=...</code> parameter if you usethis format.</li><li><code>@</code> shorthand, e.g. <code>@every 1h</code>. Thisshorthand does not take account of the node's timezone, rather, itsimply begins counting down the moment that the job is added to the node(or the node is rebooted). As such, no <code>CRON_TZ</code> parameter isneeded.</li></ul></li></ul><p>For all supported schedules, please refer to the <ahref="https://pkg.go.dev/github.com/robfig/cron?utm_source=godoc">cronlibrary documentation</a>.</p><p>推荐传统的UNIX cron格式，这个格式中有六个域</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * *</span><br></pre></td></tr></table></figure><p>对这六个域分别定义就可以了，具体参考<ahref="https://pkg.go.dev/github.com/robfig/cron?utm_source=godoc">cronlibrary documentation</a></p><h2 id="direct-request-jobs">Direct request Jobs</h2><p>Executes a job upon receipt of an explicit request made by a user.The request is detected via a log emitted by an Oracle or Operatorcontract. This is similar to the legacy ethlog/runlog style of jobs.</p><p>当收到用户发出的显式请求时执行Job，它通过检测预言机或者Operator合约触发的Event来执行。</p><p>TOML模板</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span>                = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span>       = <span class="number">1</span></span><br><span class="line"><span class="attr">evmChainID</span>          = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span>                = <span class="string">&quot;example eth request event spec&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span>     = <span class="string">&quot;0x613a38AC1659769640aaE063C651F48E0250454C&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Optional fields:</span></span><br><span class="line"><span class="comment"># requesters        = [</span></span><br><span class="line"><span class="comment">#   &quot;0xaaaa1F8ee20f5565510B84f9353F1E333E753B7a&quot;,</span></span><br><span class="line"><span class="comment">#   &quot;0xbbbb70F0e81C6F3430dfdC9fa02fB22BdD818C4e&quot;</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line"><span class="comment"># minContractPaymentLinkJuels = &quot;100000000000000&quot;</span></span><br><span class="line"><span class="comment"># externalJobID = &quot;0EEC7E1D-D0D2-476C-A1A8-72DFB6633F02&quot;</span></span><br><span class="line"><span class="comment"># minIncomingConfirmations = 10</span></span><br><span class="line"></span><br><span class="line"><span class="attr">observationSource</span>   = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ds          [type=&quot;http&quot; method=GET url=&quot;http://example.com&quot;]</span></span><br><span class="line"><span class="string">    ds_parse    [type=&quot;jsonparse&quot; path=&quot;USD&quot;]</span></span><br><span class="line"><span class="string">    ds_multiply [type=&quot;multiply&quot; times=100]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ds -&gt; ds_parse -&gt; ds_multiply</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>注意到Optional fields中的字段：</p><ul><li><code>contractAddress</code>: The Oracle or Operator contract tomonitor for requests 【操纵Chainlink的Operator合约】</li><li><code>requesters</code>: Optional - Allows whitelistingrequesters【可以指定的白名单】</li><li><code>minContractPaymentLinkJuels</code> Optional - Allows you tospecify a job-specific minimum contractpayment【指定最少支付的Link个数】</li><li><code>minIncomingConfirmations</code> Optional - Allows you tospecify a job-specific <code>MIN_INCOMING_CONFIRMATIONS</code> value,must be greater than global <code>MIN_INCOMING_CONFIRMATIONS</code></li></ul><h2 id="flux-monitor-jobs">Flux monitor Jobs</h2><p>The Flux Monitor job type is for continually-updating data feeds thataggregate responses from multiple oracles. The oracles servicing thefeed submit rounds based on several triggers:</p><ul><li>An occasional poll, which must show that there has been sufficientdeviation from an off-chain data source before a new result issubmitted</li><li>New rounds initiated by other oracles on the feeds. If anotheroracle notices sufficient deviation, all other oracles will submit theircurrent observations as well.</li><li>A heartbeat, which ensures that even if no deviation occurs, wesubmit a new result to prove liveness. This can take one of two forms:<ul><li>The "idle timer", which begins counting down each time a round isstarted</li><li>The "drumbeat", which simply ticks at a steady interval, much like a<code>cron</code> job</li></ul></li></ul><p>波动显示器发起一个数据请求，如果发现变动的太厉害，那么会触发数据的重新申请。</p><p>TOML模板</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span>              = <span class="string">&quot;fluxmonitor&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span>     = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span>              = <span class="string">&quot;example flux monitor spec&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span>   = <span class="string">&quot;0x3cCad4715152693fE3BC4460591e3D3Fbd071b42&quot;</span></span><br><span class="line"><span class="attr">externalJobID</span>     = <span class="string">&quot;0EEC7E1D-D0D2-476C-A1A8-72DFB6633F03&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">threshold</span> = <span class="number">0.5</span></span><br><span class="line"><span class="attr">absoluteThreshold</span> = <span class="number">0.0</span> <span class="comment"># optional</span></span><br><span class="line"></span><br><span class="line"><span class="attr">idleTimerPeriod</span>   = <span class="string">&quot;1s&quot;</span></span><br><span class="line"><span class="attr">idleTimerDisabled</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">pollTimerPeriod</span>   = <span class="string">&quot;1m&quot;</span></span><br><span class="line"><span class="attr">pollTimerDisabled</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">drumbeatEnabled</span>  = <span class="literal">true</span></span><br><span class="line"><span class="attr">drumbeatSchedule</span> = <span class="string">&quot;CRON_TZ=UTC * */20 * * * *&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    // data source 1</span></span><br><span class="line"><span class="string">    ds1 [type=&quot;http&quot; method=GET url=&quot;https://pricesource1.com&quot;</span></span><br><span class="line"><span class="string">         requestData=&quot;&#123;\\&quot;coin\\&quot;: \\&quot;ETH\\&quot;, \\&quot;market\\&quot;: \\&quot;USD\\&quot;&#125;&quot;]</span></span><br><span class="line"><span class="string">    ds1_parse [type=&quot;jsonparse&quot; path=&quot;data,result&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    // data source 2</span></span><br><span class="line"><span class="string">    ds2 [type=&quot;http&quot; method=GET url=&quot;https://pricesource2.com&quot;</span></span><br><span class="line"><span class="string">         requestData=&quot;&#123;\\&quot;coin\\&quot;: \\&quot;ETH\\&quot;, \\&quot;market\\&quot;: \\&quot;USD\\&quot;&#125;&quot;]</span></span><br><span class="line"><span class="string">    ds2_parse [type=&quot;jsonparse&quot; path=&quot;data,result&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ds1 -&gt; ds1_parse -&gt; medianized_answer</span></span><br><span class="line"><span class="string">    ds2 -&gt; ds2_parse -&gt; medianized_answer</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    medianized_answer [type=median]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="keeper-jobs">Keeper Jobs</h2><p>Keeper jobs occasionally poll a smart contract method that expresseswhether something in the contract is ready for some on-chain action tobe performed. When it's ready, the job executes that on-chainaction.</p><p>Examples:</p><ul><li>Liquidations</li><li>Rebalancing portfolios</li><li>Rebase token supply adjustments</li><li>Auto-compounding</li><li>Limit orders</li></ul><p>不断地判断合约逻辑，如果符合条件则执行。</p><p>TOML模板</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span>            = <span class="string">&quot;keeper&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span>   = <span class="number">1</span></span><br><span class="line"><span class="attr">evmChainID</span>      = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span>            = <span class="string">&quot;example keeper spec&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0x7b3EC232b08BD7b4b3305BE0C044D907B2DF960B&quot;</span></span><br><span class="line"><span class="attr">fromAddress</span>     = <span class="string">&quot;0xa8037A20989AFcBC51798de9762b351D63ff462e&quot;</span></span><br></pre></td></tr></table></figure><ul><li><code>evmChainID</code>: The numeric chain ID of the chain on whichChainlink Automation Registry is deployed</li><li><code>contractAddress</code>: The address of the ChainlinkAutomation Registry contract to poll and update</li><li><code>fromAddress</code>: The Oracle node address from which to sendupdates 【申请数据更新地预言机地址】</li><li><code>externalJobID</code>: This is an optional field. When omittedit will be generated</li></ul><h2 id="off-chain-reporting-jobs">Off-chain reporting Jobs</h2><p>OCR jobs (off-chain reporting jobs) are used very similarly to FluxMonitor jobs. They update data feeds with aggregated data from manyChainlink oracle nodes. However, they do this aggregation using acryptographically-secure off-chain protocol that makes it possible foronly a single node to submit all answers from all participating nodesduring each round (with proofs that the other nodes' answers werelegitimately provided by those nodes), which saves a significant amountof gas.</p><p>Off-chain reporting jobs require the<code>FEATURE_OFFCHAIN_REPORTING=true</code> environment variable.</p><p>TOML模板</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span>               = <span class="string">&quot;offchainreporting&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span>      = <span class="number">1</span></span><br><span class="line"><span class="attr">evmChainID</span>         = <span class="number">1</span></span><br><span class="line"><span class="attr">contractAddress</span>    = <span class="string">&quot;0x27548a32b9aD5D64c5945EaE9Da5337bc3169D15&quot;</span></span><br><span class="line"><span class="attr">p2pBootstrapPeers</span>  = [</span><br><span class="line">    <span class="string">&quot;/dns4/chain.link/tcp/1234/p2p/16Uiu2HAm58SP7UL8zsnpeuwHfytLocaqgnyaYKP8wu7qRdrixLju&quot;</span>,</span><br><span class="line">]</span><br><span class="line"><span class="attr">isBootstrapPeer</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">externalJobID</span>   = <span class="string">&quot;0EEC7E1D-D0D2-476C-A1A8-72DFB6633F05&quot;</span></span><br></pre></td></tr></table></figure><ul><li><code>contractAddress</code>: The address of the<code>OffchainReportingAggregator</code> contract.</li><li><code>evmChainID</code>: The chain ID of the EVM chain in which thejob will operate.</li><li><code>p2pBootstrapPeers</code>: A list of libp2p dial addresses ofthe other bootstrap nodes helping oracle nodes find one another on thenetwork. It is used with P2P networking stack V1 as follows:<code>p2pBootstrapPeers = [ "/dns4/&lt;host name or ip&gt;/tcp/&lt;port&gt;/p2p/&lt;bootstrap node's P2P ID&gt;" ]</code>【引导对等节点】</li><li><code>p2pv2Boostrappers</code>: A list of libp2p dial addresses ofthe other bootstrap nodes helping oracle nodes find one another on thenetwork. It is used with P2P networking stack V2 as follows:<code>p2pv2Boostrappers = [ "&lt;bootstrap node's P2P ID&gt;@&lt;host name or ip&gt;:&lt;port&gt;" ]</code></li><li><code>isBootstrapPeer</code>: This must be set to<code>true</code>.</li></ul><h2 id="webhook-jobs">Webhook Jobs</h2><p>Webhook jobs can be initiated by HTTP request, either by a user orexternal initiator.</p><p>:::note You'll need <code>FEATURE_WEBHOOK_V2=true</code> in your<code>.env</code> file. :::</p><p>This is an example webhook job:</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span>            = <span class="string">&quot;webhook&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span>   = <span class="number">1</span></span><br><span class="line"><span class="attr">externalInitiators</span> = [</span><br><span class="line">  &#123; name = <span class="string">&quot;my-external-initiator-1&quot;</span>, spec = <span class="string">&quot;&#123;\&quot;foo\&quot;: 42&#125;&quot;</span> &#125;,</span><br><span class="line">  &#123; name = <span class="string">&quot;my-external-initiator-2&quot;</span>, spec = <span class="string">&quot;&#123;&#125;&quot;</span> &#125;</span><br><span class="line">]</span><br><span class="line"><span class="attr">observationSource</span>   = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    parse_request  [type=&quot;jsonparse&quot; path=&quot;data,result&quot; data=&quot;$(jobRun.requestBody)&quot;]</span></span><br><span class="line"><span class="string">    multiply       [type=&quot;multiply&quot; input=&quot;$(parse_request)&quot; times=&quot;100&quot;]</span></span><br><span class="line"><span class="string">    send_to_bridge [type=&quot;bridge&quot; name=&quot;my_bridge&quot; requestData=&quot;&#123; \\&quot;result\\&quot;: $(multiply) &#125;&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    parse_request -&gt; multiply -&gt; send_to_bridge</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h1 id="task类型">Task类型</h1>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Military Theory</title>
      <link href="/2023/05/08/Military-Theory/"/>
      <url>/2023/05/08/Military-Theory/</url>
      
        <content type="html"><![CDATA[<h1 id="military-theory">Military Theory</h1><p>为了人民可以生活在平安幸福的美丽中国，创造美好生活，国家安全问题必须要放在首位。当代大学生国家安全意识比较薄弱，急需认识到国家安全观的重要性。</p><p>大学生应在学校组织的军事训练中，增强自身军事素质，强化国防观念。努力学习思想政治课程，坚定信念。认真学习军事理论课程，了解中国国情与世界格局。了解国家最基本，最真实的情况。</p><p>军事理论课程让我们了解了中华民族的悠久的军事思想与其深刻内涵；并且了解到军事思想是军事理论的基础，在军事学上占首要地位，并对其他军事学科起到指导作用。只有思想够硬，作风顽强，才能立足于世界军事之林。概述世界军事，了解了世界的复杂多变，了解霸权主义，以及危机四伏的国家关系与军事冲突，让我们所有人意识到要想在这个世界上立足需要足够的军事能力和民族团聚力才可以。</p><p>和平与发展的是时代的主旋律，但是霸权主义与强权政治依然存在。民族矛盾、领土争端和地区冲突此起彼伏，局部战争、恐怖主义愈演愈烈，国防安全仍是国家之首务。因此，在争取和平、谋求发展的进程中，更加需要大学生加强国防教育、增强国防观念、培养国防意识。国防意识是一个国家安全的根基，一个国家，一个民族，如果国防意识淡化，无异于精神支柱的崩溃。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Military Theory </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】Base Operation</title>
      <link href="/2023/05/05/%E3%80%90Chainlink%E3%80%91Base-Operation/"/>
      <url>/2023/05/05/%E3%80%90Chainlink%E3%80%91Base-Operation/</url>
      
        <content type="html"><![CDATA[<h2 id="datafeed">DataFeed</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.8.7;</span><br><span class="line"></span><br><span class="line">import &quot;@chainlink/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol&quot;;</span><br><span class="line"></span><br><span class="line">contract PriceFeed &#123;</span><br><span class="line">    AggregatorV3Interface internal priceFeed;</span><br><span class="line">    AggregatorV3Interface internal linkPriceFeed;</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        priceFeed = AggregatorV3Interface(0x1b44F3514812d835EB1BDB0acB33d3fA3351Ee43);</span><br><span class="line">        linkPriceFeed = AggregatorV3Interface(0xc59E3633BAAC79493d908e63626716e204A45EdF);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 0.0002918962000000</span><br><span class="line">    function getPrice() public view returns (int256) &#123;</span><br><span class="line">        (</span><br><span class="line">            ,</span><br><span class="line">            int256 answer,</span><br><span class="line">            ,</span><br><span class="line">            ,</span><br><span class="line">        ) = priceFeed.latestRoundData();</span><br><span class="line">        return answer;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 7.09477626</span><br><span class="line">    function getLinkPrice() public view returns (int256) &#123;</span><br><span class="line">        (</span><br><span class="line">            ,</span><br><span class="line">            int256 answer,</span><br><span class="line">            ,</span><br><span class="line">            ,</span><br><span class="line">        ) = linkPriceFeed.latestRoundData();</span><br><span class="line">        return answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="chainlink-vrf">Chainlink VRF</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">// 1.register VRF subscription</span><br><span class="line">// 2.add consumer into subscription</span><br><span class="line">// 3.consumer -&gt; requests random number</span><br><span class="line">// 4.consumer &lt;- receive random number</span><br><span class="line"></span><br><span class="line">pragma solidity ^0.8.7;</span><br><span class="line"></span><br><span class="line">import &quot;@chainlink/contracts/src/v0.8/interfaces/VRFCoordinatorV2Interface.sol&quot;;</span><br><span class="line">import &quot;@chainlink/contracts/src/v0.8/VRFConsumerBaseV2.sol&quot;;</span><br><span class="line"></span><br><span class="line">contract ChainlinkVRFDemo is VRFConsumerBaseV2 &#123;</span><br><span class="line">    </span><br><span class="line">    VRFCoordinatorV2Interface COORDINATOR;</span><br><span class="line">    address vrfCoordinatorAddr = 0x8103B0A8A00be2DDC778e6e7eaa21791Cd364625;</span><br><span class="line">    bytes32 keyHash = 0x474e34a077df58807dbe9c96d3c009b23b3c6d0cce433e59bbf5b34f823bc56c;</span><br><span class="line">    </span><br><span class="line">    uint64 s_subId;</span><br><span class="line">    uint16 requestConfirmations = 3;</span><br><span class="line">    uint32 callbackGasLimit = 200_000;</span><br><span class="line">    uint32 numWords = 3;</span><br><span class="line">    address owner;</span><br><span class="line"></span><br><span class="line">    uint256[] public s_randomWords;</span><br><span class="line">    uint256 public requestId;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    constructor(uint64 subId) VRFConsumerBaseV2(vrfCoordinatorAddr) &#123;</span><br><span class="line">        COORDINATOR = VRFCoordinatorV2Interface(vrfCoordinatorAddr);</span><br><span class="line">        s_subId = subId;</span><br><span class="line">        owner = msg.sender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function requestRandomWords() external &#123;</span><br><span class="line">        require(msg.sender == owner);</span><br><span class="line">        requestId = COORDINATOR.requestRandomWords(</span><br><span class="line">            keyHash,</span><br><span class="line">            s_subId,</span><br><span class="line">            requestConfirmations,</span><br><span class="line">            callbackGasLimit,</span><br><span class="line">            numWords</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function fulfillRandomWords(uint256 requestId, uint256[] memory randomWords) internal override &#123;</span><br><span class="line">        s_randomWords = randomWords;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【WhileTrueLearn】</title>
      <link href="/2023/04/28/%E3%80%90WhileTrueLearn%E3%80%91/"/>
      <url>/2023/04/28/%E3%80%90WhileTrueLearn%E3%80%91/</url>
      
        <content type="html"><![CDATA[<h1 id="群众心理学">群众心理学</h1><img src="/2023/04/28/%E3%80%90WhileTrueLearn%E3%80%91/image-20230428181911743.png" class="" title="image-20230428181911743">]]></content>
      
      
      
        <tags>
            
            <tag> Game </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】External Adapters</title>
      <link href="/2023/04/26/%E3%80%90Chainlink%E3%80%91External-Adapters/"/>
      <url>/2023/04/26/%E3%80%90Chainlink%E3%80%91External-Adapters/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>原文链接：<ahref="https://docs.chain.link/chainlink-nodes/external-adapters/external-adapters">ExternalAdapters Introduction | Chainlink Documentation</a></p><p><ahref="https://blog.chain.link/build-and-use-external-adapters/?_ga=2.160822265.557807439.1682514727-150248235.1677582268&amp;_gac=1.187294426.1681969188.CjwKCAjwov6hBhBsEiwAvrvN6D-zs8juILKuMNsV9aMfAu43pQHFkp9hLHTovA-QQy2IfopEadrKwxoCs1wQAvD_BwE">Buildingand using External Adapters (chain.link)</a></p><ol type="1"><li>什么是外部适配器？</li><li>如何搭建外部适配器？</li><li>谁应该托管它？</li><li>如何使用？</li></ol><h2 id="什么是外部适配器">什么是外部适配器</h2><p>外部适配器能够实现Chainlink预言机节点本身不能实现的功能，比如对数据的加密解密等。外部适配器相当于链下API数据源到预言机节点的过渡桥梁</p><h2 id="如何搭建外部适配器">如何搭建外部适配器</h2><ol type="1"><li>Add it to node/adapter listing service</li><li>Ask a node operator to host it</li><li>Run a node yourself</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Database】未分类的数据库原理</title>
      <link href="/2023/04/18/%E3%80%90Database%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/"/>
      <url>/2023/04/18/%E3%80%90Database%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="未分类的数据库原理">未分类的数据库原理</h1><h2 id="数据依赖的公理系统">数据依赖的公理系统</h2><p>In relation <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="11.559ex" height="1.984ex" role="img" focusable="false" viewBox="0 -683 5109 877"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mo" transform="translate(1036.8,0)"><path data-c="3C" d="M694 -11T694 -19T688 -33T678 -40Q671 -40 524 29T234 166L90 235Q83 240 83 250Q83 261 91 266Q664 540 678 540Q681 540 687 534T694 519T687 505Q686 504 417 376L151 250L417 124Q686 -4 687 -5Q694 -11 694 -19Z"></path></g><g data-mml-node="mi" transform="translate(2092.6,0)"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></g><g data-mml-node="mo" transform="translate(2859.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(3304.2,0)"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="mo" transform="translate(4331,0)"><path data-c="3E" d="M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"></path></g></g></g></svg></mjx-container></span>, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="20.296ex" height="2.059ex" role="img" focusable="false" viewBox="0 -716 8970.9 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></g><g data-mml-node="mo" transform="translate(1044.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2100.6,0)"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mo" transform="translate(750,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(1194.7,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(1953.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2398.3,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(3158.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(3603,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mo" transform="translate(4431,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(4875.7,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path></g><g data-mml-node="mo" transform="translate(5639.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(6084.3,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g></g></g></g></svg></mjx-container></p><p><span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="66.593ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 29434.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="mo" transform="translate(1026.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mrow" transform="translate(2082.6,0)"><g data-mml-node="mo"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mi" transform="translate(1259,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g><g data-mml-node="mo" transform="translate(2322.8,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(3600.6,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(4360.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(4805.2,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mi" transform="translate(5564.2,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mo" transform="translate(6670,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(7947.8,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path></g><g data-mml-node="mo" transform="translate(8711.8,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(9156.4,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mi" transform="translate(9984.4,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g><g data-mml-node="mo" transform="translate(11048.2,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(12326,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(13086,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(13530.7,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(14280.7,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mi" transform="translate(15108.7,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g><g data-mml-node="mo" transform="translate(16172.4,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(17450.2,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mi" transform="translate(18209.2,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(18969.2,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(19413.9,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(20163.9,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g><g data-mml-node="mo" transform="translate(21227.7,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(22505.4,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(23264.4,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(23709.1,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(24745.9,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(26023.7,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mo" transform="translate(26851.7,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"></path></g></g></g></g></svg></mjx-container></span></p><ol type="1"><li>Please find <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.357ex;" xmlns="http://www.w3.org/2000/svg" width="4.559ex" height="1.895ex" role="img" focusable="false" viewBox="0 -680 2015.1 837.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="TeXAtom" transform="translate(676,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1223,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g></g></svg></mjx-container></span></li><li>Please find Candidate Key for R</li><li>Format the <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="11.559ex" height="1.984ex" role="img" focusable="false" viewBox="0 -683 5109 877"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mo" transform="translate(1036.8,0)"><path data-c="3C" d="M694 -11T694 -19T688 -33T678 -40Q671 -40 524 29T234 166L90 235Q83 240 83 250Q83 261 91 266Q664 540 678 540Q681 540 687 534T694 519T687 505Q686 504 417 376L151 250L417 124Q686 -4 687 -5Q694 -11 694 -19Z"></path></g><g data-mml-node="mi" transform="translate(2092.6,0)"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></g><g data-mml-node="mo" transform="translate(2859.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(3304.2,0)"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="mo" transform="translate(4331,0)"><path data-c="3E" d="M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"></path></g></g></g></svg></mjx-container></span> into3NF (give derivation process)</li></ol><img src="/2023/04/18/%E3%80%90Database%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/image-20230418173647471.png" class="" title="image-20230418173647471"><img src="/2023/04/18/%E3%80%90Database%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/image-20230418173704320.png" class="" title="image-20230418173704320">]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Base】求职简历以及面试教程</title>
      <link href="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/"/>
      <url>/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="求职简历以及面试教程">求职简历以及面试教程</h1><h2 id="求职简历">求职简历</h2><p>先放ppt，后面有空整理......</p><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415182847514.png" class="" title="image-20230415182847514"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415182913701.png" class="" title="image-20230415182913701"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415182920882.png" class="" title="image-20230415182920882"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415182927471.png" class="" title="image-20230415182927471"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415182940158.png" class="" title="image-20230415182940158"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415182950822.png" class="" title="image-20230415182950822"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183001480.png" class="" title="image-20230415183001480"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183009136.png" class="" title="image-20230415183009136"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183017897.png" class="" title="image-20230415183017897"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183028843.png" class="" title="image-20230415183028843"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183044957.png" class="" title="image-20230415183044957"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183056766.png" class="" title="image-20230415183056766"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183109019.png" class="" title="image-20230415183109019"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183114180.png" class="" title="image-20230415183114180"><h2 id="面试">面试</h2><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183200056.png" class="" title="image-20230415183200056"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183203335.png" class="" title="image-20230415183203335"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183207218.png" class="" title="image-20230415183207218"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183213376.png" class="" title="image-20230415183213376"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183219333.png" class="" title="image-20230415183219333"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183227504.png" class="" title="image-20230415183227504"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183233757.png" class="" title="image-20230415183233757"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183238215.png" class="" title="image-20230415183238215"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183245066.png" class="" title="image-20230415183245066"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183249988.png" class="" title="image-20230415183249988"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183257814.png" class="" title="image-20230415183257814"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183304557.png" class="" title="image-20230415183304557"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183310265.png" class="" title="image-20230415183310265"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183315697.png" class="" title="image-20230415183315697"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183320642.png" class="" title="image-20230415183320642"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183326552.png" class="" title="image-20230415183326552"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183333023.png" class="" title="image-20230415183333023"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183337844.png" class="" title="image-20230415183337844"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183342559.png" class="" title="image-20230415183342559"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183348867.png" class="" title="image-20230415183348867"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183353718.png" class="" title="image-20230415183353718"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183358108.png" class="" title="image-20230415183358108"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183402691.png" class="" title="image-20230415183402691"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183407300.png" class="" title="image-20230415183407300"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183413100.png" class="" title="image-20230415183413100"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183417591.png" class="" title="image-20230415183417591"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183422172.png" class="" title="image-20230415183422172"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183427405.png" class="" title="image-20230415183427405"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183435215.png" class="" title="image-20230415183435215"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183440475.png" class="" title="image-20230415183440475"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183444931.png" class="" title="image-20230415183444931"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183451238.png" class="" title="image-20230415183451238"><h2 id="无领导面试模拟">无领导面试模拟</h2><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183535222.png" class="" title="image-20230415183535222"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183540181.png" class="" title="image-20230415183540181"><img src="/2023/04/15/%E3%80%90Base%E3%80%91%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E4%BB%A5%E5%8F%8A%E9%9D%A2%E8%AF%95%E6%95%99%E7%A8%8B/image-20230415183544638.png" class="" title="image-20230415183544638">]]></content>
      
      
      
        <tags>
            
            <tag> Base </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Assembly】未分类的汇编语言</title>
      <link href="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"/>
      <url>/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<h1 id="课本">课本</h1><h2 id="编译方法">编译方法</h2><p>编译与连接</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">masm test.asm</span><br><span class="line">link test.obj</span><br></pre></td></tr></table></figure><p>生成可执行文件后执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test.exe</span><br></pre></td></tr></table></figure><h2 id="伪指令定义">伪指令定义</h2><p>伪指令用来指出程序分段、数据定义、存储分配、程序开始和结束等相关信息。</p><h3 id="段定义伪指令">段定义伪指令</h3><p>segment和ends成对使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">...</span><br><span class="line">data ends</span><br><span class="line">extra segment</span><br><span class="line">...</span><br><span class="line">extra ends</span><br><span class="line">stack segment</span><br><span class="line">...</span><br><span class="line">stack ends</span><br><span class="line">code segment</span><br><span class="line">...</span><br><span class="line">code ends</span><br></pre></td></tr></table></figure><p>使用assume伪指令知名段寄存器与段的对应关系</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code,ds:data,es:extra,ss:stack</span><br></pre></td></tr></table></figure><h3 id="数据定义伪指令">数据定义伪指令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db 定义字节单元（byte）</span><br><span class="line">dw 定义字单元（word）</span><br><span class="line">dd 定义双字单元（double word）</span><br><span class="line">dq 定义四字单元</span><br><span class="line">dt 定义十字节单元</span><br></pre></td></tr></table></figure><p>举例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">x db 56</span><br><span class="line">e_1 dw 2030H</span><br><span class="line">carry dd 12345678H</span><br><span class="line">data ends</span><br></pre></td></tr></table></figure><p>可以使用dup循环指令定义存储空间</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n dup(m) ;表示n个m</span><br></pre></td></tr></table></figure><h3 id="其他伪指令">其他伪指令</h3><h2 id="个数倒序存放">3个数倒序存放</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x dw 12,34,56</span><br><span class="line">    y dw 3 dup(?)</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data</span><br><span class="line">    mov ds,ax</span><br><span class="line">    push x</span><br><span class="line">    push x+2</span><br><span class="line">    push x+4</span><br><span class="line">    pop y</span><br><span class="line">    pop y+2</span><br><span class="line">    pop y+4</span><br><span class="line">    mov ah,4ch</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h2 id="查十六进制数的ascii码表">查十六进制数的ASCII码表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    table db 30h,31h,32h,33h,34h,35h,36h,37h</span><br><span class="line">          db 38h,39h,41h,42h,43h,44h,45h,46h</span><br><span class="line">    hex db 6 ;查找6</span><br><span class="line">    ascii db ?</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">begin: </span><br><span class="line">    mov ax,data</span><br><span class="line">    mov ds,ax</span><br><span class="line">    mov bx,offset table</span><br><span class="line">    mov al,hex</span><br><span class="line">    xlat</span><br><span class="line">    mov ascii,al</span><br><span class="line">    mov dl,ascii</span><br><span class="line">    mov ah,02h</span><br><span class="line">    int 21h</span><br><span class="line">    mov ah,4ch</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end begin</span><br></pre></td></tr></table></figure><h2 id="以内的十进制数与一位十六进制数的转换">15以内的十进制数与一位十六进制数的转换</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    table db 30h, 31h, 32h, 33h, 34h, 35h, 36h, 37h</span><br><span class="line">          db 38h, 39h, 41h, 42h, 43h, 44h, 45h, 46h</span><br><span class="line">    x db 13 ; 查询十进制数13</span><br><span class="line">    ascii db ?</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code, ds:data</span><br><span class="line">begin: </span><br><span class="line">mov ax, data</span><br><span class="line">    mov ds, ax</span><br><span class="line">    mov bl, x   ;x是字节数，因此放入bl寄存器（bx寄存器的低位）</span><br><span class="line">    mov bh, 0   ;bx的高位清零</span><br><span class="line">    mov al,table[bx]    ;源操作数为相对寄存器寻址</span><br><span class="line">    mov ascii, al</span><br><span class="line">    mov dl, al</span><br><span class="line">    mov ah, 02h     ;显示这个十六进制数</span><br><span class="line">    int 21h</span><br><span class="line">    mov ah, 4ch</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end begin</span><br></pre></td></tr></table></figure><h2 id="两个双精度数加法">两个双精度数加法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">; 4-4.asm 两个双精度数加法</span><br><span class="line">data segment    </span><br><span class="line">    dd 20034980h</span><br><span class="line">    dd 1008e699h</span><br><span class="line">    dd ?</span><br><span class="line">data ends</span><br><span class="line">code segment    </span><br><span class="line">    assume cs:code, ds:data</span><br><span class="line">start: </span><br><span class="line">    mov ax, data</span><br><span class="line">    mov ds, ax</span><br><span class="line">    mov ax, ds:[0]</span><br><span class="line">    mov dx, ds:[2]</span><br><span class="line">    mov bx, ds:[4]</span><br><span class="line">    mov cx, ds:[6]</span><br><span class="line">    add ax, bx  ; 低字相加</span><br><span class="line">    adc dx, cx  ; 高字带进位加</span><br><span class="line">    mov ds:[8], ax ; 将结果存放在数据段中</span><br><span class="line">    mov ds:[10], dx</span><br><span class="line">    mov ah, 4ch</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h2 id="分支程序设计5-1">分支程序设计5-1</h2><p>按照如下公式编写汇编代码，实现输入x并输出对应的y <span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -3.828ex;" xmlns="http://www.w3.org/2000/svg" width="25.444ex" height="8.787ex" role="img" focusable="false" viewBox="0 -2192 11246.1 3883.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(767.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mrow" transform="translate(1823.6,0)"><g data-mml-node="mo"><path data-c="23A7" d="M712 899L718 893V876V865Q718 854 704 846Q627 793 577 710T510 525Q510 524 509 521Q505 493 504 349Q504 345 504 334Q504 277 504 240Q504 -2 503 -4Q502 -8 494 -9T444 -10Q392 -10 390 -9Q387 -8 386 -5Q384 5 384 230Q384 262 384 312T383 382Q383 481 392 535T434 656Q510 806 664 892L677 899H712Z" transform="translate(0,1293)"></path><path data-c="23A9" d="M718 -893L712 -899H677L666 -893Q542 -825 468 -714T385 -476Q384 -466 384 -282Q384 3 385 5L389 9Q392 10 444 10Q486 10 494 9T503 4Q504 2 504 -239V-310V-366Q504 -470 508 -513T530 -609Q546 -657 569 -698T617 -767T661 -812T699 -843T717 -856T718 -876V-893Z" transform="translate(0,-793)"></path><path data-c="23A8" d="M389 1159Q391 1160 455 1160Q496 1160 498 1159Q501 1158 502 1155Q504 1145 504 924Q504 691 503 682Q494 549 425 439T243 259L229 250L243 241Q349 175 421 66T503 -182Q504 -191 504 -424Q504 -600 504 -629T499 -659H498Q496 -660 444 -660T390 -659Q387 -658 386 -655Q384 -645 384 -425V-282Q384 -176 377 -116T342 10Q325 54 301 92T255 155T214 196T183 222T171 232Q170 233 170 250T171 268Q171 269 191 284T240 331T300 407T354 524T383 679Q384 691 384 925Q384 1152 385 1155L389 1159Z" transform="translate(0,0)"></path><svg width="889" height="323" y="1060" x="0" viewBox="0 56.9 889 323"><path data-c="23AA" d="M384 150V266Q384 304 389 309Q391 310 455 310Q496 310 498 309Q502 308 503 298Q504 283 504 150Q504 32 504 12T499 -9H498Q496 -10 444 -10T390 -9Q386 -8 385 2Q384 17 384 150Z" transform="scale(1,1.588)"></path></svg><svg width="889" height="323" y="-883" x="0" viewBox="0 56.9 889 323"><path data-c="23AA" d="M384 150V266Q384 304 389 309Q391 310 455 310Q496 310 498 309Q502 308 503 298Q504 283 504 150Q504 32 504 12T499 -9H498Q496 -10 444 -10T390 -9Q386 -8 385 2Q384 17 384 150Z" transform="scale(1,1.588)"></path></svg></g><g data-mml-node="mtable" transform="translate(889,0)"><g data-mml-node="mtr" transform="translate(0,1358)"><g data-mml-node="mtd" transform="translate(892.9,0)"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g><g data-mml-node="mtd" transform="translate(4961.2,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(849.8,0)"><path data-c="3C" d="M694 -11T694 -19T688 -33T678 -40Q671 -40 524 29T234 166L90 235Q83 240 83 250Q83 261 91 266Q664 540 678 540Q681 540 687 534T694 519T687 505Q686 504 417 376L151 250L417 124Q686 -4 687 -5Q694 -11 694 -19Z"></path></g><g data-mml-node="mn" transform="translate(1905.6,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g><g data-mml-node="mtr" transform="translate(0,-42)"><g data-mml-node="mtd"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(1294.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(2294.4,0)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mtd" transform="translate(3794.4,0)"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(777.8,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mi" transform="translate(1833.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(2683.3,0)"><path data-c="3C" d="M694 -11T694 -19T688 -33T678 -40Q671 -40 524 29T234 166L90 235Q83 240 83 250Q83 261 91 266Q664 540 678 540Q681 540 687 534T694 519T687 505Q686 504 417 376L151 250L417 124Q686 -4 687 -5Q694 -11 694 -19Z"></path></g><g data-mml-node="mn" transform="translate(3739.1,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g></g></g><g data-mml-node="mtr" transform="translate(0,-1442)"><g data-mml-node="mtd" transform="translate(611.2,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(572,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(1072,0)"><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></g></g><g data-mml-node="mtd" transform="translate(4711.2,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(849.8,0)"><path data-c="2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mn" transform="translate(1905.6,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g></g></g></g><g data-mml-node="mo" transform="translate(9422.6,0) translate(0 250)"></g></g></g></g></svg></mjx-container></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x dw 9,-6,34</span><br><span class="line">    y dw 3 dup(?)</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code, ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data</span><br><span class="line">    mov ds,ax</span><br><span class="line">    mov cx,3;循环三次</span><br><span class="line">    mov si,0</span><br><span class="line">let0:</span><br><span class="line">    mov ax,x[si];取出x</span><br><span class="line">    cmp ax,0;x&gt;=0?</span><br><span class="line">    jge let1;是，转到let1</span><br><span class="line">    mov bx,ax;否，计算x*x</span><br><span class="line">    imul bx;</span><br><span class="line">    jmp out1;跳到公共出口out1</span><br><span class="line">let1:</span><br><span class="line">    cmp ax,10;x&gt;=10?</span><br><span class="line">    jge let2;是，转到let2</span><br><span class="line">    sal ax,1;否，计算2x+3</span><br><span class="line">    add ax,3;</span><br><span class="line">    jmp out1;跳到公共出口out1</span><br><span class="line">let2:</span><br><span class="line">    mov bl,6;计算x/6</span><br><span class="line">    idiv bl;商在al，余数在ah</span><br><span class="line">out1:</span><br><span class="line">    mov y[si],ax;保存y</span><br><span class="line">    add si,2;</span><br><span class="line">    dec cx;cx减1</span><br><span class="line">    cmp cx,0;</span><br><span class="line">    jnz let0;cx!=0转移到let0</span><br><span class="line">    mov ah,4ch;cx=0程序结束</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/5-1.png" class="" title="5-1"><h2 id="分支程序设计5-2">分支程序设计5-2</h2><p>计算<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="11.579ex" height="1.971ex" role="img" focusable="false" viewBox="0 -666 5118 871"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(767.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1823.6,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g><g data-mml-node="mi" transform="translate(2323.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(3117.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(4118,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(500,0)"></path></g></g></g></svg></mjx-container></span>，如果结果为负，求绝对值。并显示十进制结果。</p><p>实际上结果就是<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.564ex;" xmlns="http://www.w3.org/2000/svg" width="12.837ex" height="2.26ex" role="img" focusable="false" viewBox="0 -749.5 5674 999"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(767.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(1823.6,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mn" transform="translate(2101.6,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g><g data-mml-node="mi" transform="translate(2601.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(3395.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(4396,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(5396,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g></g></g></svg></mjx-container></span>，直接计算结果就行。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x db ?</span><br><span class="line">    y dw ?</span><br><span class="line">    info db 'input: $'</span><br><span class="line">    cc db 0ah,0dh,'y = $'</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov dx,offset info;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1;</span><br><span class="line">    int 21h;</span><br><span class="line">    sub al,30h;</span><br><span class="line">    mov bl,5;</span><br><span class="line">    imul bl;</span><br><span class="line">    sub ax,18;</span><br><span class="line">    jns let0;</span><br><span class="line">    neg ax;</span><br><span class="line">let0:</span><br><span class="line">    mov y,ax;</span><br><span class="line">    mov cx,0;</span><br><span class="line">    mov bx,10;</span><br><span class="line">let1:</span><br><span class="line">    mov dx,0;</span><br><span class="line">    inc cx;</span><br><span class="line">    idiv bx;</span><br><span class="line">    push dx;</span><br><span class="line">    cmp ax,0;</span><br><span class="line">    jnz let1;</span><br><span class="line">    mov dx,offset cc;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h</span><br><span class="line">let2:</span><br><span class="line">    pop ax;</span><br><span class="line">    add ax,0030h;</span><br><span class="line">    mov dl,al;</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    dec cx;</span><br><span class="line">    cmp cx,0;</span><br><span class="line">    jnz let2;</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/5-2.png" class="" title="5-2"><h2 id="分支程序设计5-3">分支程序设计5-3</h2><p>从键盘输入一串字符，如果是数字存入NUMB单元，如果是字母，将大写字母存入CAPI单元，小写字母存入LETT单元，分别统计个数，输入回车时退出。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    numb db 10 dup(?);</span><br><span class="line">    capi db 10 dup(?);</span><br><span class="line">    lett db 10 dup(?);</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">let0:</span><br><span class="line">    mov ah,1; 键盘输入</span><br><span class="line">    int 21h;</span><br><span class="line">    cmp al,0dh; 判断回车</span><br><span class="line">    jz exit;</span><br><span class="line">    test al,40h; 用于区分字母和数字，第6位</span><br><span class="line">    jz let1;</span><br><span class="line">    test al,20h; 用于区分大小写字母，第5位</span><br><span class="line">    jz let2;</span><br><span class="line">    cmp al,7ah; 排除不是小写字母</span><br><span class="line">    ja exit;</span><br><span class="line">    mov lett[bx],al;</span><br><span class="line">    inc bx; 小写个数加1</span><br><span class="line">    jmp let0;</span><br><span class="line">let2:</span><br><span class="line">    cmp al,5ah;</span><br><span class="line">    ja exit;</span><br><span class="line">    mov capi[si],al;</span><br><span class="line">    inc si; 大写个数加1</span><br><span class="line">    jmp let0;</span><br><span class="line">let1:</span><br><span class="line">    cmp al,'0';</span><br><span class="line">    jb exit;</span><br><span class="line">    cmp al,'9';</span><br><span class="line">    ja exit;</span><br><span class="line">    mov numb[di],al;</span><br><span class="line">    inc di; 数字个数加1</span><br><span class="line">    jmp let0;</span><br><span class="line">exit:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/5-3.png" class="" title="5-3"><h2 id="分支程序设计5-4">分支程序设计5-4</h2><p>输入字符串，小写转大写</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    mess1 db 0ah,0dh,'input:$';</span><br><span class="line">    mess2 db 0ah,0dh,'output:$';</span><br><span class="line">    buff db 10,?,10 dup(?);</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">prog1:</span><br><span class="line">    mov dx,offset mess1; 显示提示1</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dx,offset buff; 输入字符串</span><br><span class="line">    mov ah,10;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov cl,buff+1; 实际输入的字母个数</span><br><span class="line">    mov bx,2; 第一个字母的地址</span><br><span class="line">    mov dx,offset mess2; 显示提示2</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">let1:</span><br><span class="line">    and buff[bx],0dfh; 小写字母变为大写</span><br><span class="line">    mov dl,buff[bx]; 循环显示每个字母</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    inc bx;</span><br><span class="line">    dec cl;</span><br><span class="line">    jnz let1;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230418093005059.png" class="" title="image-20230418093005059"><h2 id="分支程序设计5-5">分支程序设计5-5</h2><p>输入一个数字<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.294ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 572 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g></svg></mjx-container></span>，输出它的十进制<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.282ex" height="1.91ex" role="img" focusable="false" viewBox="0 -833.2 1008.6 844.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g></g></g></svg></mjx-container></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    mess1 db 0ah,0dh,'input:$';</span><br><span class="line">    mess2 db 0ah,0dh,'output:$';</span><br><span class="line">    x db 3 dup(?);</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">let0:</span><br><span class="line">    ;显示mess1</span><br><span class="line">    mov dx,offset mess1; </span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    ;输入0~9</span><br><span class="line">    mov ah,1; </span><br><span class="line">    int 21h;</span><br><span class="line">    ;输入判断</span><br><span class="line">    cmp al,27; 判断是不是esc，是则退出</span><br><span class="line">    jz out1;</span><br><span class="line">    cmp al,'0'; 判断输入的是不是个数字</span><br><span class="line">    jb let0;</span><br><span class="line">    cmp al,'9';</span><br><span class="line">    ja let0;</span><br><span class="line">    </span><br><span class="line">    and al,0fh; 去掉ASCII码</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,al; 求m³，结果存在al中</span><br><span class="line">    mul bl;</span><br><span class="line">    mul bl; </span><br><span class="line">    mov bl,10; 立方变为10进制</span><br><span class="line">    div bl; ah存商，al存余数</span><br><span class="line">    add ah,30h; </span><br><span class="line">    mov x,ah; 先用x保存个位</span><br><span class="line">    </span><br><span class="line">    cmp al,10; 判断余数是不是大于10；</span><br><span class="line">    jb let2;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    div bl;</span><br><span class="line">    add ah,30h;</span><br><span class="line">    mov x+1,ah;</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov x+2,al;</span><br><span class="line">    jmp let3;</span><br><span class="line">let2:</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov x+1,al;</span><br><span class="line">let3:</span><br><span class="line">    mov ax,0;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    mov dx,offset mess2; 显示mess2</span><br><span class="line">    int 21h;</span><br><span class="line"></span><br><span class="line">    mov dl,x+2; 显示立方</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl,x+1;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl,x;</span><br><span class="line">    int 21h;</span><br><span class="line"></span><br><span class="line">    mov word ptr x,0; 单元清零，初始化</span><br><span class="line">    mov word ptr x+2,0;</span><br><span class="line">    jmp let0;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230418092859108.png" class="" title="image-20230418092859108"><h2 id="分支程序设计5-8">分支程序设计5-8</h2><p>设计菜单程序，实现三个功能：</p><ul><li>小写字母转换大小写</li><li>计算立方值</li><li>退出</li></ul><p>设计思路：</p><ol type="1"><li>在数据段中定义菜单。每行换行显示；</li><li>用9号功能显示菜单；</li><li>根据输入选择执行某段程序</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    mess0 db 0ah,0dh,'1.input string'</span><br><span class="line">          db 0ah,0dh,'2.calculate cube'</span><br><span class="line">          db 0ah,0dh,'3.exit'</span><br><span class="line">          db 0ah,0dh,'select: $'</span><br><span class="line">    mess1 db 0ah,0dh,'input: $'</span><br><span class="line">    mess2 db 0ah,0dh,'output: $'</span><br><span class="line">    buff db 10,?,10 dup(?)</span><br><span class="line">    x db 3 dup(?)</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume ds:data,cs:code</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">let0:</span><br><span class="line">    mov dx,offset mess0; 显示菜单</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1; 输入选择</span><br><span class="line">    int 21h;</span><br><span class="line">    cmp al,'1';</span><br><span class="line">    jz prog1;</span><br><span class="line">    cmp al,'2';</span><br><span class="line">    jz prog2;</span><br><span class="line">    jmp prog3;</span><br><span class="line">prog1:</span><br><span class="line">    ; 5-4.asm 程序部分</span><br><span class="line">    ; 输入英文单词，将小写字母转换为大写</span><br><span class="line">    mov dx,offset mess1; 显示提示1</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dx,offset buff; 输入字符串</span><br><span class="line">    mov ah,10;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov cl,buff+1; 实际输入的字母个数</span><br><span class="line">    mov bx,2; 第一个字母的地址</span><br><span class="line">    mov dx,offset mess2; 显示提示2</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">let1:</span><br><span class="line">    and buff[bx],0dfh; 小写字母变为大写</span><br><span class="line">    mov dl,buff[bx]; 循环显示每个字母</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    inc bx;</span><br><span class="line">    dec cl;</span><br><span class="line">    jnz let1;</span><br><span class="line">    jmp let0;</span><br><span class="line">prog2:</span><br><span class="line">    ; 5-5.asm 程序部分</span><br><span class="line">    ; 计算0~9立方值</span><br><span class="line">    ;显示mess1</span><br><span class="line">    mov dx,offset mess1; </span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    ;输入0~9</span><br><span class="line">    mov ah,1; </span><br><span class="line">    int 21h;</span><br><span class="line">    ;输入判断</span><br><span class="line">    cmp al,27; 判断是不是esc，是则退出</span><br><span class="line">    jz prog3;</span><br><span class="line">    cmp al,'0'; 判断输入的是不是个数字</span><br><span class="line">    jb let0;</span><br><span class="line">    cmp al,'9';</span><br><span class="line">    ja let0;</span><br><span class="line">    </span><br><span class="line">    and al,0fh; 去掉ASCII码</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,al; 求m³，结果存在al中</span><br><span class="line">    mul bl;</span><br><span class="line">    mul bl; </span><br><span class="line">    mov bl,10; 立方变为10进制</span><br><span class="line">    div bl; ah存商，al存余数</span><br><span class="line">    add ah,30h; </span><br><span class="line">    mov x,ah; 先用x保存个位</span><br><span class="line">    </span><br><span class="line">    cmp al,10; 判断余数是不是大于10；</span><br><span class="line">    jb let2;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    div bl;</span><br><span class="line">    add ah,30h;</span><br><span class="line">    mov x+1,ah;</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov x+2,al;</span><br><span class="line">    jmp let3;</span><br><span class="line">let2:</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov x+1,al;</span><br><span class="line">let3:</span><br><span class="line">    mov ax,0;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    mov dx,offset mess2; 显示mess2</span><br><span class="line">    int 21h;</span><br><span class="line"></span><br><span class="line">    mov dl,x+2; 显示立方</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl,x+1;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl,x;</span><br><span class="line">    int 21h;</span><br><span class="line"></span><br><span class="line">    mov word ptr x,0; 单元清零，初始化</span><br><span class="line">    mov word ptr x+2,0;</span><br><span class="line">    jmp let0;</span><br><span class="line">prog3:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230422171057146.png" class="" title="image-20230422171057146"><h2 id="分支程序设计5-9">分支程序设计5-9</h2><p>输入1，计算并显示<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="9.238ex" height="1.783ex" role="img" focusable="false" viewBox="0 -583 4083 788"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D467" d="M347 338Q337 338 294 349T231 360Q211 360 197 356T174 346T162 335T155 324L153 320Q150 317 138 317Q117 317 117 325Q117 330 120 339Q133 378 163 406T229 440Q241 442 246 442Q271 442 291 425T329 392T367 375Q389 375 411 408T434 441Q435 442 449 442H462Q468 436 468 434Q468 430 463 420T449 399T432 377T418 358L411 349Q368 298 275 214T160 106L148 94L163 93Q185 93 227 82T290 71Q328 71 360 90T402 140Q406 149 409 151T424 153Q443 153 443 143Q443 138 442 134Q425 72 376 31T278 -11Q252 -11 232 6T193 40T155 57Q111 57 76 -3Q70 -11 59 -11H54H41Q35 -5 35 -2Q35 13 93 84Q132 129 225 214T340 322Q352 338 347 338Z"></path></g><g data-mml-node="mo" transform="translate(742.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(1798.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(2592.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(3593,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>；输入2，则将输入的字母改变大小写；输入0则退出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    table dw prog0,prog1,prog2,prog0;</span><br><span class="line">    mess1 db 0ah,0dh,'input(0~2):$';</span><br><span class="line">    mess2 db 0ah,0dh,'z = x + y = $';</span><br><span class="line">    x db 3;</span><br><span class="line">    y db 6;</span><br><span class="line">    z db ?;</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">let0:;</span><br><span class="line">    mov dx,offset mess1;</span><br><span class="line">    mov ah,9; 显示输入信息</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1; 键盘输入分支选择</span><br><span class="line">    int 21h;</span><br><span class="line">    and al,03h; 保留al最低2位，其余位清0</span><br><span class="line">    mov ah,0;</span><br><span class="line">    shl ax,1; 左移1位，计算分支表地址</span><br><span class="line">    mov bx,ax;</span><br><span class="line">    jmp table[bx]; 按分支表转移</span><br><span class="line">prog1:</span><br><span class="line">    mov dx,offset mess2;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov al,x;</span><br><span class="line">    add al,y;</span><br><span class="line">    mov z,al; z = x + y</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov dl,al;</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    jmp let0; 返回菜单</span><br><span class="line">prog2:</span><br><span class="line">    mov dl,0ah; 换行</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1; 输入字母</span><br><span class="line">    int 21h;</span><br><span class="line">    test al,20h;</span><br><span class="line">    jz let1; 是大写</span><br><span class="line">    and al,0dfh; 小写转大写</span><br><span class="line">    jmp let2;</span><br><span class="line">let1:</span><br><span class="line">    or al,20h;</span><br><span class="line">let2:</span><br><span class="line">    mov dl,al;</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    jmp let0;</span><br><span class="line">prog0:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230422165039155.png" class="" title="image-20230422165039155"><h2 id="作业5-27">作业5-27</h2><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212318609.png" class="" title="image-20230424212318609"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x db -1</span><br><span class="line">    y db ?</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    cmp x,0;</span><br><span class="line">    jge let0;</span><br><span class="line">    mov al,x;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,4;</span><br><span class="line">    imul bl;</span><br><span class="line">    mov y,al;</span><br><span class="line">    jmp out1;</span><br><span class="line">let0:</span><br><span class="line">    cmp x,0;</span><br><span class="line">    je let1;</span><br><span class="line">    mov al,x;</span><br><span class="line">    mov bl,3;</span><br><span class="line">    add al,bl;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,2;</span><br><span class="line">    idiv bl;</span><br><span class="line">    mov y,ah;</span><br><span class="line">    jmp out1;</span><br><span class="line">let1:</span><br><span class="line">    mov y,0;</span><br><span class="line">    jmp out1;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212535453.png" class="" title="image-20230424212535453"><h2 id="作业5-28">作业5-28</h2><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212330880.png" class="" title="image-20230424212330880"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x db 2</span><br><span class="line">    y db 32</span><br><span class="line">    z db ?</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    cmp x,0;</span><br><span class="line">    jge let0;</span><br><span class="line">    mov bl,0;</span><br><span class="line">    sub bl,x;</span><br><span class="line">    mov z,bl;</span><br><span class="line">    jmp out1;</span><br><span class="line">let0:</span><br><span class="line">    mov al,x;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,4;</span><br><span class="line">    imul bl;</span><br><span class="line">    mov cx,ax;</span><br><span class="line">    mov al,y;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,16;</span><br><span class="line">    idiv bl;</span><br><span class="line">    sub cl,al;</span><br><span class="line">    mov z,cl;</span><br><span class="line">    jmp out1;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212540030.png" class="" title="image-20230424212540030"><h2 id="作业5-29">作业5-29</h2><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212409057.png" class="" title="image-20230424212409057"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    M dw -4,-3,-2,-1,0,1,2,3,4,5</span><br><span class="line">    posi db 0</span><br><span class="line">    nega db 0</span><br><span class="line">    zero db 0</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov si,0;</span><br><span class="line">    mov cx,10;</span><br><span class="line">let0:</span><br><span class="line">    mov ax,M[si];</span><br><span class="line">    cmp ax,0;</span><br><span class="line">    jge let1;</span><br><span class="line">    mov bl,nega;</span><br><span class="line">    inc bl;</span><br><span class="line">    mov nega,bl;</span><br><span class="line">    jmp out1;</span><br><span class="line">let1:</span><br><span class="line">    cmp ax,0;</span><br><span class="line">    je let2;</span><br><span class="line">    mov bl,posi;</span><br><span class="line">    inc bl;</span><br><span class="line">    mov posi,bl;</span><br><span class="line">    jmp out1;</span><br><span class="line">let2:</span><br><span class="line">    mov bl,zero;</span><br><span class="line">    inc bl;</span><br><span class="line">    mov zero,bl;</span><br><span class="line">    jmp out1;</span><br><span class="line">out1:</span><br><span class="line">    add si,2;</span><br><span class="line">    dec cx;</span><br><span class="line">    cmp cx,0;</span><br><span class="line">    jnz let0;</span><br><span class="line">out2:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212543874.png" class="" title="image-20230424212543874"><h2 id="作业5-30">作业5-30</h2><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212430592.png" class="" title="image-20230424212430592"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    info db 'input: $'</span><br><span class="line">    buf db 50 dup(0)</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov si,0;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    mov dx,offset info;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1;</span><br><span class="line">let0:</span><br><span class="line">    int 21h;</span><br><span class="line">    cmp al,20h;</span><br><span class="line">    je let1;</span><br><span class="line">    mov buf[si],al;</span><br><span class="line">    inc si;</span><br><span class="line">    jmp let0;</span><br><span class="line">let1:</span><br><span class="line">    mov buf[si],'$';</span><br><span class="line">    jmp out1;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212548592.png" class="" title="image-20230424212548592"><h2 id="作业5-31">作业5-31</h2><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212454482.png" class="" title="image-20230424212454482"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212502000.png" class="" title="image-20230424212502000"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">code segment</span><br><span class="line">    assume cs:code</span><br><span class="line">start:</span><br><span class="line">    mov ax,1234h;</span><br><span class="line">    mov bx,ax;</span><br><span class="line">    and al,0fh;</span><br><span class="line">    and bl,0f0h;</span><br><span class="line">    and ah,0fh;</span><br><span class="line">    mov cl,ah;</span><br><span class="line">    and bh,0f0h;</span><br><span class="line">    mov dl,bh;</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424212552398.png" class="" title="image-20230424212552398"><h2 id="作业6-14">作业6-14</h2><p>源串STRG1和目的串STRG2分别放在数据段和附加段中，请写出含有各种段定义的程序段，完成STRG1传送到STRG2的功能。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    strg1 db 'Hello World!$'</span><br><span class="line">data ends</span><br><span class="line">extra segment</span><br><span class="line">    strg2 db 20 dup(0)</span><br><span class="line">extra ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data,es:extra</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov ax,extra;</span><br><span class="line">    mov es,ax;</span><br><span class="line">    mov si,offset strg1;</span><br><span class="line">    mov di,offset strg2;</span><br><span class="line">    cld;</span><br><span class="line">    mov cx,20;</span><br><span class="line">    rep movsb;</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230429142604561.png" class="" title="image-20230429142604561"><h2 id="作业6-16">作业6-16</h2><p>编写程序，查找catt表中的字符@，找到后将sign单元置1，否则将sign单元置0。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    catt db 'abcdefg@$'</span><br><span class="line">    sign db ?</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov ax,'@';</span><br><span class="line">    mov di,offset catt;</span><br><span class="line">    cld;</span><br><span class="line">    mov cx,sign-catt;</span><br><span class="line">    repnz scasb;</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230429143030420.png" class="" title="image-20230429143030420"><h2 id="作业6-17">作业6-17</h2><p>编写程序段，在长度为N的字数组value中统计负数的个数并保存到ax中。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    value dw -5,-4,-3,-2,-1,0,1,2,3,4</span><br><span class="line">    N dw 10</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov ax,0; ax用于存储负数的数量</span><br><span class="line">    mov cx,N;</span><br><span class="line">    mov di,0;</span><br><span class="line">let0:</span><br><span class="line">    mov bx,value[di];</span><br><span class="line">    cmp bx,0;</span><br><span class="line">    jge let1;</span><br><span class="line">    inc ax;</span><br><span class="line">let1:</span><br><span class="line">    add di,2;</span><br><span class="line">    loop let0;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230504124033305.png" class="" title="image-20230504124033305"><h2 id="作业6-20">作业6-20</h2><p>编写程序，在found字数组中找出最小数存入min单元。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    found dw 12,4,55,32,26</span><br><span class="line">    min dw 500;</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov ax,min-found;</span><br><span class="line">    mov bx,2;</span><br><span class="line">    div bx;</span><br><span class="line">    mov cx,ax; </span><br><span class="line">    mov bx,0;</span><br><span class="line">let1:</span><br><span class="line">    mov ax,found[bx];</span><br><span class="line">    cmp ax,min;</span><br><span class="line">    jge let2;</span><br><span class="line">    mov min,ax;</span><br><span class="line">let2:</span><br><span class="line">    add bx,2;</span><br><span class="line">    loop let1;</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230504120922955.png" class="" title="image-20230504120922955"><h2 id="作业6-22">作业6-22</h2><p>某班级30名学生，编程将全班成绩按升序排序。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    grade db 100,100,99,98,97</span><br><span class="line">          db 96,95,94,93,92</span><br><span class="line">          db 91,90,89,88,87</span><br><span class="line">          db 86,85,84,83,82</span><br><span class="line">          db 81,80,79,78,77</span><br><span class="line">          db 76,75,74,73,72</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov cx,30</span><br><span class="line">loop1:</span><br><span class="line">    push cx;</span><br><span class="line">    mov bx,0;</span><br><span class="line">loop2:</span><br><span class="line">    mov al,grade[bx];</span><br><span class="line">    cmp al,grade[bx+1];</span><br><span class="line">    jle next;</span><br><span class="line">    xchg al,grade[bx+1];</span><br><span class="line">    mov grade[bx],al;</span><br><span class="line">next:</span><br><span class="line">    inc bx;</span><br><span class="line">    loop loop2;</span><br><span class="line">    pop cx;</span><br><span class="line">    loop loop1;</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230504121520181.png" class="" title="image-20230504121520181"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230504121700618.png" class="" title="image-20230504121700618"><h2 id="子程序设计7-1">子程序设计7-1</h2><p>多次输入一个65535以内的十进制数，并以十六进制数的形式显示出来。程序按ESC键接受。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x dw 0</span><br><span class="line">    mess1 db 0dh, 0ah, 'input dec = $'</span><br><span class="line">    mess2 db 0dh, 0ah, 'out hex = $'</span><br><span class="line">    hex db '0123456789ABCDEF'</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">; 主程序</span><br><span class="line">let0:</span><br><span class="line">    mov x, 0;</span><br><span class="line">    mov dx, offset mess1; 显示提示1</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    call let1; 调用子程序1</span><br><span class="line">    call let2; 调用子程序2</span><br><span class="line">    jmp let0;</span><br><span class="line">; 子程序1：键盘输入、形成十进制数x</span><br><span class="line">let1:</span><br><span class="line">    mov ah, 1; 键盘输入十进制数</span><br><span class="line">    int 21h;</span><br><span class="line">    cmp al, 27; 判断是否为ESC键</span><br><span class="line">    jz out1; 如果是，则直接退出程序</span><br><span class="line">    sub al, 30h; 去掉ASCII码</span><br><span class="line">    jl exit; 如果得到的数字小于0，说明输入的不是一个数字</span><br><span class="line">    cmp al, 9; </span><br><span class="line">    jg exit; 如果得到的数字大于9，说明输入的也不是一个数字</span><br><span class="line">    mov ah, 0;</span><br><span class="line">    xchg ax, x; 形成十进制数</span><br><span class="line">    mov cx, 10;</span><br><span class="line">    mul cx;</span><br><span class="line">    add x, ax; x*10+x'</span><br><span class="line">    jmp let1;</span><br><span class="line">exit:</span><br><span class="line">    ret; 返回主程序</span><br><span class="line">; 子程序2：查表，显示十六进制</span><br><span class="line">let2:</span><br><span class="line">    mov dx, offset mess2; 显示提示2</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov bx, x; 将x赋值给bx，因为ax马上要用到</span><br><span class="line">    mov ch, 4;</span><br><span class="line">    mov cl, 4; 将bx中的二进制数循环左移4位</span><br><span class="line">rept1:</span><br><span class="line">    rol bx, cl;</span><br><span class="line">    mov ax, bx;</span><br><span class="line">    and ax, 000fh; 保留最低4位 0000 0000 0000 1111</span><br><span class="line">    mov si, ax;</span><br><span class="line">    mov dl, hex[si]; 查表显示十六进制数</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">    dec ch; 显示下一位</span><br><span class="line">    jnz rept1;</span><br><span class="line">    ret; 返回主程序</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230509090336131.png" class="" title="image-20230509090336131"><h2 id="子程序设计">子程序设计</h2><p>从键盘键入一个多位十进制数X，回车技术输入。主程序和子程序都可以对其读写。利用寄存器传参、存储单元传参和堆栈传参。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    infor1 db 0ah, 0dh, 'x = $'</span><br><span class="line">    infor2 db 0ah, 0dh, 'y = $'</span><br><span class="line">    x db 20 dup(?)</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">; 主程序</span><br><span class="line">main proc far</span><br><span class="line">    mov x, 0;</span><br><span class="line">    mov dx, offset infor1; 显示提示1</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov bx, 0; 传参寄存器bx清0</span><br><span class="line">    call input;</span><br><span class="line">    mov cx, bx; 保存x的位数</span><br><span class="line">    mov ax, 0;</span><br><span class="line">    mov bx, 0;</span><br><span class="line">    call addByBit;</span><br><span class="line">    mov dx, offset infor2; 显示提示2</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    call display;</span><br><span class="line">    jmp main;</span><br><span class="line">out1:</span><br><span class="line">    mov ah, 4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">main endp</span><br><span class="line">; 子程序1：键盘输入、保存</span><br><span class="line">input proc near</span><br><span class="line">    mov ah, 1; 键盘输入十进制数</span><br><span class="line">    int 21h;</span><br><span class="line">    cmp al, 0dh; 判断是否为Enter</span><br><span class="line">    jz exit;</span><br><span class="line">    cmp al, '0'; 判断是否为其他非法字符，如果是则直接退出</span><br><span class="line">    jl out1;</span><br><span class="line">    cmp al, '9';</span><br><span class="line">    jg out1;</span><br><span class="line">    mov x[bx], al; 保存键入的数码</span><br><span class="line">    inc bx; bx = 数码个数</span><br><span class="line">    jmp input;</span><br><span class="line">exit:</span><br><span class="line">    cmp bx, 0; 第一键就是回车</span><br><span class="line">    jz out1; 如果是，则直接退出程序</span><br><span class="line">    ret</span><br><span class="line">input endp</span><br><span class="line">; 子程序2：按位相加</span><br><span class="line">addByBit proc near</span><br><span class="line">    mov ah, x[bx]; 取出输入的数码</span><br><span class="line">    and ah, 0fh;</span><br><span class="line">    add al, ah; 按位相加</span><br><span class="line">    inc bx;</span><br><span class="line">    loop addByBit; 循环累加</span><br><span class="line">    mov ah, 0;</span><br><span class="line">    mov bx, ax; 相加结果-&gt;bx传参寄存器</span><br><span class="line">    ret; 返回主程序</span><br><span class="line">addByBit endp</span><br><span class="line">; 子程序3：将bx中的数显示为十进制数</span><br><span class="line">display proc near</span><br><span class="line">    mov ax, bx; bx为传参寄存器</span><br><span class="line">    mov cx, 0;</span><br><span class="line">    mov bx, 10;</span><br><span class="line">let1:       ; 将ax变为十进制数</span><br><span class="line">    mov dx, 0; 字除法高字清0</span><br><span class="line">    inc cx; 统计余数个数</span><br><span class="line">    div bx; 除以10，商在ax，余数在dx</span><br><span class="line">    push dx; 保存余数</span><br><span class="line">    cmp ax, 0;</span><br><span class="line">    jnz let1;</span><br><span class="line">let2:       ; 循环显示余数，循环次数在cx中</span><br><span class="line">    pop ax; 将余数弹入ax</span><br><span class="line">    add ax, 0030h; 调整为ASCII码</span><br><span class="line">    mov dl, al; 2号功能显示</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">    loop let2;</span><br><span class="line">    ret;</span><br><span class="line">display endp</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230509095303011.png" class="" title="image-20230509095303011"><h1 id="实验">实验</h1><h2 id="实验一">实验一</h2><p>Debug命令的使用</p><p>（1）查看修改通用寄存器和标志寄存器中的值。</p><p>使用R命令查看和修改8086中的寄存器。将AX值修改为2021H，BX值修改为“实验课上课日期H”，CX值修改为“当前时间H”,DX值修改为“学号后4位H”。</p><p>例如学号为20199428的学生上课4月6号8点25分上课。最终AX=2021,BX=0406,CX=0825,DX=9428。</p><p>将修改之后的通用寄存器的值进行截图，并且解释标志寄存器中的内容含义。标志寄存器中的值参照下表。</p><hr><figure><img src="file:///C:/Users/Keikei/AppData/Local/Temp/msohtmlclip1/01/clip_image002.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230327151000126.png" class="" title="image-20230327151000126"><p><strong>标志寄存器的值为 NV UP EI PL NZ NA PONC，说明标志寄存器的溢出标志为0，方向标志为0，中断标志为1，符号标志为0，零标志为0，辅助进位标志为0，奇偶标志为0，进位标志为0。</strong></p><hr><p>（2）将自己的名字全拼，学号用E命令显示在dos窗口中间位置（不一定要正中间，偏中间位置就可以了）。</p><p>例如：20199428 邓帆，将20199428DF显示在屏幕中间。将此图进行截图。</p><p>DOS窗口是80*25彩色字符模式，此模式下，显示器每屏可以显示25行（0-24行），每行显示80个字符（0-79）。显示器屏幕上显示的内容存储在显示缓冲区中。显示缓冲区对应的内存地址空间B8000H~BFFFFH共32Kbyte空间。显示缓冲区分为8页（屏），每页（屏）4KB。第0页（屏）地址即我们看到的当前屏幕，对应的显示缓冲区为B8000H~ B8F9FH。其中：偏移000~09F 对应屏幕第一行；偏移0A0~13F对应屏幕第二行；偏移140~1DF对应屏幕第三行；（每行首地址相差0A0H，160个字节）。</p><p>屏幕上显示的每个字符在显示缓冲区中占用两个字节。第一个字节为字符的ASCII码。第二个字节为显示属性字，决定字符的色彩属性。色彩属性为256种综合属性效果（前景色、背景色、闪烁、高亮等）。含义如下，根据表格可知，色彩属性字节为9C，显示的效果为闪烁蓝底红字。</p><table><thead><tr class="header"><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th></tr></thead><tbody><tr class="odd"><td>BL</td><td>R</td><td>G</td><td>B</td><td>I</td><td>R</td><td>G</td><td>B</td></tr><tr class="even"><td>闪烁</td><td>背景色</td><td>高亮</td><td>前景</td><td></td><td></td><td></td><td></td></tr></tbody></table><hr><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230327154130250.png" class="" title="image-20230327154130250"><p><strong>如图所示，202112143LiJunqi已显示在屏幕正中间。</strong></p><hr><p>（3）使用D命令查看自己计算机的生产日期。在内存的FFFF0-FFFFFh中。对结果进行截图。</p><hr><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230327154259561.png" class="" title="image-20230327154259561"><p><strong>如图所示，计算机的生产日期为1992年1月1日。</strong></p><hr><p>（4）反汇编当前默认地址空间中的指令。对结果进行截图。</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230327154321285.png" class="" title="image-20230327154321285"><p><strong>如图所示，debug-u指令能够呈现当前默认地址空间中的反汇编指令。</strong></p><p>（5）向当前地址空间中写指令完成书P47页中的内容。对写入结果进行截图。</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230327144607303.png" class="" title="image-20230327144607303"><ol type="1"><li>两个操作数相减运算，结果放在数据段的16号单元</li></ol><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230327174754211.png" class="" title="image-20230327174754211"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230327174810343.png" class="" title="image-20230327174810343"><p><strong>如图所示，寄存器AX与BX的值相减得到的值为FFF8，第16号单元即0010H号单元。因此通过<code>mov [0010],ax</code>指令可以将AX中的值存储至代码段的16号单元中。</strong></p><ol start="2" type="1"><li>两个操作数相加运算，结果放在附加段的0020H号单元</li></ol><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230327173055057.png" class="" title="image-20230327173055057"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230327173126192.png" class="" title="image-20230327173126192"><p><strong>如图所示，使用段超越指令<code>es:</code>可实现在附加段中保存运算结果。</strong></p><ol start="3" type="1"><li>将AX寄存器中的1234H写人数据段的2号单元，读出3号单元的12H传送给BL寄存器</li></ol><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230327173805994.png" class="" title="image-20230327173805994"><p><strong>如图所示，使用<code>word ptr</code>指令定义目的操作数为字单元，随后取出3号单元的值。</strong></p><hr><h2 id="实验二">实验二</h2><ol start="2" type="1"><li>Dos功能调用。输入一个“Hello world!” 输出一个“hello world!”</li></ol><p>设计思路：</p><p>（1）定义输入字符串的缓冲区。</p><p>（2）10号功能输入字符串。</p><p>（3）将字符串缓冲区中的$。</p><p>（4）将9号功能ds:dx指向10号功能的字符串缓冲区，进行显示。</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    buffer db 20,?,20 dup('$') </span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data</span><br><span class="line">    mov ds,ax</span><br><span class="line">    mov dx,offset buffer</span><br><span class="line">    mov ah,10</span><br><span class="line">    int 21h</span><br><span class="line">    mov bx,0</span><br><span class="line">    mov [bx+buffer],0dh</span><br><span class="line">    inc bx</span><br><span class="line">    mov [bx+buffer],0ah</span><br><span class="line">    lea dx,buffer</span><br><span class="line">    mov ah,9</span><br><span class="line">    int 21h</span><br><span class="line">    mov ah,4ch</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure></p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230408105359837.png" class="" title="image-20230408105359837"><p>如图所示，程序输入的“Hello world!”字符串，原样输出了一个“Helloworld!”字符串。</p><p>3.实现Y=2X+3,X是一位十进制数。要求X从键盘输入，在下一行上显示“Y=2X+3=”以及十进制计算结果。</p><p>设计思路：</p><p>（1）涉及到显示，因为显示只能显示ASCII码，ASCII码=非压缩BCD码+30h.</p><p>实验中选用非压缩的BCD码进行运算。</p><p>（2）定义相关的提示信息。</p><p>（3）用到1，2，9号功能</p><p>（4）乘法IMUL,被乘数在AL中，用1号功能可以输入。因为结果肯定有超出9的情况，所以用AAM进行调整。</p><p>（5）加法ADD，因为结果肯定有超出9的情况，所以用AAA进行调整。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    infor1 db 'input:','$'</span><br><span class="line">    infor2 db 'y=2*x+3=','$'</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov dx,offset infor1; 输出input</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1; 输入一个数字</span><br><span class="line">    int 21h;</span><br><span class="line">    sub al,30h; 去掉ASCII码</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,2;</span><br><span class="line">    mul bl; 2*x</span><br><span class="line">    aam;</span><br><span class="line">    mov cl,3;</span><br><span class="line">    add al,cl; 2*x+3</span><br><span class="line">    aaa;</span><br><span class="line">    add ax,3030h;</span><br><span class="line">    mov cx,ax;</span><br><span class="line">    mov ah,2;</span><br><span class="line">    mov dl,0ah; 输出回车</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dx,offset infor2; 输出y=2*x+3=</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    add ax,3030h;</span><br><span class="line">    mov bx,ax;</span><br><span class="line">    mov ah,2; 字符逐个输出</span><br><span class="line">    mov dl,ch;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl,cl;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230408105339470.png" class="" title="image-20230408105339470"><p>如图所示，程序输入3、5、6、9均能输出对应的正确结果。</p><h2 id="实验三">实验三</h2><ol type="1"><li>用C语言和汇编语言编写一个二维数组，这个二维数组中存储的是两个班级的学生的成绩。每个班各有5名学生。查找某一个同学的成绩。用直接寻址，寄存器间接寻址，寄存器相对寻址，基址变址寻址，相对基址变址寻址完成查找成绩。二维数组用DW方式定义，如图4.1所示。</li></ol><hr><p>程序代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    score dw 100,98,78,77,76</span><br><span class="line">          dw 88,89,96,89,78</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov ax,ds:[14]; 直接寻址</span><br><span class="line">    </span><br><span class="line">    ; bp,bx,si,di是用于存放地址的寄存器</span><br><span class="line">    mov bx,14;</span><br><span class="line">    mov ax,ds:[bx]; 寄存器间接寻址</span><br><span class="line"></span><br><span class="line">    mov bp,14; bp的用法</span><br><span class="line">    mov ax,ds:[bp]; 寄存器间接寻址</span><br><span class="line"></span><br><span class="line">    mov bx,14;</span><br><span class="line">    mov ax,score[bx]; 寄存器相对寻址</span><br><span class="line"></span><br><span class="line">    mov bp,14; bp的用法</span><br><span class="line">    mov ax,ds:score[bp];寄存器相对寻址</span><br><span class="line"></span><br><span class="line">    mov bx,offset score;</span><br><span class="line">    mov si,14;</span><br><span class="line">    mov ax,ds:[bx][si]; 基址变址寻址</span><br><span class="line"></span><br><span class="line">    mov bp,offset score;</span><br><span class="line">    mov si,14;</span><br><span class="line">    mov ax,ds:[bp][si]; 基址变址寻址</span><br><span class="line"></span><br><span class="line">    ; score[1][2]</span><br><span class="line">    ; bx = 1 * 5 * 2</span><br><span class="line">    ; si = 2 * 2;</span><br><span class="line">    mov bx,10;</span><br><span class="line">    mov si,4;</span><br><span class="line">    mov ax,score[bx][si];</span><br><span class="line">    </span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><p>直接寻址：</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230410144723589.png" class="" title="image-20230410144723589"><p>寄存器间接寻址：</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230410144753064.png" class="" title="image-20230410144753064"><p>寄存器相对寻址：</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230410145210452.png" class="" title="image-20230410145210452"><p>基址变址寻址：</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230410145414925.png" class="" title="image-20230410145414925"><p>相对基址变址寻址：</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230410145353406.png" class="" title="image-20230410145353406"><hr><ol start="2" type="1"><li>将学生名字按照学号顺序存储在内存中，根据学号将姓名查找出来。姓名定义有两种方式，第一种方式类似于高级语言中的二维字符数组，第二种方式类似于高级语言中的一维字符串指针数组。如图4.2所示。</li></ol><figure><img src="file:///C:/Users/Keikei/AppData/Local/Temp/msohtmlclip1/01/clip_image002.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>图4.2 名字存储方式示意图</p><hr><h3 id="二位字符数组">二位字符数组</h3><p>代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    info db 'please input student number(letter than 5): $'</span><br><span class="line">    stuName db 0dh,0ah,'nobody     $'</span><br><span class="line">            db 0dh,0ah,'XiaoJianhui$'</span><br><span class="line">            db 0dh,0ah,'ChenZirui  $'</span><br><span class="line">            db 0dh,0ah,'HuangSihan $'</span><br><span class="line">            db 0dh,0ah,'ChenZishi  $'</span><br><span class="line">            db 0dh,0ah,'LiQiuping  $'</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov dx,offset info;</span><br><span class="line">    mov ah,9; 输出提示信息</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1; 输入一个数字</span><br><span class="line">    int 21h;</span><br><span class="line">    sub al,30h; 将ASCII码变为数字</span><br><span class="line">    mov cl,14;</span><br><span class="line">    mul cl; ax = al * cl</span><br><span class="line">    mov dx,offset stuName;</span><br><span class="line">    add dx,ax;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><p>运行截图：</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230410152011041.png" class="" title="image-20230410152011041"><h3 id="一维字符串指针数组">一维字符串指针数组</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    info db 'please input student number(letter than 5): $'</span><br><span class="line">    table dw stu0,stu1,stu2,stu3,stu4,stu5</span><br><span class="line">    stu0 db 0dh,0ah,'nobody$'</span><br><span class="line">    stu1 db 0dh,0ah,'XiaoJianhui$'</span><br><span class="line">    stu2 db 0dh,0ah,'ChenZirui$'</span><br><span class="line">    stu3 db 0dh,0ah,'HuangSihan$'</span><br><span class="line">    stu4 db 0dh,0ah,'ChenZishi$'</span><br><span class="line">    stu5 db 0dh,0ah,'LiQiuping$'</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov dx,offset info;</span><br><span class="line">    mov ah,9; 输出提示信息</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1; 输入一个数字</span><br><span class="line">    int 21h;</span><br><span class="line">    sub al,30h; 将ASCII码变为数字</span><br><span class="line">    mov cl,2;</span><br><span class="line">    mul cl; ax = al * cl</span><br><span class="line">    mov bx,ax;</span><br><span class="line">    mov dx,table[bx];</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><p>运行截图：</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230410153431553.png" class="" title="image-20230410153431553"><p>学号在内存中的存储</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230410155536270.png" class="" title="image-20230410155536270"><p>学号的真正意义是名字字符串相对于数据段的偏移地址</p><hr><h2 id="实验四">实验四</h2><p>1.输出提示信息“DEC=”，输入十进制数0-255。输出提示信息“HEX=”，用取余数的方法将刚才输入的0-255，显示成相应的十六进制数。</p><p>实验报告中给出设计思路，画出流程图（可以分两个来画，输入一个，显示一个），根据流程图写出代码。并对实验结果截图。</p><h3 id="设计思路">设计思路</h3><ol type="1"><li>输出提示信息“DEC=”；</li><li>用DOS的1号功能输入0~255，将输入的字符保存在内存的字符缓冲区中，以回车作为本次输入结束的标志。退出程序使用ESC（27/1BH）；</li><li>将字符缓冲区的字符转变为数字，判断到底输入了几位数。根据输入的位数进行转换；</li><li>输出提示信息“HEX=”；</li><li>用除余法进行显示。将第3步中生成的数字除以16，先显示商，再显示余数。</li></ol><h3 id="流程图">流程图</h3><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230422214455189.png" class="" title="image-20230422214455189"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230422214539097.png" class="" title="image-20230422214539097"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230422214609853.png" class="" title="image-20230422214609853"><h3 id="代码">代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    x db 3 dup(0)</span><br><span class="line">    info1 db 0ah,0dh,"DEX=$";</span><br><span class="line">    info2 db "HEX=$";</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">let:</span><br><span class="line">    mov dx,offset info1;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov si,0; 用于写入缓冲区，记录数位个数</span><br><span class="line">let0:</span><br><span class="line">    mov ah,1;</span><br><span class="line">    int 21h;</span><br><span class="line">    cmp al,27; esc</span><br><span class="line">    je let5;</span><br><span class="line">    cmp al,0dh; enter</span><br><span class="line">    je let1;</span><br><span class="line">    sub al,30h; 将数字存入缓冲区</span><br><span class="line">    mov x[si],al;</span><br><span class="line">    inc si; 位数++</span><br><span class="line">    jmp let0;</span><br><span class="line">let1:</span><br><span class="line">    mov dx,offset info2;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov bx,0;</span><br><span class="line">    mov di,0;</span><br><span class="line">    cmp si,1; 判断是不是1位数</span><br><span class="line">    je let2;</span><br><span class="line">    cmp si,3; 判断是不是3位数</span><br><span class="line">    jne let3;</span><br><span class="line">    mov al,x[di]; 三位数</span><br><span class="line">    mov cl,100;</span><br><span class="line">    mul cl;</span><br><span class="line">    add bx,ax;</span><br><span class="line">    inc di;</span><br><span class="line">let3:</span><br><span class="line">    mov al,x[di]; 两位数</span><br><span class="line">    mov cl,10;</span><br><span class="line">    mul cl;</span><br><span class="line">    add bx,ax;</span><br><span class="line">    inc di;</span><br><span class="line">let2:</span><br><span class="line">    mov al,x[di]; 一位数</span><br><span class="line">    mov ah,0;</span><br><span class="line">    add bx,ax;</span><br><span class="line">    mov ax,bx;</span><br><span class="line">    mov cl,16;</span><br><span class="line">    div cl;</span><br><span class="line">    cmp al,9;</span><br><span class="line">    jbe let6;</span><br><span class="line">    add al,7;</span><br><span class="line">let6:</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov dl,al;</span><br><span class="line">    push ax;</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    pop ax;</span><br><span class="line">    cmp ah,9;</span><br><span class="line">    jbe let7;</span><br><span class="line">    add ah,7;</span><br><span class="line">let7:</span><br><span class="line">    add ah,30h;</span><br><span class="line">    mov dl,ah;</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    jmp let;</span><br><span class="line">let5:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h3 id="运行截图">运行截图</h3><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230422180827004.png" class="" title="image-20230422180827004"><p>2.模仿课本119页5.5.3示例5-9，将以前自己写的程序整理成菜单程序（至少选择三个程序）。table表里面保存的是跳转到程序的标号。与我们第三次课中通过学号查找名字时，表里面存姓名标号是一个概念。给出代码和实验结果截图即可。</p><p>设计功能如下：</p><ul><li>功能1：将字符串中的小写字母转为大写；</li><li>功能2：计算<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.282ex" height="1.91ex" role="img" focusable="false" viewBox="0 -833.2 1008.6 844.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g></g></g></svg></mjx-container></span>；</li><li>功能3：计算<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.564ex;" xmlns="http://www.w3.org/2000/svg" width="12.837ex" height="2.26ex" role="img" focusable="false" viewBox="0 -749.5 5674 999"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(767.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(1823.6,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mn" transform="translate(2101.6,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g><g data-mml-node="mi" transform="translate(2601.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(3395.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(4396,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(5396,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g></g></g></svg></mjx-container></span>；</li><li>功能4：退出程序。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    table dw prog4,prog1,prog2,prog3,prog4;</span><br><span class="line">    mess0 db 0ah,0dh,'1.upper string'</span><br><span class="line">          db 0ah,0dh,'2.calculate X^3'</span><br><span class="line">          db 0ah,0dh,'3.calculate Y=|5X-18|'</span><br><span class="line">          db 0ah,0dh,'4.exit'</span><br><span class="line">          db 0ah,0dh,'select: $'</span><br><span class="line">    mess1 db 0ah,0dh,'input: $'</span><br><span class="line">    mess2 db 0ah,0dh,'output: $'</span><br><span class="line">    buff db 10,?,10 dup(?)</span><br><span class="line">    x db 3 dup(?)</span><br><span class="line">    x2 db ?</span><br><span class="line">    y dw ?</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume ds:data,cs:code</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">let0:</span><br><span class="line">    mov dx,offset mess0; 显示菜单</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1; 输入选择</span><br><span class="line">    int 21h;</span><br><span class="line">    and al,03h;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    shl ax,1;</span><br><span class="line">    mov bx,ax;</span><br><span class="line">    jmp table[bx];</span><br><span class="line">prog1:</span><br><span class="line">    ; 5-4.asm 程序部分</span><br><span class="line">    ; 输入英文单词，将小写字母转换为大写</span><br><span class="line">    mov dx,offset mess1; 显示提示1</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dx,offset buff; 输入字符串</span><br><span class="line">    mov ah,10;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov cl,buff+1; 实际输入的字母个数</span><br><span class="line">    mov bx,2; 第一个字母的地址</span><br><span class="line">    mov dx,offset mess2; 显示提示2</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">let1:</span><br><span class="line">    and buff[bx],0dfh; 小写字母变为大写</span><br><span class="line">    mov dl,buff[bx]; 循环显示每个字母</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    inc bx;</span><br><span class="line">    dec cl;</span><br><span class="line">    jnz let1;</span><br><span class="line">    jmp let0;</span><br><span class="line">prog2:</span><br><span class="line">    ; 5-5.asm 程序部分</span><br><span class="line">    ; 计算0~9立方值</span><br><span class="line">    ;显示mess1</span><br><span class="line">    mov dx,offset mess1; </span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    ;输入0~9</span><br><span class="line">    mov ah,1; </span><br><span class="line">    int 21h;</span><br><span class="line">    ;输入判断</span><br><span class="line">    cmp al,27; 判断是不是esc，是则退出</span><br><span class="line">    jz let0;</span><br><span class="line">    cmp al,'0'; 判断输入的是不是个数字</span><br><span class="line">    jb let0;</span><br><span class="line">    cmp al,'9';</span><br><span class="line">    ja let0;</span><br><span class="line">    </span><br><span class="line">    and al,0fh; 去掉ASCII码</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov bl,al; 求m³，结果存在al中</span><br><span class="line">    mul bl;</span><br><span class="line">    mul bl; </span><br><span class="line">    mov bl,10; 立方变为10进制</span><br><span class="line">    div bl; ah存商，al存余数</span><br><span class="line">    add ah,30h; </span><br><span class="line">    mov x,ah; 先用x保存个位</span><br><span class="line">    </span><br><span class="line">    cmp al,10; 判断余数是不是大于10；</span><br><span class="line">    jb let2;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    div bl;</span><br><span class="line">    add ah,30h;</span><br><span class="line">    mov x+1,ah;</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov x+2,al;</span><br><span class="line">    jmp let3;</span><br><span class="line">let2:</span><br><span class="line">    add al,30h;</span><br><span class="line">    mov x+1,al;</span><br><span class="line">let3:</span><br><span class="line">    mov ax,0;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    mov dx,offset mess2; 显示mess2</span><br><span class="line">    int 21h;</span><br><span class="line"></span><br><span class="line">    mov dl,x+2; 显示立方</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl,x+1;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl,x;</span><br><span class="line">    int 21h;</span><br><span class="line"></span><br><span class="line">    mov word ptr x,0; 单元清零，初始化</span><br><span class="line">    mov word ptr x+2,0;</span><br><span class="line">    jmp let0;</span><br><span class="line"></span><br><span class="line">prog3:</span><br><span class="line">    ; 计算Y=|5x-18|</span><br><span class="line">    mov dx,offset mess1;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ah,1;</span><br><span class="line">    int 21h;</span><br><span class="line">    sub al,30h;</span><br><span class="line">    mov bl,5;</span><br><span class="line">    imul bl;</span><br><span class="line">    sub ax,18;</span><br><span class="line">    jns let4;</span><br><span class="line">    neg ax;</span><br><span class="line">let4:</span><br><span class="line">    mov y,ax;</span><br><span class="line">    mov cx,0;</span><br><span class="line">    mov bx,10;</span><br><span class="line">let5:</span><br><span class="line">    mov dx,0;</span><br><span class="line">    inc cx;</span><br><span class="line">    idiv bx;</span><br><span class="line">    push dx;</span><br><span class="line">    cmp ax,0;</span><br><span class="line">    jnz let5;</span><br><span class="line">    mov dx,offset mess2;</span><br><span class="line">    mov ah,9;</span><br><span class="line">    int 21h</span><br><span class="line">let6:</span><br><span class="line">    pop ax;</span><br><span class="line">    add ax,0030h;</span><br><span class="line">    mov dl,al;</span><br><span class="line">    mov ah,2;</span><br><span class="line">    int 21h;</span><br><span class="line">    dec cx;</span><br><span class="line">    cmp cx,0;</span><br><span class="line">    jnz let6;</span><br><span class="line">    jmp let0;</span><br><span class="line">prog4:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><p>功能1：将字符串中的小写字母转为大写：</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230422175540816.png" class="" title="image-20230422175540816"><p>功能2：计算<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.282ex" height="1.91ex" role="img" focusable="false" viewBox="0 -833.2 1008.6 844.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g></g></g></svg></mjx-container></span>：</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230422175719144.png" class="" title="image-20230422175719144"><p>功能3：计算<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.564ex;" xmlns="http://www.w3.org/2000/svg" width="12.837ex" height="2.26ex" role="img" focusable="false" viewBox="0 -749.5 5674 999"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(767.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(1823.6,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mn" transform="translate(2101.6,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g><g data-mml-node="mi" transform="translate(2601.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(3395.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(4396,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(5396,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g></g></g></svg></mjx-container></span>：</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230422175909433.png" class="" title="image-20230422175909433"><p>功能4：退出程序：</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230425091925834.png" class="" title="image-20230425091925834"><h2 id="实验五">实验五</h2><ul><li>设计方法</li><li>流程图</li><li>代码</li></ul><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424140930786-16825150223351.png" class="" title="image-20230424140930786"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230424141949719-16825150223362.png" class="" title="image-20230424141949719"><p>1．分别统计3个班级中某科成绩优秀的人数和不及格的人数。提示：可以看成3×N二维数组。分别用MAX和MIN存放90分以上和60分以下的人数。</p><p>2．将上述题目改为用两个数组分别存放每班优秀的成绩和不及格的成绩。</p><p>3．分别对两组成绩用冒泡排序按降序排序。</p><p>给出设计思路，流程图设计，代码， 结果截图。</p><h3 id="设计思路-1"><strong>设计思路</strong></h3><p>（1）二维数组存储成绩。基址变址相对寻址去取每一个学生的成绩。</p><p>（2）两个一维数组分别存储优秀成绩和不及格成绩。</p><p>（3）取出每个班的每个学生的成绩，分别和90，以及60比较。大于等于90对应班级优秀人数加1，将其放在优秀成绩数组中。小于60对应班级的不及格人数加1，将其放在不及格成绩数组中。</p><p>（4）对优秀成绩数组和不及格成绩数组进行冒泡排序。</p><h3 id="流程图-1"><strong>流程图</strong></h3><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230426204657984.png" class="" title="image-20230426204657984"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230426204731477.png" class="" title="image-20230426204731477"><h3 id="代码-1"><strong>代码</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    score db 99,45,44,100,88,23,56,88</span><br><span class="line">          db 100,100,69,67,89,55,99,98</span><br><span class="line">          db 34,54,60,99,89,79,69,59</span><br><span class="line">    max db 24 dup(0); 优秀成绩数组</span><br><span class="line">    min db 24 dup(0); 不合格成绩数组</span><br><span class="line">    classNumber db 0</span><br><span class="line">    studentNumber db 0</span><br><span class="line">    excellentNumber dw 0</span><br><span class="line">    failNumber dw 0</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data;</span><br><span class="line">    mov ds,ax;</span><br><span class="line">    mov di,0;</span><br><span class="line">    mov bp,0;</span><br><span class="line">    mov classNumber,0;</span><br><span class="line">outs:</span><br><span class="line">    cmp classNumber,3; 一共有三个班</span><br><span class="line">    jae out0;</span><br><span class="line">    mov studentNumber,0;</span><br><span class="line">ins:</span><br><span class="line">    cmp studentNumber,8; 每个班有8名学生</span><br><span class="line">    jae outs1;</span><br><span class="line">    mov al,classNumber;</span><br><span class="line">    mov cl,8;</span><br><span class="line">    mul cl;</span><br><span class="line">    mov bx,ax;</span><br><span class="line">    mov al,studentNumber;</span><br><span class="line">    mov ah,0;</span><br><span class="line">    mov si,ax;</span><br><span class="line">    cmp score[bx][si],90;</span><br><span class="line">    jb flunk;</span><br><span class="line">    mov al,score[bx][si];</span><br><span class="line">    mov max[di],al;</span><br><span class="line">    inc di;</span><br><span class="line">    jmp ins1;</span><br><span class="line">flunk:</span><br><span class="line">    cmp score[bx][si],60;</span><br><span class="line">    jae ins1;</span><br><span class="line">    mov al,score[bx][si];</span><br><span class="line">    mov ds:min[bp],al;</span><br><span class="line">    inc bp;</span><br><span class="line">ins1:</span><br><span class="line">    inc studentNumber;</span><br><span class="line">    jmp ins;</span><br><span class="line">outs1:</span><br><span class="line">    inc classNumber;</span><br><span class="line">    jmp outs;</span><br><span class="line">out0:</span><br><span class="line">    mov excellentNumber,di; di的值就是优秀学生的数量</span><br><span class="line">    mov failNumber,bp; bp的值就是不合格学生的数量</span><br><span class="line">prog1:</span><br><span class="line">    ; max冒泡排序</span><br><span class="line">    mov cx,excellentNumber;</span><br><span class="line">L1:</span><br><span class="line">mov si,0;</span><br><span class="line">cmp cx,0;</span><br><span class="line">je prog2;</span><br><span class="line">dec cx;</span><br><span class="line">mov bx,cx;</span><br><span class="line">L2:</span><br><span class="line">mov al,max[si];</span><br><span class="line">cmp al,max[si+1];</span><br><span class="line">jle L3;</span><br><span class="line">xchg al,max[si+1];</span><br><span class="line">xchg al,max[si];</span><br><span class="line">L3:</span><br><span class="line">cmp si,bx;</span><br><span class="line">je L1;</span><br><span class="line">inc si;</span><br><span class="line">jmp L2;   </span><br><span class="line"></span><br><span class="line">prog2:</span><br><span class="line">    ; min冒泡排序</span><br><span class="line">    mov cx,failNumber;</span><br><span class="line">L4:</span><br><span class="line">mov si,0;</span><br><span class="line">cmp cx,0;</span><br><span class="line">je out1;</span><br><span class="line">dec CX;</span><br><span class="line">mov bx,cx;</span><br><span class="line">L5:</span><br><span class="line">mov al,min[si];</span><br><span class="line">cmp al,min[si+1];</span><br><span class="line">jle L6;</span><br><span class="line">xchg al,min[si+1];</span><br><span class="line">xchg al,min[si];</span><br><span class="line">L6:</span><br><span class="line">cmp si,bx;</span><br><span class="line">je L4;</span><br><span class="line">inc si;</span><br><span class="line">jmp L5;</span><br><span class="line">out1:</span><br><span class="line">    mov ah,4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h3 id="运行截图-1"><strong>运行截图</strong></h3><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230425090646815-16825150223363.png" class="" title="image-20230425090646815"><p>排序后</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230425090852736.png" class="" title="image-20230425090852736"><h2 id="实验六">实验六</h2><p>用预习要求中的1-4点中的代码，完成课本第7章P160-p165页的示例7-6，从键盘输入学生姓名和成绩，按成绩降序或者升序排列，并显示排序结果。</p><h3 id="设计思路-2">设计思路</h3><p>阶段一分析设计思路：（和以往的实验进行比对。）</p><p>（1）从键盘输入姓名。可以根据实验二中的输入一个字符串，并回显这个实验进行更改。</p><p>（2）从键盘输入成绩，可以根据实验四将输入的三位十进制数，以16进制数进行显示来做。</p><p>（3）将成绩按照降序排序，可以用冒泡排序方法进行修改。</p><p>（4）显示成绩，可以将输入的成绩的ASCII码保存起来，之后用来显示。</p><p>（5）显示姓名，可以将保存在内存缓冲区中的姓名拿来进行显示。</p><p>阶段二分析设计思路：（细化）</p><p>（1）从键盘输入多个姓名，这些姓名需要保存起来，并且在需要显示的时候查找出来。那么这个缓冲区如何来定义呢。定义成不等长的在输入和查找的时候都不好查找。实验中使用等长方式进行查找。假设每个名字的长度控制在13个字符。假设允许输入5个名字，那么定义方式是5 dup(13,?,13 dup(‘<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="40.849ex" height="2.283ex" role="img" focusable="false" viewBox="0 -759 18055.5 1009"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"></g><g data-mml-node="mo" transform="translate(33,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path></g></g><g data-mml-node="mo" transform="translate(277.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(666.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1055.5,0)"><g data-mml-node="mo"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">。</text></g></g><g data-mml-node="mi" transform="translate(2055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">注</text></g><g data-mml-node="mi" transform="translate(3055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">意</text></g><g data-mml-node="mi" transform="translate(4055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">观</text></g><g data-mml-node="mi" transform="translate(5055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">察</text></g><g data-mml-node="mi" transform="translate(6055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">这</text></g><g data-mml-node="mi" transform="translate(7055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">个</text></g><g data-mml-node="mi" transform="translate(8055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">数</text></g><g data-mml-node="mi" transform="translate(9055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">据</text></g><g data-mml-node="mi" transform="translate(10055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">区</text></g><g data-mml-node="mi" transform="translate(11055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">的</text></g><g data-mml-node="mi" transform="translate(12055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">定</text></g><g data-mml-node="mi" transform="translate(13055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">义</text></g><g data-mml-node="mi" transform="translate(14055.5,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">，</text></g><g data-mml-node="mi" transform="translate(15055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">这</text></g><g data-mml-node="mi" transform="translate(16055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">里</text></g><g data-mml-node="mi" transform="translate(17055.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">以</text></g></g></g></svg></mjx-container></span>符号进行初始化，是因为实验还要考虑输出的问题。</p><p>（2）从键盘输入成绩，需要一个数组来存储这个数字成绩，并进行排序。</p><p>所以数据段要定义这样一个数组 dw 5 dup(0)</p><p>（3）将成绩按照降序排序，并且名字以及用来显示的成绩数组也要跟着降序排序。这里的做法有两种，第一是让名字和成绩ASCII码数组跟着进行降序排序。另外一种做法，是新增加一个数组，这个数组用来存储学生序号，让学生序号数组跟着进行排序。RankDw 0,1,2,3,4</p><p>（4）显示成绩，需要一个成绩ASCII码数组存储成绩。 db 5 dup(4dup($))。用排好的rank数组对成绩进行显示。</p><p>（5）显示姓名,用排好的rank数组对姓名进行显示。</p><h3 id="流程图-2">流程图</h3><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230516210854839.png" class="" title="image-20230516210854839"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230516212312325.png" class="" title="image-20230516212312325"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230516212322440.png" class="" title="image-20230516212322440"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230516205400265.png" class="" title="image-20230516205400265"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230516212941818.png" class="" title="image-20230516212941818"><h3 id="代码-2">代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line">data segment</span><br><span class="line">    nameA db 5 dup(13, ?, 13 dup('$'))</span><br><span class="line">    scoreAsc db 5 dup(4 dup('$'))</span><br><span class="line">    rank dw 0, 1, 2, 3, 4</span><br><span class="line">    scoreN dw 5 dup(0)</span><br><span class="line">    sn dw 5; 学生的数量</span><br><span class="line"></span><br><span class="line">    infoName db 0dh, 0ah, 'input Name: $'</span><br><span class="line">    infoScore db 0dh, 0ah, 'input Score: $'</span><br><span class="line">    n db 0</span><br><span class="line">    nl db 15; 名字的长度</span><br><span class="line">    x db 3 dup(0)</span><br><span class="line">    sl db 4</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code, ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax, data;</span><br><span class="line">    mov ds, ax;</span><br><span class="line">    mov cx, sn;</span><br><span class="line">loopm:</span><br><span class="line">    mov dx, offset infoName;</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    call inName;</span><br><span class="line">    mov dx, offset infoScore;</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    call inScore</span><br><span class="line">    inc n; 对n做加1操作</span><br><span class="line">    loop loopm;</span><br><span class="line">    call sort;</span><br><span class="line">    call dis;</span><br><span class="line">    </span><br><span class="line">    mov ah, 4ch;</span><br><span class="line">    int 21h;</span><br><span class="line"></span><br><span class="line">inName proc; 输入姓名过程</span><br><span class="line">    push ax; 保护寄存器的值</span><br><span class="line">    push bx;</span><br><span class="line">    push cx;</span><br><span class="line">    push dx;</span><br><span class="line"></span><br><span class="line">    mov al, n;</span><br><span class="line">    mov cl, nl;</span><br><span class="line">    mul cl;</span><br><span class="line">    mov dx, offset nameA;</span><br><span class="line">    add dx, ax;</span><br><span class="line">    mov ah, 0ah;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov bx, dx;</span><br><span class="line">    mov byte ptr [bx], 0ah;</span><br><span class="line">    inc bx;</span><br><span class="line">    mov byte ptr [bx], 0dh;</span><br><span class="line"></span><br><span class="line">    pop dx;</span><br><span class="line">    pop cx;</span><br><span class="line">    pop bx;</span><br><span class="line">    pop ax;</span><br><span class="line">    ret;</span><br><span class="line">inName endp</span><br><span class="line"></span><br><span class="line">inScore proc; 输入成绩过程</span><br><span class="line">    push ax; 保护寄存器的值</span><br><span class="line">    push bx;</span><br><span class="line">    push cx;</span><br><span class="line">    push dx;</span><br><span class="line">    push si;</span><br><span class="line">    push di;</span><br><span class="line"></span><br><span class="line">    mov al, n;</span><br><span class="line">    mov cl, sl;</span><br><span class="line">    mul cl;</span><br><span class="line">    mov bp, offset scoreAsc;</span><br><span class="line">    add bp, ax;</span><br><span class="line">    mov si, 0; 用于写入缓冲区，记录数位个数</span><br><span class="line">let0:</span><br><span class="line">    mov ah,1;</span><br><span class="line">    int 21h;</span><br><span class="line">    cmp al,0dh; enter</span><br><span class="line">    je let1;</span><br><span class="line">    mov ds:[bp], al;</span><br><span class="line">    inc bp;</span><br><span class="line">    sub al,30h; 将数字存入缓冲区</span><br><span class="line">    mov x[si],al;</span><br><span class="line">    inc si; 位数++</span><br><span class="line">    jmp let0;</span><br><span class="line">let1:</span><br><span class="line">    mov bx,0;</span><br><span class="line">    mov di,0;</span><br><span class="line">    cmp si,1; 判断是不是1位数</span><br><span class="line">    je let2;</span><br><span class="line">    cmp si,3; 判断是不是3位数</span><br><span class="line">    jne let3;</span><br><span class="line">    mov al,x[di]; 三位数</span><br><span class="line">    mov cl,100;</span><br><span class="line">    mul cl;</span><br><span class="line">    add bx,ax;</span><br><span class="line">    inc di;</span><br><span class="line">let3:</span><br><span class="line">    mov al,x[di]; 两位数</span><br><span class="line">    mov cl,10;</span><br><span class="line">    mul cl;</span><br><span class="line">    add bx,ax;</span><br><span class="line">    inc di;</span><br><span class="line">let2:</span><br><span class="line">    mov al,x[di]; 一位数</span><br><span class="line">    mov ah,0;</span><br><span class="line">    add bx,ax;</span><br><span class="line">    mov ax,bx;</span><br><span class="line">    mov al, n;</span><br><span class="line">    mov cl, 2;</span><br><span class="line">    mul cl;</span><br><span class="line">    mov di, ax;</span><br><span class="line">    mov scoreN[di], bx;</span><br><span class="line"></span><br><span class="line">    pop di;</span><br><span class="line">    pop si;</span><br><span class="line">    pop dx;</span><br><span class="line">    pop cx;</span><br><span class="line">    pop bx;</span><br><span class="line">    pop ax;</span><br><span class="line">    ret</span><br><span class="line">inScore endp</span><br><span class="line"></span><br><span class="line">sort proc</span><br><span class="line">    push ax; 保护寄存器的值</span><br><span class="line">    push bx;</span><br><span class="line">    push cx;</span><br><span class="line"></span><br><span class="line">    mov cx, sn;</span><br><span class="line">    dec cx;</span><br><span class="line">loops1:</span><br><span class="line">    push cx;</span><br><span class="line">    mov bx, 0;</span><br><span class="line">loops2:</span><br><span class="line">    mov ax, scoreN[bx];</span><br><span class="line">    cmp ax, scoreN[bx + 2];</span><br><span class="line">    jae csort;</span><br><span class="line">    xchg ax, scoreN[bx + 2];</span><br><span class="line">    mov scoreN[bx], ax;</span><br><span class="line"></span><br><span class="line">    mov ax, rank[bx];</span><br><span class="line">    xchg ax, rank[bx + 2];</span><br><span class="line">    mov rank[bx], ax;</span><br><span class="line"></span><br><span class="line">csort:</span><br><span class="line">    add bx, 2;</span><br><span class="line">    loop loops2;</span><br><span class="line">    pop cx;</span><br><span class="line">    loop loops1;</span><br><span class="line"></span><br><span class="line">    pop cx;</span><br><span class="line">    pop bx;</span><br><span class="line">    pop ax;</span><br><span class="line">    ret</span><br><span class="line">sort endp</span><br><span class="line"></span><br><span class="line">dis proc</span><br><span class="line">    push ax; 保护寄存器的值</span><br><span class="line">    push bx;</span><br><span class="line">    push cx;</span><br><span class="line">    push dx;</span><br><span class="line">    push di;</span><br><span class="line"></span><br><span class="line">    mov cx, sn;</span><br><span class="line">    mov di, 31h;</span><br><span class="line">    mov bx, 0;</span><br><span class="line">loopdis:</span><br><span class="line">    mov dx, di;</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl, 0dh; 显示回车</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl, 0ah; 显示换行</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ax, rank[bx];</span><br><span class="line">    mov dl, nl;</span><br><span class="line">    mul dl;</span><br><span class="line">    mov dx, offset nameA; 显示名字</span><br><span class="line">    add dx, ax;</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl, 0dh; 显示回车</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl, 0ah; 显示换行</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov ax, rank[bx];</span><br><span class="line">    mov dl, sl;</span><br><span class="line">    mul dl;</span><br><span class="line">    mov dx, offset scoreAsc; 显示成绩</span><br><span class="line">    add dx, ax;</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl, 0dh; 显示回车</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl, 0ah; 显示换行</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">    inc di;</span><br><span class="line">    add bx, 2;</span><br><span class="line">    loop loopdis;</span><br><span class="line"></span><br><span class="line">    pop di;</span><br><span class="line">    pop dx;</span><br><span class="line">    pop cx;</span><br><span class="line">    pop bx;</span><br><span class="line">    pop ax;</span><br><span class="line">    ret;</span><br><span class="line">dis endp</span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h3 id="运行截图-2">运行截图</h3><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230516213414837.png" class="" title="image-20230516213414837"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230516213559567.png" class="" title="image-20230516213559567"><h2 id="实验七">实验七</h2><h3 id="题目1">题目1</h3><p>用递归完成阶乘运算。</p><p>（1）代码</p><p>（2）Debug截图，递归过程中堆栈中保存最多数据的情况，并对截图中的数据给出解释，这些数据分别是什么值。</p><p>（3）对实验结果进行截图。</p><h4 id="代码-3"><strong>代码</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">stack segment stack</span><br><span class="line">    dw 128 dup(0)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">    assume cs: code</span><br><span class="line">start:</span><br><span class="line">    mov bx, 5;</span><br><span class="line">    push bx;</span><br><span class="line">    call fac;</span><br><span class="line">    mov ah, 4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">fac proc</span><br><span class="line">    mov bp, sp;</span><br><span class="line">    add bp, 2;</span><br><span class="line">    mov bx, [bp];</span><br><span class="line">    cmp bx, 1;</span><br><span class="line">    jne next;</span><br><span class="line">    mov ax, 1;</span><br><span class="line">    jmp exit;</span><br><span class="line">next:</span><br><span class="line">    dec bx;</span><br><span class="line">    push bx;</span><br><span class="line">    call fac; 通过ax返回，返回的是fac(n - 1)的阶乘值</span><br><span class="line">    mov bp, sp;</span><br><span class="line">    add bp, 2;</span><br><span class="line">    mov bx, [bp];</span><br><span class="line">    mul bl; ax = al * bl &lt;=&gt; n * fac(n - 1)</span><br><span class="line">    jmp exit;</span><br><span class="line">exit:</span><br><span class="line">    ret 2;</span><br><span class="line">fac endp</span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h4 id="debug截图"><strong>Debug截图</strong></h4><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230525114925201.png" class="" title="image-20230525114925201"><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230525115531441.png" class="" title="image-20230525115531441"><p>如图所示，当BP的值为00EC时，堆栈中保存的数据最多。图中的05、04、03、02、01、00表示还要递归的次数，23和07表示调用子程序时入栈的IP地址。</p><h4 id="运行截图-3"><strong>运行截图</strong></h4><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230525120929729.png" class="" title="image-20230525120929729"><p>如图所示，AX寄存器存储了5的阶乘的结果78H，转换为十进制即为120，结果正确。</p><h3 id="题目2">题目2</h3><p>将第六次实验课中的输入姓名成绩排序并输出的题目，依据实际情况拆分成5个或者6个.asm文件。</p><p>（1） 简单阐述拆分思路。</p><p>（2）写代码。看一下数据，哪些适合放在主过程文件，哪些适合放在子过程文件。</p><p>（3） 对实验结果进行截图。</p><h4 id="拆分思路"><strong>拆分思路</strong></h4><p>将整个程序依据功能拆分为显示功能、输入姓名功能、输入成绩功能和排序功能。</p><h4 id="代码-4"><strong>代码</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">; dis.asm</span><br><span class="line">include \test\exp0515\test.mac</span><br><span class="line">public dis;</span><br><span class="line">data segment common 'data'</span><br><span class="line">    sn equ 5; 学生的数量</span><br><span class="line">    nameA db sn dup(13, ?, 13 dup('$'))</span><br><span class="line">    scoreAsc db sn dup(4 dup('$'))</span><br><span class="line">    rank dw 0, 1, 2, 3, 4</span><br><span class="line">    scoreN dw sn dup(0)</span><br><span class="line">    </span><br><span class="line">    infoName db 0dh, 0ah, 'input Name: $'</span><br><span class="line">    infoScore db 0dh, 0ah, 'input Score: $'</span><br><span class="line">    n db 0</span><br><span class="line">    nl db 15; 名字的长度</span><br><span class="line">    x db 3 dup(0)</span><br><span class="line">    sl db 4</span><br><span class="line">data ends</span><br><span class="line">code segment public 'code'</span><br><span class="line">    assume cs: code, ds: data</span><br><span class="line">dis proc</span><br><span class="line">    push ax; 保护寄存器的值</span><br><span class="line">    push bx;</span><br><span class="line">    push cx;</span><br><span class="line">    push dx;</span><br><span class="line">    push di;</span><br><span class="line"></span><br><span class="line">    mov cx, sn;</span><br><span class="line">    mov di, 31h;</span><br><span class="line">    mov bx, 0;</span><br><span class="line">loopdis:</span><br><span class="line">    mov dx, di;</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">    printEnter;</span><br><span class="line">    mov ax, rank[bx];</span><br><span class="line">    mov dl, nl;</span><br><span class="line">    mul dl;</span><br><span class="line">    mov dx, offset nameA; 显示名字</span><br><span class="line">    add dx, ax;</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    printEnter;</span><br><span class="line">    mov ax, rank[bx];</span><br><span class="line">    mov dl, sl;</span><br><span class="line">    mul dl;</span><br><span class="line">    mov dx, offset scoreAsc; 显示成绩</span><br><span class="line">    add dx, ax;</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    printEnter;</span><br><span class="line">    inc di;</span><br><span class="line">    add bx, 2;</span><br><span class="line">    loop loopdis;</span><br><span class="line"></span><br><span class="line">    pop di;</span><br><span class="line">    pop dx;</span><br><span class="line">    pop cx;</span><br><span class="line">    pop bx;</span><br><span class="line">    pop ax;</span><br><span class="line">    ret;</span><br><span class="line">dis endp</span><br><span class="line">code ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">; inname.asm</span><br><span class="line">public inName;</span><br><span class="line">data segment common 'data'</span><br><span class="line">    sn equ 5; 学生的数量</span><br><span class="line">    nameA db sn dup(13, ?, 13 dup('$'))</span><br><span class="line">    scoreAsc db sn dup(4 dup('$'))</span><br><span class="line">    rank dw 0, 1, 2, 3, 4</span><br><span class="line">    scoreN dw sn dup(0)</span><br><span class="line">    </span><br><span class="line">    infoName db 0dh, 0ah, 'input Name: $'</span><br><span class="line">    infoScore db 0dh, 0ah, 'input Score: $'</span><br><span class="line">    n db 0</span><br><span class="line">    nl db 15; 名字的长度</span><br><span class="line">    x db 3 dup(0)</span><br><span class="line">    sl db 4</span><br><span class="line">data ends</span><br><span class="line">code segment public 'code'</span><br><span class="line">    assume cs: code, ds: data</span><br><span class="line">inName proc; 输入姓名过程</span><br><span class="line">    push ax; 保护寄存器的值</span><br><span class="line">    push bx;</span><br><span class="line">    push cx;</span><br><span class="line">    push dx;</span><br><span class="line"></span><br><span class="line">    mov al, n;</span><br><span class="line">    mov cl, nl;</span><br><span class="line">    mul cl;</span><br><span class="line">    mov dx, offset nameA;</span><br><span class="line">    add dx, ax;</span><br><span class="line">    mov ah, 0ah;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov bx, dx;</span><br><span class="line">    mov byte ptr [bx], 0ah;</span><br><span class="line">    inc bx;</span><br><span class="line">    mov byte ptr [bx], 0dh;</span><br><span class="line"></span><br><span class="line">    pop dx;</span><br><span class="line">    pop cx;</span><br><span class="line">    pop bx;</span><br><span class="line">    pop ax;</span><br><span class="line">    ret;</span><br><span class="line">inName endp</span><br><span class="line">code ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">; inscore.asm</span><br><span class="line">public inScore;</span><br><span class="line">data segment common 'data'</span><br><span class="line">    sn equ 5; 学生的数量</span><br><span class="line">    nameA db sn dup(13, ?, 13 dup('$'))</span><br><span class="line">    scoreAsc db sn dup(4 dup('$'))</span><br><span class="line">    rank dw 0, 1, 2, 3, 4</span><br><span class="line">    scoreN dw sn dup(0)</span><br><span class="line">    </span><br><span class="line">    infoName db 0dh, 0ah, 'input Name: $'</span><br><span class="line">    infoScore db 0dh, 0ah, 'input Score: $'</span><br><span class="line">    n db 0</span><br><span class="line">    nl db 15; 名字的长度</span><br><span class="line">    x db 3 dup(0)</span><br><span class="line">    sl db 4</span><br><span class="line">data ends</span><br><span class="line">code segment public 'code'</span><br><span class="line">    assume cs: code, ds: data</span><br><span class="line">inScore proc; 输入成绩过程</span><br><span class="line">    push ax; 保护寄存器的值</span><br><span class="line">    push bx;</span><br><span class="line">    push cx;</span><br><span class="line">    push dx;</span><br><span class="line">    push si;</span><br><span class="line">    push di;</span><br><span class="line"></span><br><span class="line">    mov al, n;</span><br><span class="line">    mov cl, sl;</span><br><span class="line">    mul cl;</span><br><span class="line">    mov bp, offset scoreAsc;</span><br><span class="line">    add bp, ax;</span><br><span class="line">    mov si, 0; 用于写入缓冲区，记录数位个数</span><br><span class="line">let0:</span><br><span class="line">    mov ah,1;</span><br><span class="line">    int 21h;</span><br><span class="line">    cmp al,0dh; enter</span><br><span class="line">    je let1;</span><br><span class="line">    mov ds:[bp], al;</span><br><span class="line">    inc bp;</span><br><span class="line">    sub al,30h; 将数字存入缓冲区</span><br><span class="line">    mov x[si],al;</span><br><span class="line">    inc si; 位数++</span><br><span class="line">    jmp let0;</span><br><span class="line">let1:</span><br><span class="line">    mov bx,0;</span><br><span class="line">    mov di,0;</span><br><span class="line">    cmp si,1; 判断是不是1位数</span><br><span class="line">    je let2;</span><br><span class="line">    cmp si,3; 判断是不是3位数</span><br><span class="line">    jne let3;</span><br><span class="line">    mov al,x[di]; 三位数</span><br><span class="line">    mov cl,100;</span><br><span class="line">    mul cl;</span><br><span class="line">    add bx,ax;</span><br><span class="line">    inc di;</span><br><span class="line">let3:</span><br><span class="line">    mov al,x[di]; 两位数</span><br><span class="line">    mov cl,10;</span><br><span class="line">    mul cl;</span><br><span class="line">    add bx,ax;</span><br><span class="line">    inc di;</span><br><span class="line">let2:</span><br><span class="line">    mov al,x[di]; 一位数</span><br><span class="line">    mov ah,0;</span><br><span class="line">    add bx,ax;</span><br><span class="line">    mov ax,bx;</span><br><span class="line">    mov al, n;</span><br><span class="line">    mov cl, 2;</span><br><span class="line">    mul cl;</span><br><span class="line">    mov di, ax;</span><br><span class="line">    mov scoreN[di], bx;</span><br><span class="line"></span><br><span class="line">    pop di;</span><br><span class="line">    pop si;</span><br><span class="line">    pop dx;</span><br><span class="line">    pop cx;</span><br><span class="line">    pop bx;</span><br><span class="line">    pop ax;</span><br><span class="line">    ret</span><br><span class="line">inScore endp</span><br><span class="line">code ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">; main.asm</span><br><span class="line">extrn inName: near, inScore: near, sort: near, dis: near</span><br><span class="line">data segment common</span><br><span class="line">    sn equ 5; 学生的数量</span><br><span class="line">    nameA db sn dup(13, ?, 13 dup('$'))</span><br><span class="line">    scoreAsc db sn dup(4 dup('$'))</span><br><span class="line">    rank dw 0, 1, 2, 3, 4</span><br><span class="line">    scoreN dw sn dup(0)</span><br><span class="line">    </span><br><span class="line">    infoName db 0dh, 0ah, 'input Name: $'</span><br><span class="line">    infoScore db 0dh, 0ah, 'input Score: $'</span><br><span class="line">    n db 0</span><br><span class="line">    nl db 15; 名字的长度</span><br><span class="line">    x db 3 dup(0)</span><br><span class="line">    sl db 4</span><br><span class="line">data ends</span><br><span class="line">code segment public 'code'</span><br><span class="line">    assume cs:code, ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax, data;</span><br><span class="line">    mov ds, ax;</span><br><span class="line">    mov cx, sn;</span><br><span class="line">loopm:</span><br><span class="line">    mov dx, offset infoName;</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    call inName;</span><br><span class="line">    mov dx, offset infoScore;</span><br><span class="line">    mov ah, 9;</span><br><span class="line">    int 21h;</span><br><span class="line">    call inScore</span><br><span class="line">    inc n; 对n做加1操作</span><br><span class="line">    loop loopm;</span><br><span class="line">    call sort;</span><br><span class="line">    call dis;</span><br><span class="line">    </span><br><span class="line">    mov ah, 4ch;</span><br><span class="line">    int 21h;</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">; sort.asm</span><br><span class="line">public sort;</span><br><span class="line">data segment common 'data'</span><br><span class="line">    sn equ 5; 学生的数量</span><br><span class="line">    nameA db sn dup(13, ?, 13 dup('$'))</span><br><span class="line">    scoreAsc db sn dup(4 dup('$'))</span><br><span class="line">    rank dw 0, 1, 2, 3, 4</span><br><span class="line">    scoreN dw sn dup(0)</span><br><span class="line">    </span><br><span class="line">    infoName db 0dh, 0ah, 'input Name: $'</span><br><span class="line">    infoScore db 0dh, 0ah, 'input Score: $'</span><br><span class="line">    n db 0</span><br><span class="line">    nl db 15; 名字的长度</span><br><span class="line">    x db 3 dup(0)</span><br><span class="line">    sl db 4</span><br><span class="line">data ends</span><br><span class="line">code segment public 'code'</span><br><span class="line">    assume cs: code, ds: data</span><br><span class="line">sort proc</span><br><span class="line">    push ax; 保护寄存器的值</span><br><span class="line">    push bx;</span><br><span class="line">    push cx;</span><br><span class="line"></span><br><span class="line">    mov cx, sn;</span><br><span class="line">    dec cx;</span><br><span class="line">loops1:</span><br><span class="line">    push cx;</span><br><span class="line">    mov bx, 0;</span><br><span class="line">loops2:</span><br><span class="line">    mov ax, scoreN[bx];</span><br><span class="line">    cmp ax, scoreN[bx + 2];</span><br><span class="line">    jae csort;</span><br><span class="line">    xchg ax, scoreN[bx + 2];</span><br><span class="line">    mov scoreN[bx], ax;</span><br><span class="line"></span><br><span class="line">    mov ax, rank[bx];</span><br><span class="line">    xchg ax, rank[bx + 2];</span><br><span class="line">    mov rank[bx], ax;</span><br><span class="line"></span><br><span class="line">csort:</span><br><span class="line">    add bx, 2;</span><br><span class="line">    loop loops2;</span><br><span class="line">    pop cx;</span><br><span class="line">    loop loops1;</span><br><span class="line"></span><br><span class="line">    pop cx;</span><br><span class="line">    pop bx;</span><br><span class="line">    pop ax;</span><br><span class="line">    ret</span><br><span class="line">sort endp</span><br><span class="line">code ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure><h4 id="结果截图"><strong>结果截图</strong></h4><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230525121321574.png" class="" title="image-20230525121321574"><h3 id="题目3">题目3</h3><p>将2中某些重复代码改写成宏，并将其放在.mac文件中。并用include命令引入。</p><p>（1）将mac文件中的内容进行截图。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">printEnter macro</span><br><span class="line">    mov dl, 0dh;</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">    mov dl, 0ah;</span><br><span class="line">    mov ah, 2;</span><br><span class="line">    int 21h;</span><br><span class="line">endm</span><br></pre></td></tr></table></figure><p>（2）将宏展开进行截图。</p><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230525121557059.png" class="" title="image-20230525121557059"><p>如图所示，宏printEnter在dis.asm代码中展开。</p><h2 id="实验八">实验八</h2><h3 id="题目1-1">题目1</h3><p>1、键盘9号中断，和bios 16h号中断（P213页）。改写9号中断。</p><p>9号中断：硬件中断。 触发条件：按下键盘上的一个键。</p><p>16h号中断：软件中断。 触发条件：软件中调用。</p><p>（1） 给出代码，代码加注释。</p><p>（2） 给出实验结果截图。</p><h4 id="代码-5"><strong>代码</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">code segment</span><br><span class="line">    assume cs:code</span><br><span class="line">start:</span><br><span class="line">    mov ax, 0</span><br><span class="line">    mov ds, ax</span><br><span class="line">    push ds:[0024h] ;保护原有的中断服务程序</span><br><span class="line">    pop ds:[0200h]</span><br><span class="line">    push ds:[0026h]</span><br><span class="line">    pop ds:[0202h]</span><br><span class="line">    mov ah, 25h</span><br><span class="line">    mov al, 9</span><br><span class="line">    push cs</span><br><span class="line">    pop ds</span><br><span class="line">    mov dx, offset int9</span><br><span class="line">    int 21h</span><br><span class="line">    mov ah, 31h ;int9proc依然保存在内存当中</span><br><span class="line">    mov al, 0</span><br><span class="line">    mov dx, int9end - int9start + 16</span><br><span class="line">    int 21h</span><br><span class="line"></span><br><span class="line">int9 proc</span><br><span class="line">int9start:</span><br><span class="line">    push ax</span><br><span class="line">    push bx</span><br><span class="line">    push cx</span><br><span class="line">    push es</span><br><span class="line">    in al, 60h</span><br><span class="line">    pushf</span><br><span class="line">    mov cx, 0</span><br><span class="line">    mov es, cx</span><br><span class="line">    call dword ptr es:[0200h]</span><br><span class="line">    cmp al, 1eh</span><br><span class="line">    jne int9ret</span><br><span class="line">    mov ax, 0b800h</span><br><span class="line">    mov es, ax</span><br><span class="line">    mov bx, 1</span><br><span class="line">    mov cx, 2000</span><br><span class="line">change:</span><br><span class="line">    inc byte ptr es:[bx]</span><br><span class="line">    add bx, 2</span><br><span class="line">    loop change</span><br><span class="line">int9ret:</span><br><span class="line">    pop es</span><br><span class="line">    pop cx</span><br><span class="line">    pop bx</span><br><span class="line">    pop ax</span><br><span class="line">    iret</span><br><span class="line">int9 endp</span><br><span class="line">int9end: nop</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h4 id="结果截图-1"><strong>结果截图</strong></h4><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230525201528999.png" class="" title="image-20230525201528999"><p>如图所示，程序改写了9号中断，实现了用户按下a键可以使Dos窗口变色的效果。</p><h3 id="题目2-1">题目2</h3><p>模仿课本第二版P203页示例9-1代码编写7ch号中断。</p><p>7ch号中断处理程序的功能是在屏幕上输出自己的班级，班级序号，学号，姓名。</p><p>例如：1706 1 20177004 xuhaoyong</p><p>并在另外一个程序程序中调用7ch号中断。</p><ol type="1"><li><p>给出代码，代码加注释。</p></li><li><p>给出实验结果截图。</p></li><li><p>给出7ch号中断向量表截图。</p></li></ol><h4 id="代码-6"><strong>代码</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">; int7c.asm</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code</span><br><span class="line">start:</span><br><span class="line">    mov ah, 25h</span><br><span class="line">    mov al, 7ch</span><br><span class="line">    push cs</span><br><span class="line">    pop ds</span><br><span class="line">    mov dx, offset int7c</span><br><span class="line">    int 21h</span><br><span class="line">    mov ah, 31h ;int9proc依然保存在内存当中</span><br><span class="line">    mov al, 0</span><br><span class="line">    mov dx, int7chend - int7cstart + 16</span><br><span class="line">    int 21h</span><br><span class="line"></span><br><span class="line">int7c proc</span><br><span class="line">int7cstart:</span><br><span class="line">    push ds</span><br><span class="line">    push ax</span><br><span class="line">    push dx</span><br><span class="line">    jmp int7chcode</span><br><span class="line">    info db '2101 22 202112143 lijunqi$'</span><br><span class="line">int7chcode:</span><br><span class="line">    push cs</span><br><span class="line">    pop ds</span><br><span class="line">    mov dx, offset info</span><br><span class="line">    mov ah, 9</span><br><span class="line">    int 21h</span><br><span class="line">    pop dx</span><br><span class="line">    pop ax</span><br><span class="line">    pop ds</span><br><span class="line">    iret</span><br><span class="line">int7c endp</span><br><span class="line">int7chend: nop</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">; test.asm</span><br><span class="line">code segment</span><br><span class="line">    assume cs:code</span><br><span class="line">start:</span><br><span class="line">    int 7ch</span><br><span class="line">    mov ah, 4ch</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h4 id="结果截图-2"><strong>结果截图</strong></h4><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230525201941810.png" class="" title="image-20230525201941810"><h4 id="ch号中断向量表截图"><strong>7ch号中断向量表截图</strong></h4><img src="/2023/04/05/%E3%80%90Assembly%E3%80%91%E6%9C%AA%E5%88%86%E7%B1%BB%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20230525204003465.png" class="" title="image-20230525204003465"><p>如图所示，7ch号中断的中断向量为7ch*4=1f0h，因此访问数据段0000:01f0即可获取7ch号中断的中断向量表。</p><h3 id="题目3-1">题目3</h3><p>查找资料，写出子程序和中断程序的区别。</p><p>两者的区别在于：子程序是为主程序服务的，而中断程序与主程序的程序毫无关系；子程序是由调用指令给出目标地址，中断是通过隐指令获得中断服务程序的入口地址；中断服务子程序以IRET结束，而一般子程序以RET结束。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Assembly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】Chainlink Any API</title>
      <link href="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/"/>
      <url>/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在Chainlink官方文档中，<strong>AnyAPI</strong>提及了获取多元链下数据的方式，包括uint256，int256，bool，string，bytes32和bytes六种类型。本文将对单元请求、多元请求、数组请求、大型请求的对应操作进行模拟。</p><p>官方文档的写法：</p><ul><li>Single Word Response</li><li>Multi-Variable Responses</li><li>Array Response</li><li>Large Response</li></ul><p><del>翻译可能不准确，那不管了</del></p><p>不仅如此，Chainlink节点的Job充当了一个辅助预言机节点监听智能合约时间的角色。当用户调用智能合约的请求函数时，请求函数体中会emit一个event事件，从而使预言机节点能够监听到这个event并根据Job的规定作出相应的回应。</p><p>部署合约关键在于指定JobId、LinkToken Address、OperatorAddress和API，但Chainlink官网文档的合约并没有明确指明这四个字段的内容，因此我对他们进行了一些修改，以方便以后修改数据。</p><p>代码可以参考<ahref="https://docs.chain.link/any-api/get-request/introduction">Make aGET Request | Chainlink Documentation</a></p><p>JOB的toml文件怎么写可以参考<ahref="https://docs.chain.link/chainlink-nodes/oracle-jobs/job-types/direct_request">DirectRequest Jobs | Chainlink Documentation</a></p><h2 id="single-word-response">Single Word Response</h2><p>针对单一属性数据的请求，可以在命令行执行以下命令来模拟：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -X <span class="string">&#x27;GET&#x27;</span> \</span><br><span class="line">  <span class="string">&#x27;https://min-api.cryptocompare.com/data/pricemultifull?fsyms=ETH&amp;tsyms=USD&#x27;</span> \</span><br><span class="line">  -H <span class="string">&#x27;accept: application/json&#x27;</span></span><br></pre></td></tr></table></figure><p>你将得到像这样的JSON文件：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;RAW&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ETH&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;USD&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;TYPE&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MARKET&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CCCAGG&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;FROMSYMBOL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ETH&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;TOSYMBOL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;USD&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;FLAGS&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2049&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;PRICE&quot;</span><span class="punctuation">:</span> <span class="number">2867.04</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTUPDATE&quot;</span><span class="punctuation">:</span> <span class="number">1650896942</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MEDIAN&quot;</span><span class="punctuation">:</span> <span class="number">2866.2</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTVOLUME&quot;</span><span class="punctuation">:</span> <span class="number">0.16533939</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTVOLUMETO&quot;</span><span class="punctuation">:</span> <span class="number">474.375243849</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LASTTRADEID&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1072154517&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;VOLUMEDAY&quot;</span><span class="punctuation">:</span> <span class="number">195241.78281014622</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;VOLUMEDAYTO&quot;</span><span class="punctuation">:</span> <span class="number">556240560.4621655</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;VOLUME24HOUR&quot;</span><span class="punctuation">:</span> <span class="number">236248.94641103</span><span class="punctuation">,</span></span><br><span class="line">        ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>那么我可以获取其中的某个单一字段的数据，比如<code>"VOLUME24HOUR"</code>。以下是获取单一数据的Job和示例合约。</p><h3 id="job">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;Get &gt; Uint256 - (TOML) test&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    multiply     [type=&quot;multiply&quot; input=&quot;$(parse)&quot; times=&quot;$(decode_cbor.times)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, uint256 value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(multiply) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; multiply -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract <span class="title class_">APIConsumer</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    uint256 public volume;</span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;97a63b405f35442abf8c84df1b31ed7c&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi = <span class="string">&quot;https://min-api.cryptocompare.com/data/pricemultifull?fsyms=ETH&amp;tsyms=USD&quot;</span>;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestVolume</span>(bytes32 indexed requestId, uint256 volume);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(oracleAddress);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a Chainlink request to retrieve API response, find the target</span></span><br><span class="line"><span class="comment">     * data, then multiply by 1000000000000000000 (to remove decimal places from data).</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestVolumeData</span>(<span class="params"></span>) public returns (bytes32 requestId) &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfill</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the URL to perform the GET request on</span></span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            myApi</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the path to find the desired data in the API response, where the response format is:</span></span><br><span class="line">        <span class="comment">// &#123;&quot;RAW&quot;:</span></span><br><span class="line">        <span class="comment">//   &#123;&quot;ETH&quot;:</span></span><br><span class="line">        <span class="comment">//    &#123;&quot;USD&quot;:</span></span><br><span class="line">        <span class="comment">//     &#123;</span></span><br><span class="line">        <span class="comment">//      &quot;VOLUME24HOUR&quot;: xxx.xxx,</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">//    &#125;</span></span><br><span class="line">        <span class="comment">//   &#125;</span></span><br><span class="line">        <span class="comment">//  &#125;</span></span><br><span class="line">        <span class="comment">// request.add(&quot;path&quot;, &quot;RAW.ETH.USD.VOLUME24HOUR&quot;); // Chainlink nodes prior to 1.0.0 support this format</span></span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;RAW,ETH,USD,VOLUME24HOUR&quot;</span>); <span class="comment">// Chainlink nodes 1.0.0 and later support this format</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Multiply the result by 1000000000000000000 to remove decimals</span></span><br><span class="line">        int256 timesAmount = <span class="number">10</span> ** <span class="number">18</span>;</span><br><span class="line">        req.<span class="title function_">addInt</span>(<span class="string">&quot;times&quot;</span>, timesAmount);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Sends the request</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">sendChainlinkRequest</span>(req, fee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Receive the response in the form of uint256</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfill</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        uint256 _volume</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">_requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestVolume</span>(_requestId, _volume);</span><br><span class="line">        volume = _volume;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>部署的合约地址为：0x9fAC2f4D6a039e4A0740314543B087c51f29cAE9，随后使用LinkToken合约向该合约转账0.5个LINK。</p><p>整理以上地址信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobid: 97a63b405f35442abf8c84df1b31ed7c</span><br><span class="line">APIConsumer: 0x9fAC2f4D6a039e4A0740314543B087c51f29cAE9</span><br></pre></td></tr></table></figure><p>调用<code>requestVolumeData</code>函数，请求链下API的<code>VOLUME24HOUR</code>，查看ChainlinkOperator控制台情况。</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/chainlink_single_word_response.png" class="" title="chainlink_single_word_response"><p>调用<code>Volume</code>函数即可查看返回值</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/remix_single_word_response-16814552111081.png" class="" title="remix_single_word_response"><h2 id="multi-variable-responses">Multi-Variable Responses</h2><p>这里我们申请多个数据类型为uint256的数据。废话不多说，直接放出job和合约代码</p><h3 id="job-1">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;multi-word(TOML)&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor</span></span><br><span class="line"><span class="string">    decode_cbor -&gt; btc</span></span><br><span class="line"><span class="string">    decode_cbor -&gt; usd</span></span><br><span class="line"><span class="string">    decode_cbor -&gt; eur</span></span><br><span class="line"><span class="string">    btc          [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.urlBTC)&quot; allowunrestrictednetworkaccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    btc_parse    [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.pathBTC)&quot; data=&quot;$(btc)&quot;]</span></span><br><span class="line"><span class="string">    btc_multiply [type=&quot;multiply&quot; input=&quot;$(btc_parse)&quot;, times=&quot;100000&quot;]</span></span><br><span class="line"><span class="string">    btc -&gt; btc_parse -&gt; btc_multiply</span></span><br><span class="line"><span class="string">    usd          [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.urlUSD)&quot; allowunrestrictednetworkaccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    usd_parse    [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.pathUSD)&quot; data=&quot;$(usd)&quot;]</span></span><br><span class="line"><span class="string">    usd_multiply [type=&quot;multiply&quot; input=&quot;$(usd_parse)&quot;, times=&quot;100000&quot;]</span></span><br><span class="line"><span class="string">    usd -&gt; usd_parse -&gt; usd_multiply</span></span><br><span class="line"><span class="string">    eur          [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.urlEUR)&quot; allowunrestrictednetworkaccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    eur_parse    [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.pathEUR)&quot; data=&quot;$(eur)&quot;]</span></span><br><span class="line"><span class="string">    eurs_multiply [type=&quot;multiply&quot; input=&quot;$(eur_parse)&quot;, times=&quot;100000&quot;]</span></span><br><span class="line"><span class="string">    eur -&gt; eur_parse -&gt; eurs_multiply</span></span><br><span class="line"><span class="string">    btc_multiply -&gt; encode_mwr</span></span><br><span class="line"><span class="string">    usd_multiply -&gt; encode_mwr</span></span><br><span class="line"><span class="string">    eurs_multiply -&gt; encode_mwr</span></span><br><span class="line"><span class="string">    // MWR API does NOT auto populate the requestID.</span></span><br><span class="line"><span class="string">    encode_mwr [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                abi=&quot;(bytes32 requestId, uint256 _btc, uint256 _usd, uint256 _eurs)&quot;</span></span><br><span class="line"><span class="string">                data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;_btc\\&quot;: $(btc_multiply), \\&quot;_usd\\&quot;: $(usd_multiply), \\&quot;_eurs\\&quot;: $(eurs_multiply)&#125;&quot;</span></span><br><span class="line"><span class="string">                ]</span></span><br><span class="line"><span class="string">    encode_tx  [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_mwr)&#125;&quot;</span></span><br><span class="line"><span class="string">                ]</span></span><br><span class="line"><span class="string">    submit_tx  [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string">    encode_mwr -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract-1">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract <span class="title class_">MultiWordConsumer</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// multiple params returned in a single oracle response</span></span><br><span class="line">    uint256 public btc;</span><br><span class="line">    uint256 public usd;</span><br><span class="line">    uint256 public eur;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;6073eaa7c1c14e77aef5f9fd8c96eccb&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi1 = <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=BTC&quot;</span>;</span><br><span class="line">    string myApi2 = <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=USD&quot;</span>;</span><br><span class="line">    string myApi3 = <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=EUR&quot;</span>;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestMultipleFulfilled</span>(</span><br><span class="line">        bytes32 indexed requestId,</span><br><span class="line">        uint256 btc,</span><br><span class="line">        uint256 usd,</span><br><span class="line">        uint256 eur</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Initialize the link token and target oracle</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> The oracle address must be an Operator contract for multiword response</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * Sepolia Testnet details:</span></span><br><span class="line"><span class="comment">     * Link Token: 0x779877A7B0D9E8603169DdbD7836e478b4624789</span></span><br><span class="line"><span class="comment">     * Oracle: 0x6090149792dAAeE9D1D568c9f9a6F6B46AA29eFD (Chainlink DevRel)</span></span><br><span class="line"><span class="comment">     * jobId: 53f9755920cd451a8fe46f5087468395</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(<span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Request mutiple parameters from the oracle in a single transaction</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestMultipleParameters</span>(<span class="params"></span>) public &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfillMultipleParameters</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;urlBTC&quot;</span>,</span><br><span class="line">            myApi1</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;pathBTC&quot;</span>, <span class="string">&quot;BTC&quot;</span>);</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;urlUSD&quot;</span>,</span><br><span class="line">            myApi2</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;pathUSD&quot;</span>, <span class="string">&quot;USD&quot;</span>);</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;urlEUR&quot;</span>,</span><br><span class="line">            myApi3</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;pathEUR&quot;</span>, <span class="string">&quot;EUR&quot;</span>);</span><br><span class="line">        <span class="title function_">sendChainlinkRequest</span>(req, fee); <span class="comment">// MWR API.</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Fulfillment function for multiple parameters in a single request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> This is called by the oracle. recordChainlinkFulfillment must be used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfillMultipleParameters</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 requestId,</span></span><br><span class="line"><span class="params">        uint256 btcResponse,</span></span><br><span class="line"><span class="params">        uint256 usdResponse,</span></span><br><span class="line"><span class="params">        uint256 eurResponse</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestMultipleFulfilled</span>(</span><br><span class="line">            requestId,</span><br><span class="line">            btcResponse,</span><br><span class="line">            usdResponse,</span><br><span class="line">            eurResponse</span><br><span class="line">        );</span><br><span class="line">        btc = btcResponse;</span><br><span class="line">        usd = usdResponse;</span><br><span class="line">        eur = eurResponse;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>部署得到的合约地址：0xd214Ce7721dd13F32e59c45Fee97eA26d3f2aE94</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobId: 6073eaa7c1c14e77aef5f9fd8c96eccb</span><br><span class="line">MultiWordConsumer: 0xd214Ce7721dd13F32e59c45Fee97eA26d3f2aE94</span><br></pre></td></tr></table></figure><p>转LINK，调用函数，查看Chainlink Operator控制台</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/chainlink_multi_variables_responses.png" class="" title="chainlink_multi_variables_responses"><p>)</p><p>Remix</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/remix_multi_variables_responses.png" class="" title="remix_multi_variables_responses"><h2 id="array-response">Array Response</h2><p>针对JSON数据源是数组的情况，本例在添加path路径时指定了JSON路径。比如：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;0,id&quot;</span>); <span class="comment">// Chainlink nodes 1.0.0 and later support this format</span></span><br></pre></td></tr></table></figure><p>这次我们请求string类型的数据。</p><h3 id="job-2">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES HARDCODED VALUES FOR CLARITY.</span></span><br><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"># DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;Get &gt; String&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, string value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(parse) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract-2">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract <span class="title class_">FetchFromArray</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    string public id;</span><br><span class="line"></span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestFirstId</span>(bytes32 indexed requestId, string id);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;fdef9cbf8826404fa94d9e114ef28fb4&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi = <span class="string">&quot;https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&amp;per_page=10&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(oracleAddress);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a Chainlink request to retrieve API response, find the target</span></span><br><span class="line"><span class="comment">     * data which is located in a list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestFirstId</span>(<span class="params"></span>) public returns (bytes32 requestId) &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfill</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the URL to perform the GET request on</span></span><br><span class="line">        <span class="comment">// API docs: https://www.coingecko.com/en/api/documentation?</span></span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            myApi</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the path to find the desired data in the API response, where the response format is:</span></span><br><span class="line">        <span class="comment">// [&#123;</span></span><br><span class="line">        <span class="comment">//  &quot;id&quot;: &quot;bitcoin&quot;,</span></span><br><span class="line">        <span class="comment">//  &quot;symbol&quot;: btc&quot;,</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">//&#123;</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// .. &#125;]</span></span><br><span class="line">        <span class="comment">// request.add(&quot;path&quot;, &quot;0.id&quot;); // Chainlink nodes prior to 1.0.0 support this format</span></span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;0,id&quot;</span>); <span class="comment">// Chainlink nodes 1.0.0 and later support this format</span></span><br><span class="line">        <span class="comment">// Sends the request</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">sendChainlinkRequest</span>(req, fee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Receive the response in the form of string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfill</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        string memory _id</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">_requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestFirstId</span>(_requestId, _id);</span><br><span class="line">        id = _id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>整理地址信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobId: fdef9cbf8826404fa94d9e114ef28fb4</span><br><span class="line">FetchFromArray: 0x938F9cAdf3de9b36921E223dde4Ba3E3Cb535867</span><br></pre></td></tr></table></figure><p>调用函数，结果发现job的fetch处报<code>http request timed out or interrupted</code>，于是我点进了API链接，结果居然无法访问？</p><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/error_chainlink.png" class="" title="error_chainlink"><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/error_web.png" class="" title="error_web"><p>那没事了，我们可以试着换成另一个API让Chainlink预言机获取。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">newAPI: https://min-api.cryptocompare.com/data/pricemultifull?fsyms=ETH&amp;tsyms=USD</span><br><span class="line">path: &#x27;RAW,ETH,USD,LASTTRADEID&#x27;</span><br><span class="line">FetchFromArray: 0x27E14F41A461E9861e0948B702bDaaBC2121E1d5</span><br></pre></td></tr></table></figure><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/chainlink_fetch_string.png" class="" title="chainlink_fetch_string"><img src="/2023/04/01/%E3%80%90Chainlink%E3%80%91Chainlink-Any-API/remix_fetch_string.png" class="" title="remix_fetch_string"><p>很难不怀疑这是API自身的问题......不过在后期我们还能用php手写一个API，这里我们不做演示。</p><h2 id="large-responses">Large Responses</h2><p>这里我们可以获取任意字节长度的数据，数据类型为Bytes。同理，根据上面的方法照样能得到我们想要的结果。这里不作演示。</p><h3 id="job-3">Job</h3><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES HARDCODED VALUES FOR CLARITY.</span></span><br><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"># DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;Get &gt; String&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, string value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(parse) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="contract-3">Contract</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract <span class="title class_">GenericLargeResponse</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// variable bytes(arbitrary-length raw byte data) returned in a single oracle response</span></span><br><span class="line">    bytes public data;</span><br><span class="line">    string public image_url;</span><br><span class="line"></span><br><span class="line">    bytes32 private jobId;</span><br><span class="line">    uint256 private fee;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// LinkToken合约地址</span></span><br><span class="line">    address constant linkTokenAddress = <span class="number">0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span>;</span><br><span class="line">    <span class="comment">// Operator合约地址</span></span><br><span class="line">    address constant oracleAddress = <span class="number">0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span>;</span><br><span class="line">    <span class="comment">// Chainlink Node JobId</span></span><br><span class="line">    bytes32 myJobId = <span class="string">&quot;fdef9cbf8826404fa94d9e114ef28fb4&quot;</span>; </span><br><span class="line">    <span class="comment">// API地址</span></span><br><span class="line">    string myApi = <span class="string">&quot;https://ipfs.io/ipfs/QmZgsvrA1o1C8BGCrx6mHTqR1Ui1XqbCrtbMVrRLHtuPVD?filename=big-api-response.json&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(linkTokenAddress);</span><br><span class="line">        <span class="title function_">setChainlinkOracle</span>(oracleAddress);</span><br><span class="line">        jobId = myJobId;</span><br><span class="line">        fee = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0,1 * 10**18 (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Request variable bytes from the oracle</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestBytes</span>(<span class="params"></span>) public &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            jobId,</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfillBytes</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            myApi</span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;image&quot;</span>);</span><br><span class="line">        <span class="title function_">sendChainlinkRequest</span>(req, fee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestFulfilled</span>(bytes32 indexed requestId, bytes indexed data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@notice</span> Fulfillment function for variable bytes</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> This is called by the oracle. recordChainlinkFulfillment must be used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfillBytes</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 requestId,</span></span><br><span class="line"><span class="params">        bytes memory bytesData</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestFulfilled</span>(requestId, bytesData);</span><br><span class="line">        data = bytesData;</span><br><span class="line">        image_url = <span class="title function_">string</span>(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Allow withdraw of Link tokens from the contract</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结">总结</h2><p>根据Chainlink官方提供的获取多种数据类型的方法，我们能够通过任意的API从链上获取到我们想要的数据，并将他们运用到我们的合约逻辑中，实现数据的链上链下协同。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【算法】递归与递推</title>
      <link href="/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E9%80%92%E5%BD%92%E4%B8%8E%E9%80%92%E6%8E%A8/"/>
      <url>/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E9%80%92%E5%BD%92%E4%B8%8E%E9%80%92%E6%8E%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="递推与递归">递推与递归</h2><h3 id="递归实现指数型枚举">递归实现指数型枚举</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/94/">92.递归实现指数型枚举 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">16</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> st[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (u &gt; n) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (st[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    st[u] = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(u + <span class="number">1</span>);</span><br><span class="line">    st[u] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    st[u] = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(u + <span class="number">1</span>);</span><br><span class="line">    st[u] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="递归实现排列型枚举">递归实现排列型枚举</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/96/">94.递归实现排列型枚举 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 01:37:12</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> state[N];</span><br><span class="line"><span class="type">bool</span> used[N]; <span class="comment">// true表示用过 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (u &gt; n) &#123; <span class="comment">// 边界 </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, state[i]); <span class="comment">// 打印方案 </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;           </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 依次枚举每个分支，即当前位置可以填哪些数 </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!used[i]) &#123;</span><br><span class="line">            state[u] = i;</span><br><span class="line">            used[i] = <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">dfs</span> (u + <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 恢复现场</span></span><br><span class="line">            state[u] = <span class="number">0</span>;</span><br><span class="line">            used[i] = <span class="literal">false</span>; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="翻硬币">翻硬币</h3><p>原题链接：<ahref="https://www.acwing.com/problem/content/1210/">1208. 翻硬币 -AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">101</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">char</span> start[N], aim[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">turn</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (start[i] == <span class="string">&#x27;*&#x27;</span>) start[i] = <span class="string">&#x27;o&#x27;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (start[i] == <span class="string">&#x27;o&#x27;</span>) start[i] = <span class="string">&#x27;*&#x27;</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; start &gt;&gt; aim;</span><br><span class="line">    n = <span class="built_in">strlen</span>(start);</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (start[i] != aim[i]) &#123;</span><br><span class="line">            <span class="built_in">turn</span>(i), <span class="built_in">turn</span>(i + <span class="number">1</span>);</span><br><span class="line">            res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开关只按一次</span></span><br><span class="line"><span class="comment">// 顺序无关紧要 </span></span><br></pre></td></tr></table></figure><h3 id="飞行员兄弟">飞行员兄弟</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/118/">116.飞行员兄弟 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1. 枚举所有方案  0 ~ 2^16 - 1 每一个数看作一个16位的二进制数 </span></span><br><span class="line"><span class="comment">2. 按照该方案对所有灯泡进行操作</span></span><br><span class="line"><span class="comment">3. 判断灯泡是否全亮 =&gt; 记录方案 </span></span><br><span class="line"><span class="comment">O(n) = 2^16 * (16 * 7 + 16 + 16)</span></span><br><span class="line"><span class="comment">（1）步数最小 -- 记录</span></span><br><span class="line"><span class="comment">（2）字典序最小 -- 优先枚举标号小的，所得到的答案就是字典序最小的 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">0  1  2  3 </span></span><br><span class="line"><span class="comment">4  5  6  7</span></span><br><span class="line"><span class="comment">8  9  10 11</span></span><br><span class="line"><span class="comment">12 13 14 15 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> g[N][N], backup[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> x * <span class="number">4</span> + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">turn_one</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (g[x][y] == <span class="string">&#x27;+&#x27;</span>) g[x][y] = <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line"><span class="keyword">else</span> g[x][y] = <span class="string">&#x27;+&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">turn_all</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line"><span class="built_in">turn_one</span>(x, i);</span><br><span class="line"><span class="built_in">turn_one</span>(i, y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">turn_one</span>(x, y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">cin &gt;&gt; g[i];</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;PII&gt; res;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> op = <span class="number">0</span>; op &lt; <span class="number">1</span> &lt;&lt; <span class="number">16</span>; op++) &#123;</span><br><span class="line">vector&lt;PII&gt; temp; <span class="comment">// 用于记录步骤 </span></span><br><span class="line"><span class="built_in">memcpy</span>(backup, g, <span class="built_in">sizeof</span>(g)); <span class="comment">// 备份 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 进行操作 </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line"><span class="comment">// 判断在op的二进制表示中，get(i,j)位的数是否为1 </span></span><br><span class="line"><span class="keyword">if</span> (op &gt;&gt; <span class="built_in">get</span>(i, j) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">temp.<span class="built_in">push_back</span>(&#123;i, j&#125;);</span><br><span class="line"><span class="built_in">turn_all</span>(i, j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断所有灯泡是否全亮</span></span><br><span class="line"><span class="type">bool</span> has_closed = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line"><span class="keyword">if</span> (g[i][j] == <span class="string">&#x27;+&#x27;</span>) &#123;</span><br><span class="line">has_closed = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span> (has_closed == <span class="literal">false</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (res.<span class="built_in">empty</span>() || res.<span class="built_in">size</span>() &gt; temp.<span class="built_in">size</span>()) &#123;</span><br><span class="line">res = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">memcpy</span>(g, backup, <span class="built_in">sizeof</span>(g)); <span class="comment">// 还原</span></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; res.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> op : res) &#123;</span><br><span class="line">cout &lt;&lt; op.x + <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; op.y + <span class="number">1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【算法】二分与前缀和</title>
      <link href="/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E4%BA%8C%E5%88%86%E4%B8%8E%E5%89%8D%E7%BC%80%E5%92%8C/"/>
      <url>/2023/03/23/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E4%BA%8C%E5%88%86%E4%B8%8E%E5%89%8D%E7%BC%80%E5%92%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="整数二分">整数二分</h2><ol type="1"><li>确定一个区间，使得我们找的目标值一定在这个区间里</li><li>找一个性质，满足：<ol type="1"><li>性质具有二段性（前半段满足，后半段不满足）</li><li>答案是二段性的分界点</li></ol></li></ol><p>答案有两种：一种是前半段的右端点，一种是后半段的左端点</p><ul><li><strong>第一类：答案是前半段的右端点</strong></li></ul><p>将(L, R)分成(L, M - 1)和(M, R)</p><p>if M是红色的，说明ans必然在(M, R)</p><p>else 说明ans必然在(L, M - 1)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (L &lt; R) &#123;</span><br><span class="line"><span class="type">int</span> M = (L + R + <span class="number">1</span>) / <span class="number">2</span>; <span class="comment">// 一定要补上1，实际上计算的是ceil(L + R / 2)</span></span><br><span class="line"><span class="keyword">if</span> M红 L = M;</span><br><span class="line"><span class="keyword">else</span> R = M - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>第二类：答案是后半段的左端点</strong></li></ul><p>将(L, R)分成(L, M)和(M + 1, R)</p><p>if M是绿色的，说明ans必然实在M的左边（L, M）</p><p>else 说明ans必然在(M + 1, R)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (L &lt; R) &#123;</span><br><span class="line"><span class="type">int</span> M = (L + R) / <span class="number">2</span>; <span class="comment">// 这里没有加1</span></span><br><span class="line"><span class="keyword">if</span> M绿 R = M;</span><br><span class="line"><span class="keyword">else</span> L = M + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>看L=M和R=M</p><p>整数二分步骤：</p><ol type="1"><li>找一个区间[L, R]，使得答案一定在该区间中</li><li>找一个判断条件，使得该判断条件具有二段性，并且答案一定是该二段性的分界点</li><li>分析中点M在该判断条件下是否成立，如果成立，考虑答案在哪个区间；如果不成立，判断答案在哪个区间</li><li>如果更新方式写的是R = mid，则不用做任何处理；如果更新方式写的是L =mid，则需要在计算mid时加1</li></ol><h2 id="实数二分">实数二分</h2><p>将区间(L,R)划分成[L, M]和[M, R]</p><p>区间长度足够小的时侯停止 while (R - L &gt; 1e-6)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (R - L &gt; <span class="number">1e-6</span>) &#123;</span><br><span class="line"><span class="type">double</span> M = (L + R) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> ans在[M, R] L = M;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ans在[L, m] R = M;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意：有单调性一定可以二分，能二分的不一定单调</strong></p><h3 id="数的范围">数的范围</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/791/">789.数的范围 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 左端点：一定是大于等于x的第一个位置</span></span><br><span class="line"><span class="comment"> 判断条件：q[mid] &gt;= x</span></span><br><span class="line"><span class="comment"> 如果答案存在，这个答案一定是一段x的左端点</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> 如果 q[R] != x 说明答案不存在</span></span><br><span class="line"><span class="comment"> 否则说明L和R就是x的左端点 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 右端点：从[左边界, n-1] 从右往左小于等于x的第一个位置 </span></span><br><span class="line"><span class="comment"> 判断条件：q[mix] &lt;= x </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 读入每个询问 </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line"><span class="type">int</span> x;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line"><span class="type">int</span> l = <span class="number">0</span>, r = n - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line"><span class="type">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (q[mid] &gt;= x) &#123;</span><br><span class="line">r = mid;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">l = mid + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span> (q[r] == x) &#123;</span><br><span class="line"><span class="comment">// 说明存在左端点</span></span><br><span class="line">cout &lt;&lt; r &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="comment">// 二分x的右端点 </span></span><br><span class="line">r = n - <span class="number">1</span>; <span class="comment">// 右端点一定在[左端点，n-1]之间 </span></span><br><span class="line"><span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line"><span class="type">int</span> mid = l + r + <span class="number">1</span> &gt;&gt; <span class="number">1</span>; <span class="comment">// 因为写的时l=mid，所以需要补上1 </span></span><br><span class="line"><span class="keyword">if</span> (q[mid] &lt;= x) &#123;</span><br><span class="line">l = mid;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">r = mid - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">cout &lt;&lt; l &lt;&lt; endl; <span class="comment">// 最后l和r必然是相等的 </span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;-1 -1&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="数的三次方根">数的三次方根</h3><p>原题链接：<a href="https://www.acwing.com/problem/content/792/">790.数的三次方根 - AcWing题库</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">if (m * m * m &gt;= x) R = M;</span></span><br><span class="line"><span class="comment">else L = M; </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">double</span> x;</span><br><span class="line">cin &gt;&gt; x;</span><br><span class="line"><span class="type">double</span> l = <span class="number">-10000</span>, r = <span class="number">10000</span>;</span><br><span class="line"><span class="keyword">while</span> (r - l &gt; <span class="number">1e-8</span>) &#123;</span><br><span class="line"><span class="type">double</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> (mid * mid * mid &gt;= x) &#123;</span><br><span class="line">r = mid;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">l = mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.6lf\n&quot;</span>, l);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="三分法">三分法</h3><p>一般是单峰函数或者单谷函数。求导，对导数进行二分。</p><h2 id="前缀和">前缀和</h2><p>待续...</p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】使用Chainlink预言机获取链下数据</title>
      <link href="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/"/>
      <url>/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在上一篇博客的基础上，本文将详细介绍Chainlink获取链下数据的方法。</p><p>本文需要在Remix上部署三个智能合约，分别是LinkToken.sol、Operator.sol和ATestnetConsumer.sol。而LinkToken合约的部署流程已在上文详细给出，这里我写一下跳转链接：<ahref="https://keikei99.github.io/2023/03/17/%5BChainlink%5D基于私链运行一个Chainlink预言机节点/">【Chainlink】基于私链运行一个Chainlink预言机节点| Keike1 (keikei99.github.io)</a>。</p><p>区块链上的用户作为数据获取方，需要从链下的数据提供方获取数据，而区块链本身不具备获取现实世界数据的能力，因此需要使用Chainlink预言机作为连接链上和链下之间的桥梁。下面我们将模拟用户获取数据的这个过程。</p><h2 id="部署operator.sol合约">部署Operator.sol合约</h2><p><ahref="https://remix.ethereum.org/#url=https://docs.chain.link/samples/ChainlinkNodes/Operator.sol">Operator.sol</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.7</span><span class="number">.6</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.7/Operator.sol&quot;</span>;</span><br></pre></td></tr></table></figure><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/deploy_operator.png" class="" title="deploy_operator"><p>部署完要记得把合约地址记录下来</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Operator: 0xD82f08722b8e24DA3ab608AB11E230dB0E0a5829</span><br></pre></td></tr></table></figure><p>随后调用setAuthorizedSenders方法，填自己的账户地址，注意要以数组形式传递。如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&quot;0x0688AbDa371A869DcBb56d2E946A6898660ECDef&quot;]</span><br></pre></td></tr></table></figure><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/set_senders.png" class="" title="set_senders"><p>可以用<code>isAuthorizedSender</code>来判断是否设置成功</p><figure><imgsrc="https://docs.chain.link/images/chainlink-nodes/node-operators/operator-isauthorizedsender.jpg"alt="A screenshot showing Chainlink node whitelisted in Remix." /><figcaption aria-hidden="true">A screenshot showing Chainlink nodewhitelisted in Remix.</figcaption></figure><h2 id="在chainlink-operator中创建新的job">在ChainlinkOperator中创建新的Job</h2><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/new_job.png" class="" title="new_job"><p>写入以下内容</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES HARDCODED VALUES FOR CLARITY.</span></span><br><span class="line"><span class="comment"># THIS IS EXAMPLE CODE THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"># DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;test&quot;</span></span><br><span class="line"><span class="attr">schemaVersion</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;directrequest&quot;</span></span><br><span class="line"><span class="comment"># Optional External Job ID: Automatically generated if unspecified</span></span><br><span class="line"><span class="comment"># externalJobID = &quot;b1d42cd5-4a3a-4200-b1f7-25a68e48aad8&quot;</span></span><br><span class="line"><span class="attr">contractAddress</span> = <span class="string">&quot;YOUR_OPERATOR_CONTRACT_ADDRESS&quot;</span></span><br><span class="line"><span class="attr">maxTaskDuration</span> = <span class="string">&quot;0s&quot;</span></span><br><span class="line"><span class="attr">minIncomingConfirmations</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">observationSource</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    decode_log   [type=&quot;ethabidecodelog&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;OracleRequest(bytes32 indexed specId, address requester, bytes32 requestId, uint256 payment, address callbackAddr, bytes4 callbackFunctionId, uint256 cancelExpiration, uint256 dataVersion, bytes data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;$(jobRun.logData)&quot;</span></span><br><span class="line"><span class="string">                  topics=&quot;$(jobRun.logTopics)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_cbor  [type=&quot;cborparse&quot; data=&quot;$(decode_log.data)&quot;]</span></span><br><span class="line"><span class="string">    fetch        [type=&quot;http&quot; method=GET url=&quot;$(decode_cbor.get)&quot; allowUnrestrictedNetworkAccess=&quot;true&quot;]</span></span><br><span class="line"><span class="string">    parse        [type=&quot;jsonparse&quot; path=&quot;$(decode_cbor.path)&quot; data=&quot;$(fetch)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    multiply     [type=&quot;multiply&quot; input=&quot;$(parse)&quot; times=&quot;$(decode_cbor.times)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    encode_data  [type=&quot;ethabiencode&quot; abi=&quot;(bytes32 requestId, uint256 value)&quot; data=&quot;&#123; \\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;value\\&quot;: $(multiply) &#125;&quot;]</span></span><br><span class="line"><span class="string">    encode_tx    [type=&quot;ethabiencode&quot;</span></span><br><span class="line"><span class="string">                  abi=&quot;fulfillOracleRequest2(bytes32 requestId, uint256 payment, address callbackAddress, bytes4 callbackFunctionId, uint256 expiration, bytes calldata data)&quot;</span></span><br><span class="line"><span class="string">                  data=&quot;&#123;\\&quot;requestId\\&quot;: $(decode_log.requestId), \\&quot;payment\\&quot;:   $(decode_log.payment), \\&quot;callbackAddress\\&quot;: $(decode_log.callbackAddr), \\&quot;callbackFunctionId\\&quot;: $(decode_log.callbackFunctionId), \\&quot;expiration\\&quot;: $(decode_log.cancelExpiration), \\&quot;data\\&quot;: $(encode_data)&#125;&quot;</span></span><br><span class="line"><span class="string">                  ]</span></span><br><span class="line"><span class="string">    submit_tx    [type=&quot;ethtx&quot; to=&quot;YOUR_OPERATOR_CONTRACT_ADDRESS&quot; data=&quot;$(encode_tx)&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    decode_log -&gt; decode_cbor -&gt; fetch -&gt; parse -&gt; multiply -&gt; encode_data -&gt; encode_tx -&gt; submit_tx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>注意将以上的<strong>两个</strong><code>YOUR_OPERATOR_CONTRACT_ADDRESS</code>改为你的Operator合约地址。</p><p>随后复制系统给出的<code>externalJobId</code>备用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JobId: e22cd821-ecb1-405f-9525-d273acc8d66e</span><br></pre></td></tr></table></figure><h2 id="部署atestnetconsumer合约">部署ATestnetConsumer合约</h2><p><ahref="https://remix.ethereum.org/#url=https://docs.chain.link/samples/APIRequests/ATestnetConsumer.sol">ATestnetConsumer.sol</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * THIS IS AN EXAMPLE CONTRACT THAT USES UN-AUDITED CODE.</span></span><br><span class="line"><span class="comment"> * DO NOT USE THIS CODE IN PRODUCTION.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">contract <span class="title class_">ATestnetConsumer</span> is <span class="title class_">ChainlinkClient</span>, <span class="title class_">ConfirmedOwner</span> &#123;</span><br><span class="line">    using <span class="title class_">Chainlink</span> <span class="keyword">for</span> <span class="title class_">Chainlink</span>.<span class="property">Request</span>;</span><br><span class="line"></span><br><span class="line">    uint256 private constant <span class="variable constant_">ORACLE_PAYMENT</span> = (<span class="number">1</span> * <span class="variable constant_">LINK_DIVISIBILITY</span>) / <span class="number">10</span>; <span class="comment">// 0.1 * 10**18</span></span><br><span class="line">    uint256 public currentPrice;</span><br><span class="line"></span><br><span class="line">    event <span class="title class_">RequestEthereumPriceFulfilled</span>(</span><br><span class="line">        bytes32 indexed requestId,</span><br><span class="line">        uint256 indexed price</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  Sepolia</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@dev</span> LINK address in Sepolia network: 0x779877A7B0D9E8603169DdbD7836e478b4624789</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@dev</span> Check https://docs.chain.link/docs/link-token-contracts/ for LINK address for the right network</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) <span class="title class_">ConfirmedOwner</span>(msg.<span class="property">sender</span>) &#123;</span><br><span class="line">        <span class="title function_">setChainlinkToken</span>(<span class="number">0x779877A7B0D9E8603169DdbD7836e478b4624789</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">requestEthereumPrice</span>(<span class="params"></span></span><br><span class="line"><span class="params">        address _oracle,</span></span><br><span class="line"><span class="params">        string memory _jobId</span></span><br><span class="line"><span class="params">    </span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">Chainlink</span>.<span class="property">Request</span> memory req = <span class="title function_">buildChainlinkRequest</span>(</span><br><span class="line">            <span class="title function_">stringToBytes32</span>(_jobId),</span><br><span class="line">            <span class="title function_">address</span>(<span class="variable language_">this</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fulfillEthereumPrice</span>.<span class="property">selector</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(</span><br><span class="line">            <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://min-api.cryptocompare.com/data/price?fsym=ETH&amp;tsyms=USD&quot;</span></span><br><span class="line">        );</span><br><span class="line">        req.<span class="title function_">add</span>(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;USD&quot;</span>);</span><br><span class="line">        req.<span class="title function_">addInt</span>(<span class="string">&quot;times&quot;</span>, <span class="number">100</span>);</span><br><span class="line">        <span class="title function_">sendChainlinkRequestTo</span>(_oracle, req, <span class="variable constant_">ORACLE_PAYMENT</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fulfillEthereumPrice</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        uint256 _price</span></span><br><span class="line"><span class="params">    </span>) public <span class="title function_">recordChainlinkFulfillment</span>(<span class="params">_requestId</span>) &#123;</span><br><span class="line">        emit <span class="title class_">RequestEthereumPriceFulfilled</span>(_requestId, _price);</span><br><span class="line">        currentPrice = _price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getChainlinkToken</span>(<span class="params"></span>) public view returns (address) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">chainlinkTokenAddress</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withdrawLink</span>(<span class="params"></span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title class_">LinkTokenInterface</span> link = <span class="title class_">LinkTokenInterface</span>(<span class="title function_">chainlinkTokenAddress</span>());</span><br><span class="line">        <span class="built_in">require</span>(</span><br><span class="line">            link.<span class="title function_">transfer</span>(msg.<span class="property">sender</span>, link.<span class="title function_">balanceOf</span>(<span class="title function_">address</span>(<span class="variable language_">this</span>))),</span><br><span class="line">            <span class="string">&quot;Unable to transfer&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">cancelRequest</span>(<span class="params"></span></span><br><span class="line"><span class="params">        bytes32 _requestId,</span></span><br><span class="line"><span class="params">        uint256 _payment,</span></span><br><span class="line"><span class="params">        bytes4 _callbackFunctionId,</span></span><br><span class="line"><span class="params">        uint256 _expiration</span></span><br><span class="line"><span class="params">    </span>) public onlyOwner &#123;</span><br><span class="line">        <span class="title function_">cancelChainlinkRequest</span>(</span><br><span class="line">            _requestId,</span><br><span class="line">            _payment,</span><br><span class="line">            _callbackFunctionId,</span><br><span class="line">            _expiration</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">stringToBytes32</span>(<span class="params"></span></span><br><span class="line"><span class="params">        string memory source</span></span><br><span class="line"><span class="params">    </span>) private pure returns (bytes32 result) &#123;</span><br><span class="line">        bytes memory tempEmptyStringTest = <span class="title function_">bytes</span>(source);</span><br><span class="line">        <span class="keyword">if</span> (tempEmptyStringTest.<span class="property">length</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0x0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        assembly &#123;</span><br><span class="line">            <span class="comment">// solhint-disable-line no-inline-assembly</span></span><br><span class="line">            result := <span class="title function_">mload</span>(<span class="title function_">add</span>(source, <span class="number">32</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>这里注意将第29行的setChainlinkToken的参数改为之前部署的LinkToken合约地址</strong></p><h2 id="在metamask中导入link代币">在Metamask中导入LINK代币</h2><p>私有链中可以有多种代币，这里我们使用Metamask去管理我们的账户余额以方便我们在Remix部署合约。</p><p>打开Metamask，点击Assets，点击Import tokens</p><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/import_tokens.png" class="" title="import_tokens"><p>然后填入你的LinkToken合约地址和它的代币符号LINK就行。</p><h2id="利用linktoken合约向atestnetconsumer合约转账">利用LinkToken合约向ATestnetConsumer合约转账</h2><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/transfer.png" class="" title="transfer"><p>这里我转入了1个LINK，根据实际需要转就可以了。转账以后，去原来部署的ATestnetConsumer合约中调用<code>requestEthereumPrice</code>方法。</p><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/request_data.png" class="" title="request_data"><p>_oracle填入Operator合约地址，_jobId填入刚刚在控制台得到的JobId。</p><p><u><strong>JobId要去掉中间的横线！！！</strong></u></p><p><u><strong>JobId要去掉中间的横线！！！</strong></u></p><p><u><strong>JobId要去掉中间的横线！！！</strong></u></p><p>最后点击currentPrice，ETH/USD的汇率就出现了。</p><img src="/2023/03/22/%E3%80%90Chainlink%E3%80%91%E4%BD%BF%E7%94%A8Chainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8E%B7%E5%8F%96%E9%93%BE%E4%B8%8B%E6%95%B0%E6%8D%AE/current_price.png" class="" title="current_price"><p>至此，我们实现了在区块链中获取链下的价格数据。在实际的开发中，可以将这种单一的数据拓展为特定的业务数据，以实现区块链与预言机在特定领域的应用。</p><p><ahref="https://zhuanlan.zhihu.com/p/373828717">基本请求模型--单预言机工作模式- 知乎 (zhihu.com)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Rust】所有权Ownership</title>
      <link href="/2023/03/20/%E3%80%90Rust%E3%80%91%E6%89%80%E6%9C%89%E6%9D%83Ownership/"/>
      <url>/2023/03/20/%E3%80%90Rust%E3%80%91%E6%89%80%E6%9C%89%E6%9D%83Ownership/</url>
      
        <content type="html"><![CDATA[<h2 id="所有权">所有权</h2><p>核心内容：</p><ol type="1"><li>Rust中的每一个值都有一个<strong>所有者</strong>（<em>owner</em>）。</li><li>值在任一时刻有且只有一个所有者。</li><li>当所有者（变量）离开作用域，这个值将被丢弃。</li></ol><p>变量有变量名和对应的内存分配空间。Rust中的所有权定义<strong>该变量与变量名和对应的存储空间相绑定</strong>，在作用域结束时拥有所有权的变量的存储空间会被释放，而没有所有权的变量则忽略释放空间的操作。</p><p>Rust编译器会隐式调用Copy函数和Clone函数。Copy即复制一份完全一样的变量，而不会转移将原有变量的所有权，举例如下：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">n1</span>: <span class="type">u32</span> = <span class="number">114514</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">n2</span> = n1;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;n1 = &#123;&#125; and n2 = &#123;&#125;&quot;</span>, n1, n2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n1 = 114514 and n2 = 114514</span><br></pre></td></tr></table></figure><p>上例的u32类型没有发生所有权转移，而对于String类型的数据，会发生所有权转移的情况。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Blockchain is so interesting&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s2</span> = s1;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;s1 = &#123;&#125; ans s2 = &#123;&#125;&quot;</span>, s1, s2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译错误：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">keikei@LAPTOP-VME6S439:~/rust_study/ownership$ cargo run</span><br><span class="line">   Compiling ownership v0.1.0 (/home/keikei/rust_study/ownership)</span><br><span class="line">error: 2 positional arguments in format string, but no arguments were given</span><br><span class="line">  --&gt; src/main.rs:57:20</span><br><span class="line">   |</span><br><span class="line">57 |     println!(&quot;s1 = &#123;&#125; ans s2 = &#123;&#125;&quot;);</span><br><span class="line">   |                    ^^          ^^</span><br><span class="line"></span><br><span class="line">error: could not compile `ownership` (bin &quot;ownership&quot;) due to previous error</span><br><span class="line">keikei@LAPTOP-VME6S439:~/rust_study/ownership$ cargo run</span><br><span class="line">   Compiling ownership v0.1.0 (/home/keikei/rust_study/ownership)</span><br><span class="line">error[E0382]: borrow of moved value: `s1`</span><br><span class="line">  --&gt; src/main.rs:57:37</span><br><span class="line">   |</span><br><span class="line">55 |     let s1 = String::from(&quot;Blockchain is so interesting&quot;);</span><br><span class="line">   |         -- move occurs because `s1` has type `String`, which does not implement the `Copy` trait</span><br><span class="line">56 |     let s2 = s1;</span><br><span class="line">   |              -- value moved here</span><br><span class="line">57 |     println!(&quot;s1 = &#123;&#125; ans s2 = &#123;&#125;&quot;, s1, s2);</span><br><span class="line">   |                                     ^^ value borrowed here after move</span><br><span class="line">   |</span><br><span class="line">   = note: this error originates in the macro `$crate::format_args_nl` which comes from the expansion of the macro `println` (in Nightly builds, run with -Z macro-backtrace for more info)</span><br><span class="line">help: consider cloning the value if the performance cost is acceptable</span><br><span class="line">   |</span><br><span class="line">56 |     let s2 = s1.clone();</span><br><span class="line">   |                ++++++++</span><br><span class="line"></span><br><span class="line">For more information about this error, try `rustc --explain E0382`.</span><br><span class="line">error: could not compile `ownership` (bin &quot;ownership&quot;) due to previous error</span><br></pre></td></tr></table></figure><p>如果把<code>let s2 = s1;</code>改为<code>let s2 = s1.clone();</code>，编译能够通过。说明我们在对复杂数据类型进行操作时需要显式的调用<code>clone</code>函数。</p><p>官方文档的说法：</p><p>任何一组简单标量值的组合都可以实现<code>Copy</code>，任何不需要分配内存或某种形式资源的类型都可以实现<code>Copy</code> 。如下是一些 <code>Copy</code> 的类型：</p><ul><li>所有整数类型，比如 <code>u32</code>。</li><li>布尔类型，<code>bool</code>，它的值是 <code>true</code> 和<code>false</code>。</li><li>所有浮点数类型，比如 <code>f64</code>。</li><li>字符类型，<code>char</code>。</li><li>元组，当且仅当其包含的类型也都实现 <code>Copy</code>的时候。比如，<code>(i32, i32)</code> 实现了 <code>Copy</code>，但<code>(i32, String)</code> 就没有。</li></ul><h2 id="引用和借用">引用和借用</h2><p>&amp;的出现能允许你使用值但不获取所有权，多在函数传参时使用。如果这个参数的值需要改变，那还必须指定&amp;mut，说明该参数是原变量的可变引用。同理，可变引用不具有所有权。</p><p>可变引用只能引用一次，因为可变引用归根结底是指向同一份内存空间。假设存在两个可变引用<code>&amp;mut a</code>和<code>&amp;mut b</code>都指向1这个值，如果a被修改为2了，那b的值到底是1还是2呢？所以Rust会拒绝这样的操作以防止数据竞争。</p><p>Rust只允许有一个可变引用或者多个不可变引用，可变引用和不可变引用不能同时存在。</p><p>一个引用的作用域从声明的地方开始一直持续到最后一次使用为止。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r1</span> = &amp;s; <span class="comment">// 没问题</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r2</span> = &amp;s; <span class="comment">// 没问题</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; and &#123;&#125;&quot;</span>, r1, r2);</span><br><span class="line">    <span class="comment">// 此位置之后 r1 和 r2 不再使用</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r3</span> = &amp;<span class="keyword">mut</span> s; <span class="comment">// 没问题</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, r3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello and hello</span><br><span class="line">hello</span><br></pre></td></tr></table></figure><h2 id="slice类型">Slice类型</h2><p>RustSlice（切片）是对数据值的部分引用，比如<code>&amp;s[0..i]</code>可以指定引用起始索引为0，长度为i的字符串</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fn first_word(s: &amp;String) -&gt; usize</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">first_word</span>(s: &amp;<span class="type">String</span>) <span class="punctuation">-&gt;</span> &amp;<span class="type">str</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">bytes</span> = s.<span class="title function_ invoke__">as_bytes</span>();</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">for</span> (i, &amp;item) <span class="keyword">in</span> bytes.<span class="title function_ invoke__">iter</span>().<span class="title function_ invoke__">enumerate</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> item == <span class="string">b&#x27; &#x27;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &amp;s[<span class="number">0</span>..i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &amp;s[..];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】Chainlink相关</title>
      <link href="/2023/03/19/%E3%80%90Chainlink%E3%80%91Chainlink%E7%9B%B8%E5%85%B3/"/>
      <url>/2023/03/19/%E3%80%90Chainlink%E3%80%91Chainlink%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<h2 id="白皮书速览">白皮书速览</h2><p>Chainlink白皮书地址：<ahref="https://research.chain.link/whitepaper-v2.pdf?_ga=2.203170515.376502038.1679147678-150248235.1677582268">whitepaper-v2.pdf(chain.link)</a></p><p>摘自<ahref="https://zhuanlan.zhihu.com/p/415515492">一文速览Chainlink2.0白皮书 - 知乎 (zhihu.com)</a></p><p>Chainlink2.0是在原版白皮书的基础上做的进一步扩展，<u>其愿景是为智能合约快速可靠地接入任何链下数据源和链下计算资源，并同时保障隐私，补充并增强已有和新增区块链的性能。</u>（<strong><em>为区块链接入链下数据，是链上和链下的桥梁</em></strong>）从愿景中不难发现，Chainlink服务的是现存及潜在所有区块链的智能合约，不仅为他们提供链下数据，还提供链下计算，完全满足智能合约的任意链下需求。</p><p>为实现这一愿景，Chainlink 2.0提出去中心化预言机网络（DON）的概念，DON是由一组Chainlink节点负责维护的网络，节点基于委员会的共识协议，可灵活选择并部署任何预言机功能。<u>DON的提出将原本功能性的预言机拓宽为预言机集群，实现预言机拓扑结构由点状到网状的演进。</u>（<strong><em>Chainlink本身是一种特殊的分布式节点集群，一定程度上避免了传统预言机存在被单点攻击的风险</em></strong>）DON的最大优势是可以快速启动新的区块链服务，无需为每个区块链或者每种服务开发新的专用网络。这样一来，无论新的应用场景如何变化，DON都能迅速响应，及时接入。</p><p>DON由可执行程序和适配器组成，其中可执行程序是确定性的程序，而适配器是DON与外界交互的接口。可执行程序类似智能合约，可执行特定计算，如生成随机数，触发链上合约自动执行等。适配器类似接口转换器，使得DON可以与区块链、Web服务器、存储服务器以及其他DON连接。</p><p>Chainlink2.0白皮书中还列举DON的5个实际用例，分别是：储备金证明，<u>接入企业/传统系统</u>，去中心化身份，优先通道及保障DeFi隐私的Mixicles。</p><p>储备金证明常用于不同区块链之间的消息验证，如用户在比特币链锁仓BTC后在以太坊上发行WBTC，这时候以太坊应用就需要验证比特币链上确实锁仓足额BTC。使用储备金证明，DON可以获取比特币链上的储备信息，并反馈给以太坊应用，确保WBTC的发行背书。<u>由于DON的连接特性，企业无需进行额外开发就能将传统系统数据发送至区块链，大大方便接入企业的传统系统</u>。去中心化身份是指通过区块链建立用户的身份信息，信息可以来自传统系统如银行系统等的信用数据，通过DON将这类隐私数据提供给智能合约使用，能够实现低抵押借贷、KYC等区块链应用。优先通道是矿工为用户提供的一种保证，保证用户的交易将在某个区块存储到链上，可以用DON轻松实现。Mixicles是由ChainlinkLabs提出的隐私保护DeFi工具，可保证在不披露底层资产信息的前提下进行二元期权交易。</p><p>Chainlink2.0白皮书单独介绍DON的公允排序服务（FSS）。公允排序包括两方面：一是排序按照节点接收交易的时间先后进行；二是保存交易之间的因果关系。所谓因果关系，是指隐藏交易数据，等到共识层完成排序后再披露交易顺序，以达到防止改变交易之间的因果关系。由此可知，公允排序服务可以有效消除抢跑交易。</p><p>Chainlink2.0白皮书提到DON采用的交易执行框架（TEF）。TEF具有<u>高性能、低费用、隐私保护等优点</u>，支持任意L2执行技术和范式，可以快速更新主网智能合约，同时保留主网的关键可信度。</p><p>去中心化也是Chainlink2.0白皮书重点关注的内容，并根据数据经由数据源到DON再到主网智能合约的流向逐一讨论去中心化方案。针对数据源，设计数据源认证机制，保证数据确实由可信数据源未经篡改提供；针对DON，设计成熟客户端，防止客户端出现故障，支持少数派报告；针对主网智能合约，建立监控和失效安全机制，实行信任最小化治理，为DON节点建立链上身份等。</p><p>建立去中心化信任模型的一个关键措施是设计合理的经济激励机制，Chainlink2.0白皮书分别<u>采用显性和隐性经济激励机制</u>（<strong><em>使作恶成本远高于作恶收益，实现链上不可信环境的可信治理</em></strong>）。显性经济激励为权益质押，Chainlink节点质押一定数量的LINK通证参与DON。Chainlink的权益质押与区块链上的权益质押有很大不同，一方面权益质押主要用来验证链下数据的真实有效性，而非达成区块链底层共识；另一方面，Chainlink的权益质押主要用于防止节点受贿发送欺诈数据，为此Chainlink提出超线性权益质押，即<u>攻击者需要提供远超节点质押的保证金，才能够有效攻击</u>。而隐性激励指未来收益机会，即只有服务质量高、声誉好的节点才能吸引潜在用户，获得未来收益机会。</p><p>Chainlink2.0白皮书将使用链下资源的智能合约称之为混合型智能合约，单单在链上运行的智能合约受限于链上资源的有限、昂贵和缓慢等制约仅能提供部分功能，而结合DON的混合型智能合约理论上可以获取链下无限的资源，并将高昂的链上计算成本转移到低廉的链下，因而可以提供完备的功能，同时继承智能合约去中心化、无需许可等优点。混合型智能合约优势之一在于让人清楚地了解该智能合约包含链下组件，并把链下组件作为智能合约的组成部分而不再是分割的两个领域。</p><p>Chainlink2.0白皮书以DON为基础，混合型智能合约为载体，向我们描绘未来预言机蓝图。欲要了解更多Chainlink2.0设计、实现细节，敬请关注即将发布的Chainlink 2.0中文版白皮书！</p><h3 id="chainlink的设计机制">Chainlink的设计机制</h3><p>Chainlink 的理想是做一个去中心化的预言机。</p><p>根据白皮书的介绍，Chainlink 通过使用 API将链上和链外联系起来。它通过获取链上资源（如以太坊、比特币和 Hyperledger等区块链），并通过 API将其连接到链下资源（如市场数据、银行支付、零售支付、后端系统、事件数据等）来实现链下数据与链上智能合约的交互。</p><figure><imgsrc="https://pic1.zhimg.com/80/v2-8295c870b7319a6e56044d07e9b0dd94_1440w.webp"alt="img" /><figcaption aria-hidden="true">img</figcaption></figure><p><ahref="https://zhuanlan.zhihu.com/p/113875183">Chainlink的理想与现实 -知乎 (zhihu.com)</a></p><p>每个参与智能合约的预言机都会搜集相关数据（如市场数据），将数据发送至网络中的其他预言机，按照指示将所有数据聚合至单一数据点，并经由统一的预言机一次性发送至链上的智能合约。</p><p>链下预言机治理其实也存在一个不可能三角问题，如何在确保链下数据客观、严谨的基础上，又能保证和链上世界接轨的处理效率，最主要的是，链下预言机的“管理者‘本身是安全、可信的。总之，链上区块链运转模型和链下预言机治理就像一个双星系统，二者互相影响又互相依赖。</p><p><ahref="https://blog.csdn.net/llslinliansheng/article/details/128057631">(56条消息)Chainlink——白皮书简析(whitepaperv2)_llsforest_llsForest的博客-CSDN博客</a></p><img src="/2023/03/19/%E3%80%90Chainlink%E3%80%91Chainlink%E7%9B%B8%E5%85%B3/attack.png" class="" title="attack"><p>数据是如何实现上链的：<ahref="https://blog.csdn.net/heyuekeji/article/details/107023324">(56条消息)深入浅出：一条数据是如何完成上链的_荷月科技的博客-CSDN博客</a></p><p>对哈希进行签名还可将发送者的身份和信息绑定，同时也可防止其他人冒充发送者，因此这样处理可保证信息的防篡改的同时认证发送者的身份，防止抵赖。</p><p><u>前不久，北京市金融工作局局长霍学文在一次演讲中曾指出，区块链中的“decentralized”特征的本意不是所谓的“去中心化”，准确地讲是“分散”的意思，把区块链简单地理解为“去中心化”，其实是翻译错误，是不准确的。</u></p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Chainlink】基于私链运行一个Chainlink预言机节点</title>
      <link href="/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/"/>
      <url>/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="注意">注意</h2><p>官方文档：<ahref="https://docs.chain.link/chainlink-nodes/v1/running-a-chainlink-node">Runninga Chainlink Node | Chainlink Documentation</a></p><ol type="1"><li>本教程和官方教程的区别在于，本教程<strong>基于自己搭建的Geth私有链</strong>而非Goerli测试网</li><li>建议先在本地创建账户，再创建json文件，然后去metamask添加importaccount，最后再在启动私链的命令中添加--unlock参数解锁账户，实现交易的打包。这一步，目的是为在Remix上部署LinkToken合约做准备。</li><li>在metamask上添加创建的账户是为后续在Remix上部署合约做准备</li><li>在Remix上部署LinkToken合约的目的是为后续给预言机节点转账做准备</li></ol><h2 id="用geth搭建私有链">用Geth搭建私有链</h2><p>下载Geth</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt-get install software-properties-common</span><br><span class="line">add-apt-repository -y ppa:ethereum/ethereum</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install ethereum</span><br></pre></td></tr></table></figure><p>随后创建如下的文件目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/myChain</span><br><span class="line">├── chainlink</span><br><span class="line">└── localChain</span><br><span class="line">    ├── node1</span><br></pre></td></tr></table></figure><p>输入如下命令创建账户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo geth --datadir ./ account new</span><br></pre></td></tr></table></figure><p>可以通过两种方式配置创世区块：</p><ul><li>直接配置genesis.json文件</li><li>使用puppeth配置创世区块</li></ul><p>0xedd96278959aA8B27DdC14FD70ACb31f7e7beC2F</p><p>0xCDA9035668b149d18905349Fa8779073e433820C</p><p>如果要直接配置genesis.json文件，可参考如下写法：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;config&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;chainId&quot;</span><span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;homesteadBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;eip155Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;eip158Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;eip150Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;alloc&quot;</span>      <span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;coinbase&quot;</span>   <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000000000000000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;difficulty&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;0x20000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;extraData&quot;</span>  <span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;gasLimit&quot;</span>   <span class="punctuation">:</span> <span class="string">&quot;0x2fefd8&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;nonce&quot;</span>      <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000042&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mixhash&quot;</span>    <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;parentHash&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span>  <span class="punctuation">:</span> <span class="string">&quot;0x00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;alloc&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;18aCF602A4C1f4915709bA09A0bFd83A58656CA4&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="string">&quot;300000000000000000000&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;8c304567E5d337cB60301a998e430F056EF9F622&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="string">&quot;400000000000000000000&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>初始化。<strong>注意每次修改JSON文件后都必须初始化</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geth init --datadir data testchain.json</span><br></pre></td></tr></table></figure><p>在~/myChain/localChain/node1下启动私链</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geth --datadir data --gcmode &quot;archive&quot; --syncmode=full --networkid 4190 --http --http.addr 0.0.0.0 --http.port 6789 --http.corsdomain &quot;*&quot; --ws --port 30305 --allow-insecure-unlock --unlock edd96278959aA8B27DdC14FD70ACb31f7e7beC2F --keystore ./keystore console</span><br></pre></td></tr></table></figure><p>私链启动以后，就去Metamask添加网络。</p><p>Metamask具体可以看这篇：https://blog.csdn.net/llslinliansheng/article/details/123596009</p><p>私链开启挖矿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">miner.setEtherbase(&quot;edd96278959aa8b27ddc14fd70acb31f7e7bec2f&quot;)</span><br><span class="line">miner.start()</span><br></pre></td></tr></table></figure><h2 id="搭建chainlink预言机">搭建Chainlink预言机</h2><p>由于LinkToken.sol的Solidity代码需要在GitHub拉取，可以通过在主页按T键搜索LinkToken.sol文件，找到文件所在目录，并拉取其V0.4的所有文件。同时要修改import部分：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.11</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;https://github.com/smartcontractkit/chainlink/contracts/src/v0.4/ERC677Token.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StandardToken</span> <span class="keyword">as</span> linkStandardToken &#125; <span class="keyword">from</span> <span class="string">&quot;https://github.com/smartcontractkit/chainlink/contracts/src/v0.4/vendor/StandardToken.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract <span class="title class_">LinkToken</span> is linkStandardToken, <span class="title class_">ERC677Token</span> &#123;</span><br><span class="line"></span><br><span class="line">  uint public constant totalSupply = <span class="number">10</span>**<span class="number">27</span>;</span><br><span class="line">  string public constant name = <span class="string">&quot;ChainLink Token&quot;</span>;</span><br><span class="line">  uint8 public constant decimals = <span class="number">18</span>;</span><br><span class="line">  string public constant symbol = <span class="string">&quot;LINK&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">LinkToken</span>(<span class="params"></span>)</span><br><span class="line">    public</span><br><span class="line">  &#123;</span><br><span class="line">    balances[msg.<span class="property">sender</span>] = totalSupply;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@dev</span> transfer token to a specified address with additional data if the recipient is a contract.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _to The address to transfer to.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _value The amount to be transferred.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _data The extra data to be passed to the receiving contract.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">transferAndCall</span>(<span class="params">address _to, uint _value, bytes _data</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_to)</span><br><span class="line">    returns (bool success)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">transferAndCall</span>(_to, _value, _data);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@dev</span> transfer token to a specified address.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _to The address to transfer to.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> _value The amount to be transferred.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">transfer</span>(<span class="params">address _to, uint _value</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_to)</span><br><span class="line">    returns (bool success)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">transfer</span>(_to, _value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@dev</span> Approve the passed address to spend the specified amount of tokens on behalf of msg.sender.</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _spender The address which will spend the funds.</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _value The amount of tokens to be spent.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">approve</span>(<span class="params">address _spender, uint256 _value</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_spender)</span><br><span class="line">    returns (bool)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">approve</span>(_spender,  _value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@dev</span> Transfer tokens from one address to another</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _from address The address which you want to send tokens from</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _to address The address which you want to transfer to</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> _value uint256 the amount of tokens to be transferred</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">transferFrom</span>(<span class="params">address _from, address _to, uint256 _value</span>)</span><br><span class="line">    public</span><br><span class="line">    <span class="title function_">validRecipient</span>(_to)</span><br><span class="line">    returns (bool)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">transferFrom</span>(_from, _to, _value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// MODIFIERS</span></span><br><span class="line"></span><br><span class="line">  modifier <span class="title function_">validRecipient</span>(<span class="params">address _recipient</span>) &#123;</span><br><span class="line">    <span class="built_in">require</span>(_recipient != <span class="title function_">address</span>(<span class="number">0</span>) &amp;&amp; _recipient != <span class="title function_">address</span>(<span class="variable language_">this</span>));</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>随后使用Remix部署合约，然而私链终端需要对交易进行打包，解锁账户，开始挖矿。</p><img src="/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/geth_miner.png" class="" title="geth_miner"><p>安装PostgreSQL和docker，这里不细说。PostgreSQL的安装过程具体可以看这篇文章：<ahref="https://linux.cn/article-11480-1.html">技术|如何在 Ubuntu上安装和配置 PostgreSQL (linux.cn)</a>。</p><p>我使用的PostgreSQL版本和docker版本如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">keikei@ubuntu:~$ psql --version</span><br><span class="line">psql (PostgreSQL) 12.14 (Ubuntu 12.14-0ubuntu0.20.04.1)</span><br><span class="line">keikei@ubuntu:~$ docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           23.0.1</span><br><span class="line"> API version:       1.42</span><br><span class="line"> Go version:        go1.19.5</span><br><span class="line"> Git commit:        a5ee5b1</span><br><span class="line"> Built:             Thu Feb  9 19:46:56 2023</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Context:           default</span><br><span class="line">permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get &quot;http://%2Fvar%2Frun%2Fdocker.sock/v1.24/version&quot;: dial unix /var/run/docker.sock: connect: permission denied</span><br></pre></td></tr></table></figure><p>随后在~/myChain/chainlink/.chainlink下创建<code>.env</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ROOT=/chainlink</span><br><span class="line">LOG_LEVEL=debug</span><br><span class="line">ETH_CHAIN_ID=4190</span><br><span class="line">CHAINLINK_TLS_PORT=0</span><br><span class="line">LINK_CONTRACT_ADDRESS=0x2C8ed9723635a66597Ee5f94E626453A3528fE26</span><br><span class="line">SECURE_COOKIES=false</span><br><span class="line">ALLOW_ORIGINS=*</span><br><span class="line">ETH_URL=ws://127.0.0.1:8546</span><br><span class="line">DATABASE_URL=postgresql://postgres:Likeqi5201314000@localhost:5432/chainlink?sslmode=disable</span><br><span class="line">DATABASE_TIMEOUT=0</span><br></pre></td></tr></table></figure><p>随后启动预言机</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --net host -u=root  -p 6688:6688 -v ~/.chainlink:/chainlink -it --env-file=.env smartcontract/chainlink:1.11.0 local n</span><br></pre></td></tr></table></figure><p>在本地浏览器输入127.0.0.1:6688，打开Chainlink Operator</p><img src="/2023/03/17/%E3%80%90Chainlink%E3%80%91%E5%9F%BA%E4%BA%8E%E7%A7%81%E9%93%BE%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAChainlink%E9%A2%84%E8%A8%80%E6%9C%BA%E8%8A%82%E7%82%B9/chainlink_operator.png" class="" title="chainlink_operator"><p>至此，Chainlink分布式预言机节点已经搭建完毕。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Chainlink </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
